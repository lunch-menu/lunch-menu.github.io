/*! For license information please see main.0dfc7eae.js.LICENSE.txt */
(()=>{var e={730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),E=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),C=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var F,M=Object.assign;function U(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var V=!1;function B(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var c="\n"+i[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=o&&0<=a);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function j(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case E:return"Portal";case T:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function X(e,t){J(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function se(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Ie=null,Se=null;function Te(e){if(e=wi(e)){if("function"!==typeof Ee)throw Error(s(280));var t=e.stateNode;t&&(t=_i(t),Ee(e.stateNode,e.type,t))}}function ke(e){Ie?Se?Se.push(e):Se=[e]:Ie=e}function Ce(){if(Ie){var e=Ie,t=Se;if(Se=Ie=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function xe(e,t){return e(t)}function Ae(){}var Pe=!1;function Ne(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return xe(e,t,n)}finally{Pe=!1,(null!==Ie||null!==Se)&&(Ae(),Ce())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var De=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){De=!1}function Le(e,t,n,r,i,s,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(u){this.onError(u)}}var Fe=!1,Me=null,Ue=!1,Ve=null,Be={onError:function(e){Fe=!0,Me=e}};function je(e,t,n,r,i,s,o,a,c){Fe=!1,Me=null,Le.apply(Be,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(ze(e)!==e)throw Error(s(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=o;break}if(c===r){a=!0,r=i,n=o;break}c=c.sibling}if(!a){for(c=o.child;c;){if(c===n){a=!0,n=o,r=i;break}if(c===r){a=!0,r=o,n=i;break}c=c.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/ct|0)|0},at=Math.log,ct=Math.LN2;var lt=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,Et,It,St,Tt,kt=!1,Ct=[],xt=null,At=null,Pt=null,Nt=new Map,Rt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Ft(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=yi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Tt(e.priority,(function(){It(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Vt(e,t,n){Ut(e)&&n.delete(t)}function Bt(){kt=!1,null!==xt&&Ut(xt)&&(xt=null),null!==At&&Ut(At)&&(At=null),null!==Pt&&Ut(Pt)&&(Pt=null),Nt.forEach(Vt),Rt.forEach(Vt)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function zt(e){function t(t){return jt(t,e)}if(0<Ct.length){jt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==xt&&jt(xt,e),null!==At&&jt(At,e),null!==Pt&&jt(Pt,e),Nt.forEach(t),Rt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Dt.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Ht(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=1,Wt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Gt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=4,Wt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Wt(e,t,n,r){if(Kt){var i=Yt(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return xt=Ft(xt,e,t,n,r,i),!0;case"dragenter":return At=Ft(At,e,t,n,r,i),!0;case"mouseover":return Pt=Ft(Pt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Nt.set(s,Ft(Nt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Rt.set(s,Ft(Rt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&_t(s),null===(s=Yt(e,t,n,r))&&Kr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=yi(e=_e(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,cn,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(ln),hn=M({},ln,{view:0,detail:0}),dn=sn(hn),fn=M({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(on=e.screenX-cn.screenX,an=e.screenY-cn.screenY):an=on=0,cn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(M({},fn,{dataTransfer:0})),gn=sn(M({},hn,{relatedTarget:0})),vn=sn(M({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=M({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(yn),bn=sn(M({},ln,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},In={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=In[e])&&!!t[e]}function Tn(){return Sn}var kn=M({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(kn),xn=sn(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=sn(M({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Pn=sn(M({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=sn(Nn),Dn=[9,13,27,32],On=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Fn=u&&"TextEvent"in window&&!Ln,Mn=u&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Vn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Hn(e,t,n,r){ke(r),0<(t=Gr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Wn=null;function Qn(e){Ur(e,0)}function Yn(e){if(W(bi(e)))return e}function $n(e,t){if("change"===e)return t}var Jn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Wn=Gn=null)}function nr(e){if("value"===e.propertyName&&Yn(Wn)){var t=[];Hn(t,Wn,e,_e(e)),Ne(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Wn)}function sr(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function cr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&cr(yr,r)||(yr=r,0<(r=Gr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Ir={},Sr={};function Tr(e){if(Ir[e])return Ir[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Ir[e]=n[t];return e}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var kr=Tr("animationend"),Cr=Tr("animationiteration"),xr=Tr("animationstart"),Ar=Tr("transitionend"),Pr=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Pr.set(e,t),c(t,[e])}for(var Dr=0;Dr<Nr.length;Dr++){var Or=Nr[Dr];Rr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Rr(kr,"onAnimationEnd"),Rr(Cr,"onAnimationIteration"),Rr(xr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Ar,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,c,l){if(je.apply(this,arguments),Fe){if(!Fe)throw Error(s(198));var u=Me;Fe=!1,Me=null,Ue||(Ue=!0,Ve=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;Mr(i,a,l),s=c}else for(o=0;o<r.length;o++){if(c=(a=r[o]).instance,l=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;Mr(i,a,l),s=c}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Vr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var jr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[jr]){e[jr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Fr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[jr]||(t[jr]=!0,Br("selectionchange",!1,t))}}function qr(e,t,n,r){switch($t(t)){case 1:var i=Ht;break;case 4:i=Gt;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&((c=o.stateNode.containerInfo)===i||8===c.nodeType&&c.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=yi(a)))return;if(5===(c=o.tag)||6===c){r=s=o;continue e}a=a.parentNode}}r=r.return}Ne((function(){var r=s,i=_e(n),o=[];e:{var a=Pr.get(e);if(void 0!==a){var c=un,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":c=Cn;break;case"focusin":l="focus",c=gn;break;case"focusout":l="blur",c=gn;break;case"beforeblur":case"afterblur":c=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=An;break;case kr:case Cr:case xr:c=vn;break;case Ar:c=Pn;break;case"scroll":c=dn;break;case"wheel":c=Rn;break;case"copy":case"cut":case"paste":c=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=xn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Re(p,d))&&u.push(Hr(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new c(a,l,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(l=n.relatedTarget||n.fromElement)||!yi(l)&&!l[pi])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=r,null!==(l=(l=n.relatedTarget||n.toElement)?yi(l):null)&&(l!==(h=ze(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=r),c!==l)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=xn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==c?a:bi(c),f=null==l?a:bi(l),(a=new u(m,p+"leave",c,n,i)).target=h,a.relatedTarget=f,m=null,yi(i)===r&&((u=new u(d,p+"enter",l,n,i)).target=f,u.relatedTarget=h,m=u),h=m,c&&l)e:{for(d=l,p=0,f=u=c;f;f=Wr(f))p++;for(f=0,m=d;m;m=Wr(m))f++;for(;0<p-f;)u=Wr(u),p--;for(;0<f-p;)d=Wr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Wr(u),d=Wr(d)}u=null}else u=null;null!==c&&Qr(o,a,c,u,!1),null!==l&&null!==h&&Qr(o,h,l,u,!0)}if("select"===(c=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var g=$n;else if(Kn(a))if(Jn)g=or;else{g=ir;var v=rr}else(c=a.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Hn(o,g,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?bi(r):window,e){case"focusin":(Kn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(o,n,i)}var y;if(On)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else zn?Bn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Mn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==w?"onCompositionEnd"===w&&zn&&(y=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,zn=!0)),0<(v=Gr(r,w)).length&&(w=new bn(w,e,null,n,i),o.push({event:w,listeners:v}),y?w.data=y:null!==(y=jn(n))&&(w.data=y))),(y=Fn?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Un);case"textInput":return(e=t.data)===Un&&Vn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!On&&Bn(e,t)?(e=en(),Zt=Xt=Jt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Ur(o,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Re(e,n))&&r.unshift(Hr(e,s,i)),null!=(s=Re(e,t))&&r.push(Hr(e,s,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(null!==c&&c===r)break;5===a.tag&&null!==l&&(a=l,i?null!=(c=Re(n,s))&&o.unshift(Hr(n,c,a)):i||null!=(c=Re(n,s))&&o.push(Hr(n,c,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function ci(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _i(e){return e[fi]||null}var Ei=[],Ii=-1;function Si(e){return{current:e}}function Ti(e){0>Ii||(e.current=Ei[Ii],Ei[Ii]=null,Ii--)}function ki(e,t){Ii++,Ei[Ii]=e.current,e.current=t}var Ci={},xi=Si(Ci),Ai=Si(!1),Pi=Ci;function Ni(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ti(Ai),Ti(xi)}function Oi(e,t,n){if(xi.current!==Ci)throw Error(s(168));ki(xi,t),ki(Ai,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return M({},n,r)}function Fi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Pi=xi.current,ki(xi,e),ki(Ai,Ai.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,Ti(Ai),Ti(xi),ki(xi,e)):Ti(Ai),ki(Ai,n)}var Ui=null,Vi=!1,Bi=!1;function ji(e){null===Ui?Ui=[e]:Ui.push(e)}function zi(){if(!Bi&&null!==Ui){Bi=!0;var e=0,t=wt;try{var n=Ui;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Vi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),We(Ze,zi),i}finally{wt=t,Bi=!1}}return null}var qi=[],Ki=0,Hi=null,Gi=0,Wi=[],Qi=0,Yi=null,$i=1,Ji="";function Xi(e,t){qi[Ki++]=Gi,qi[Ki++]=Hi,Hi=e,Gi=t}function Zi(e,t,n){Wi[Qi++]=$i,Wi[Qi++]=Ji,Wi[Qi++]=Yi,Yi=e;var r=$i;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Ji=s+e}else $i=1<<s|n<<i|r,Ji=e}function es(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ts(e){for(;e===Hi;)Hi=qi[--Ki],qi[Ki]=null,Gi=qi[--Ki],qi[Ki]=null;for(;e===Yi;)Yi=Wi[--Qi],Wi[Qi]=null,Ji=Wi[--Qi],Wi[Qi]=null,$i=Wi[--Qi],Wi[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Rl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function cs(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ls(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(cs(e))throw Error(s(418));t=li(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(cs(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(cs(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=li(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?li(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=li(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var vs=Si(null),ys=null,ws=null,bs=null;function _s(){bs=ws=ys=null}function Es(e){var t=vs.current;Ti(vs),e._currentValue=t}function Is(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ss(e,t){ys=e,bs=ws=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Ts(e){var t=e._currentValue;if(bs!==e)if(e={context:e,memoizedValue:t,next:null},null===ws){if(null===ys)throw Error(s(308));ws=e,ys.dependencies={lanes:0,firstContext:e}}else ws=ws.next=e;return t}var ks=null;function Cs(e){null===ks?ks=[e]:ks.push(e)}function xs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Cs(t)):(n.next=i.next,i.next=n),t.interleaved=n,As(e,r)}function As(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ps=!1;function Ns(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ds(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Os(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ac)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,As(e,n)}return null===(i=r.interleaved)?(t.next=t,Cs(r)):(t.next=i.next,i.next=t),r.interleaved=t,As(e,n)}function Ls(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Fs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ms(e,t,n,r){var i=e.updateQueue;Ps=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var c=a,l=c.next;c.next=null,null===o?s=l:o.next=l,o=c;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(null!==s){var h=i.baseState;for(o=0,u=l=c=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=M({},h,d);break e;case 2:Ps=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(l=u=f,c=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(c=h),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Mc|=o,e.lanes=o,e.memoizedState=h}}function Us(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Vs=(new r.Component).refs;function Bs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var js={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),s=Ds(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Os(e,s,i))&&(rl(t,e,i,r),Ls(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),s=Ds(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Os(e,s,i))&&(rl(t,e,i,r),Ls(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tl(),r=nl(e),i=Ds(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Os(e,i,r))&&(rl(t,e,r,n),Ls(t,e,r))}};function zs(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(i,s))}function qs(e,t,n){var r=!1,i=Ci,s=t.contextType;return"object"===typeof s&&null!==s?s=Ts(s):(i=Ri(t)?Pi:xi.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ni(e,i):Ci),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=js,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ks(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&js.enqueueReplaceState(t,t.state,null)}function Hs(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Vs,Ns(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ts(s):(s=Ri(t)?Pi:xi.current,i.context=Ni(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(Bs(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&js.enqueueReplaceState(i,i.state,null),Ms(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Vs&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Ws(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qs(e){return(0,e._init)(e._payload)}function Ys(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ol(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Ul(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var s=n.type;return s===I?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===R&&Qs(s)===t.type)?((r=i(t,n.props)).ref=Gs(e,t,n),r.return=e,r):((r=Ll(n.type,n.key,n.props,null,e.mode,r)).ref=Gs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Fl(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ul(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Ll(t.type,t.key,t.props,null,e.mode,n)).ref=Gs(e,null,t),n.return=e,n;case E:return(t=Vl(t,e.mode,n)).return=e,t;case R:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Fl(t,e.mode,n,null)).return=e,t;Ws(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?l(e,t,n,r):null;case E:return n.key===i?u(e,t,n,r):null;case R:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Ws(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Ws(t,r)}return null}function m(i,s,a,c){for(var l=null,u=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=f(i,h,a[m],c);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),s=o(v,s,m),null===u?l=v:u.sibling=v,u=v,h=g}if(m===a.length)return n(i,h),is&&Xi(i,m),l;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],c))&&(s=o(h,s,m),null===u?l=h:u.sibling=h,u=h);return is&&Xi(i,m),l}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],c))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?l=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),is&&Xi(i,m),l}function g(i,a,c,l){var u=L(c);if("function"!==typeof u)throw Error(s(150));if(null==(c=u.call(c)))throw Error(s(151));for(var h=u=null,m=a,g=a=0,v=null,y=c.next();null!==m&&!y.done;g++,y=c.next()){m.index>g?(v=m,m=null):v=m.sibling;var w=f(i,m,y.value,l);if(null===w){null===m&&(m=v);break}e&&m&&null===w.alternate&&t(i,m),a=o(w,a,g),null===h?u=w:h.sibling=w,h=w,m=v}if(y.done)return n(i,m),is&&Xi(i,g),u;if(null===m){for(;!y.done;g++,y=c.next())null!==(y=d(i,y.value,l))&&(a=o(y,a,g),null===h?u=y:h.sibling=y,h=y);return is&&Xi(i,g),u}for(m=r(i,m);!y.done;g++,y=c.next())null!==(y=p(m,i,g,y.value,l))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=o(y,a,g),null===h?u=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(i,e)})),is&&Xi(i,g),u}return function e(r,s,o,c){if("object"===typeof o&&null!==o&&o.type===I&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var l=o.key,u=s;null!==u;){if(u.key===l){if((l=o.type)===I){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===R&&Qs(l)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=Gs(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===I?((s=Fl(o.props.children,r.mode,c,o.key)).return=r,r=s):((c=Ll(o.type,o.key,o.props,null,r.mode,c)).ref=Gs(r,s,o),c.return=r,r=c)}return a(r);case E:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Vl(o,r.mode,c)).return=r,r=s}return a(r);case R:return e(r,s,(u=o._init)(o._payload),c)}if(te(o))return m(r,s,o,c);if(L(o))return g(r,s,o,c);Ws(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Ul(o,r.mode,c)).return=r,r=s),a(r)):n(r,s)}}var $s=Ys(!0),Js=Ys(!1),Xs={},Zs=Si(Xs),eo=Si(Xs),to=Si(Xs);function no(e){if(e===Xs)throw Error(s(174));return e}function ro(e,t){switch(ki(to,t),ki(eo,e),ki(Zs,Xs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(Zs),ki(Zs,t)}function io(){Ti(Zs),Ti(eo),Ti(to)}function so(e){no(to.current);var t=no(Zs.current),n=ce(t,e.type);t!==n&&(ki(eo,e),ki(Zs,n))}function oo(e){eo.current===e&&(Ti(Zs),Ti(eo))}var ao=Si(0);function co(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lo=[];function uo(){for(var e=0;e<lo.length;e++)lo[e]._workInProgressVersionPrimary=null;lo.length=0}var ho=b.ReactCurrentDispatcher,fo=b.ReactCurrentBatchConfig,po=0,mo=null,go=null,vo=null,yo=!1,wo=!1,bo=0,_o=0;function Eo(){throw Error(s(321))}function Io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function So(e,t,n,r,i,o){if(po=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?aa:ca,e=n(r,i),wo){o=0;do{if(wo=!1,bo=0,25<=o)throw Error(s(301));o+=1,vo=go=null,t.updateQueue=null,ho.current=la,e=n(r,i)}while(wo)}if(ho.current=oa,t=null!==go&&null!==go.next,po=0,vo=go=mo=null,yo=!1,t)throw Error(s(300));return e}function To(){var e=0!==bo;return bo=0,e}function ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===vo?mo.memoizedState=vo=e:vo=vo.next=e,vo}function Co(){if(null===go){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var t=null===vo?mo.memoizedState:vo.next;if(null!==t)vo=t,go=e;else{if(null===e)throw Error(s(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===vo?mo.memoizedState=vo=e:vo=vo.next=e}return vo}function xo(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=Co(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var c=a=null,l=null,u=o;do{var h=u.lane;if((po&h)===h)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(c=l=d,a=r):l=l.next=d,mo.lanes|=h,Mc|=h}u=u.next}while(null!==u&&u!==o);null===l?a=r:l.next=c,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,mo.lanes|=o,Mc|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Po(e){var t=Co(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function No(){}function Ro(e,t){var n=mo,r=Co(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,ba=!0),r=r.queue,Ko(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==vo&&1&vo.memoizedState.tag){if(n.flags|=2048,Vo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Pc)throw Error(s(349));0!==(30&po)||Do(n,t,i)}return i}function Do(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Fo(t)&&Mo(e)}function Lo(e,t,n){return n((function(){Fo(t)&&Mo(e)}))}function Fo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Mo(e){var t=As(e,1);null!==t&&rl(t,e,1,-1)}function Uo(e){var t=ko();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,mo,e),[t.memoizedState,e]}function Vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Bo(){return Co().memoizedState}function jo(e,t,n,r){var i=ko();mo.flags|=e,i.memoizedState=Vo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=Co();r=void 0===r?null:r;var s=void 0;if(null!==go){var o=go.memoizedState;if(s=o.destroy,null!==r&&Io(r,o.deps))return void(i.memoizedState=Vo(t,n,s,r))}mo.flags|=e,i.memoizedState=Vo(1|t,n,s,r)}function qo(e,t){return jo(8390656,8,e,t)}function Ko(e,t){return zo(2048,8,e,t)}function Ho(e,t){return zo(4,2,e,t)}function Go(e,t){return zo(4,4,e,t)}function Wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Wo.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Io(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),mo.lanes|=n,Mc|=n,e.baseState=!0),t)}function Zo(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{wt=n,fo.transition=r}}function ea(){return Co().memoizedState}function ta(e,t,n){var r=nl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=xs(e,t,n,r))){rl(n,e,r,tl()),sa(n,t,r)}}function na(e,t,n){var r=nl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var c=t.interleaved;return null===c?(i.next=i,Cs(t)):(i.next=c.next,c.next=i),void(t.interleaved=i)}}catch(l){}null!==(n=xs(e,t,i,r))&&(rl(n,e,r,i=tl()),sa(n,t,r))}}function ra(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function ia(e,t){wo=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var oa={readContext:Ts,useCallback:Eo,useContext:Eo,useEffect:Eo,useImperativeHandle:Eo,useInsertionEffect:Eo,useLayoutEffect:Eo,useMemo:Eo,useReducer:Eo,useRef:Eo,useState:Eo,useDebugValue:Eo,useDeferredValue:Eo,useTransition:Eo,useMutableSource:Eo,useSyncExternalStore:Eo,useId:Eo,unstable_isNewReconciler:!1},aa={readContext:Ts,useCallback:function(e,t){return ko().memoizedState=[e,void 0===t?null:t],e},useContext:Ts,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,jo(4194308,4,Wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return jo(4194308,4,e,t)},useInsertionEffect:function(e,t){return jo(4,2,e,t)},useMemo:function(e,t){var n=ko();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ko();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ko().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return ko().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),ko().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,i=ko();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Pc)throw Error(s(349));0!==(30&po)||Do(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Vo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ko(),t=Pc.identifierPrefix;if(is){var n=Ji;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_o++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ca={readContext:Ts,useCallback:$o,useContext:Ts,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Ho,useLayoutEffect:Go,useMemo:Jo,useReducer:Ao,useRef:Bo,useState:function(){return Ao(xo)},useDebugValue:Yo,useDeferredValue:function(e){return Xo(Co(),go.memoizedState,e)},useTransition:function(){return[Ao(xo)[0],Co().memoizedState]},useMutableSource:No,useSyncExternalStore:Ro,useId:ea,unstable_isNewReconciler:!1},la={readContext:Ts,useCallback:$o,useContext:Ts,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Ho,useLayoutEffect:Go,useMemo:Jo,useReducer:Po,useRef:Bo,useState:function(){return Po(xo)},useDebugValue:Yo,useDeferredValue:function(e){var t=Co();return null===go?t.memoizedState=e:Xo(t,go.memoizedState,e)},useTransition:function(){return[Po(xo)[0],Co().memoizedState]},useMutableSource:No,useSyncExternalStore:Ro,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",r=t;do{n+=j(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Ds(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hc||(Hc=!0,Gc=r),da(0,t)},n}function ma(e,t,n){(n=Ds(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Wc?Wc=new Set([this]):Wc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=kl.bind(null,e,t,n),t.then(e,e))}function va(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ds(-1,1)).tag=2,Os(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var wa=b.ReactCurrentOwner,ba=!1;function _a(e,t,n,r){t.child=null===e?Js(t,null,n,r):$s(t,e.child,n,r)}function Ea(e,t,n,r,i){n=n.render;var s=t.ref;return Ss(t,i),r=So(e,t,n,r,s,i),n=To(),null===e||ba?(is&&n&&es(t),t.flags|=1,_a(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ha(e,t,i))}function Ia(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Dl(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ll(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Sa(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(o,r)&&e.ref===t.ref)return Ha(e,t,i)}return t.flags|=1,(e=Ol(s,r)).ref=t.ref,e.return=t,t.child=e}function Sa(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(cr(s,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ha(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return Ca(e,t,n,r,i)}function Ta(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Oc,Dc),Dc|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(Oc,Dc),Dc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,ki(Oc,Dc),Dc|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,ki(Oc,Dc),Dc|=r;return _a(e,t,i,n),t.child}function ka(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ca(e,t,n,r,i){var s=Ri(n)?Pi:xi.current;return s=Ni(t,s),Ss(t,i),n=So(e,t,n,r,s,i),r=To(),null===e||ba?(is&&r&&es(t),t.flags|=1,_a(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ha(e,t,i))}function xa(e,t,n,r,i){if(Ri(n)){var s=!0;Fi(t)}else s=!1;if(Ss(t,i),null===t.stateNode)Ka(e,t),qs(t,n,r),Hs(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=Ts(l):l=Ni(t,l=Ri(n)?Pi:xi.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||c!==l)&&Ks(t,o,r,l),Ps=!1;var d=t.memoizedState;o.state=d,Ms(t,r,o,i),c=t.memoizedState,a!==r||d!==c||Ai.current||Ps?("function"===typeof u&&(Bs(t,n,u,r),c=t.memoizedState),(a=Ps||zs(t,n,a,r,d,c,l))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Rs(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:gs(t.type,a),o.props=l,h=t.pendingProps,d=o.context,"object"===typeof(c=n.contextType)&&null!==c?c=Ts(c):c=Ni(t,c=Ri(n)?Pi:xi.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==c)&&Ks(t,o,r,c),Ps=!1,d=t.memoizedState,o.state=d,Ms(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Ai.current||Ps?("function"===typeof f&&(Bs(t,n,f,r),p=t.memoizedState),(l=Ps||zs(t,n,l,r,d,p,c)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,c),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,c)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Aa(e,t,n,r,s,i)}function Aa(e,t,n,r,i,s){ka(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Mi(t,n,!1),Ha(e,t,s);r=t.stateNode,wa.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$s(t,e.child,null,s),t.child=$s(t,null,a,s)):_a(e,t,a,s),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Pa(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Na(e,t,n,r,i){return fs(),ps(i),t.flags|=256,_a(e,t,n,r),t.child}var Ra,Da,Oa,La,Fa={dehydrated:null,treeContext:null,retryLane:0};function Ma(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ua(e,t,n){var r,i=t.pendingProps,o=ao.current,a=!1,c=0!==(128&t.flags);if((r=c)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),ki(ao,1&o),null===e)return ls(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=i.children,e=i.fallback,a?(i=t.mode,a=t.child,c={mode:"hidden",children:c},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=c):a=Ml(c,i,0,null),e=Fl(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ma(n),t.memoizedState=Fa,e):Va(t,c));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Ba(e,t,a,r=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Ml({mode:"visible",children:r.children},i,0,null),(o=Fl(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$s(t,e.child,null,a),t.child.memoizedState=Ma(a),t.memoizedState=Fa,o);if(0===(1&t.mode))return Ba(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var c=r.dgst;return r=c,Ba(e,t,a,r=ha(o=Error(s(419)),r,void 0))}if(c=0!==(a&e.childLanes),ba||c){if(null!==(r=Pc)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,As(e,i),rl(r,e,i,-1))}return gl(),Ba(e,t,a,r=ha(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=xl.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=li(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Wi[Qi++]=$i,Wi[Qi++]=Ji,Wi[Qi++]=Yi,$i=e.id,Ji=e.overflow,Yi=t),t=Va(t,r.children),t.flags|=4096,t)}(e,t,c,i,r,o,n);if(a){a=i.fallback,c=t.mode,r=(o=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&c)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Ol(o,l)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Ol(r,a):(a=Fl(a,c,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,c=null===(c=e.child.memoizedState)?Ma(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},a.memoizedState=c,a.childLanes=e.childLanes&~n,t.memoizedState=Fa,i}return e=(a=e.child).sibling,i=Ol(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Va(e,t){return(t=Ml({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ba(e,t,n,r){return null!==r&&ps(r),$s(t,e.child,null,n),(e=Va(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ja(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Is(e.return,t,n)}function za(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(_a(e,t,r.children,n),0!==(2&(r=ao.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ja(e,n,t);else if(19===e.tag)ja(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ki(ao,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===co(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),za(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===co(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}za(t,!0,n,null,s);break;case"together":za(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ka(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ha(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Mc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Ol(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ol(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ga(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qa(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wa(t),null;case 1:case 17:return Ri(t.type)&&Di(),Wa(t),null;case 3:return r=t.stateNode,io(),Ti(Ai),Ti(xi),uo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(al(ss),ss=null))),Da(e,t),Wa(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Oa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Wa(t),null}if(e=no(Zs.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":$(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var c in ye(n,o),i=null,o)if(o.hasOwnProperty(c)){var l=o[c];"children"===c?"string"===typeof l?r.textContent!==l&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,l,e),i=["children",""+l]):a.hasOwnProperty(c)&&null!=l&&"onScroll"===c&&Vr("scroll",r)}switch(n){case"input":G(r),Z(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{c=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[di]=t,e[fi]=r,Ra(e,t,!1,!1),t.stateNode=e;e:{switch(c=we(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ye(n,i),l=i)if(l.hasOwnProperty(o)){var u=l[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Vr("scroll",e):null!=u&&w(e,o,u,c))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wa(t),null;case 6:if(e&&null!=t.stateNode)La(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=no(to.current),no(Zs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Wa(t),null;case 13:if(Ti(ao),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wa(t),o=!1}else null!==ss&&(al(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ao.current)?0===Lc&&(Lc=3):gl())),null!==t.updateQueue&&(t.flags|=4),Wa(t),null);case 4:return io(),Da(e,t),null===e&&zr(t.stateNode.containerInfo),Wa(t),null;case 10:return Es(t.type._context),Wa(t),null;case 19:if(Ti(ao),null===(o=t.memoizedState))return Wa(t),null;if(r=0!==(128&t.flags),null===(c=o.rendering))if(r)Ga(o,!1);else{if(0!==Lc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=co(e))){for(t.flags|=128,Ga(o,!1),null!==(r=c.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(c=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,e=c.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ki(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>qc&&(t.flags|=128,r=!0,Ga(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=co(c))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ga(o,!0),null===o.tail&&"hidden"===o.tailMode&&!c.alternate&&!is)return Wa(t),null}else 2*Je()-o.renderingStartTime>qc&&1073741824!==n&&(t.flags|=128,r=!0,Ga(o,!1),t.lanes=4194304);o.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=o.last)?n.sibling=c:t.child=c,o.last=c)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=ao.current,ki(ao,r?1&n|2:1&n),t):(Wa(t),null);case 22:case 23:return dl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Dc)&&(Wa(t),6&t.subtreeFlags&&(t.flags|=8192)):Wa(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ya(e,t){switch(ts(t),t.tag){case 1:return Ri(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ti(Ai),Ti(xi),uo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ti(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(ao),null;case 4:return io(),null;case 10:return Es(t.type._context),null;case 22:case 23:return dl(),null;default:return null}}Ra=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Da=function(){},Oa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Zs.current);var s,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var c=i[u];for(s in c)c.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(c=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&l!==c&&(null!=l||null!=c))if("style"===u)if(c){for(s in c)!c.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&c[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(o=o||[]).push(u,l)):"children"===u?"string"!==typeof l&&"number"!==typeof l||(o=o||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&Vr("scroll",e),o||c===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},La=function(e,t,n,r){n!==r&&(t.flags|=4)};var $a=!1,Ja=!1,Xa="function"===typeof WeakSet?WeakSet:Set,Za=null;function ec(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tl(e,t,r)}else n.current=null}function tc(e,t,n){try{n()}catch(r){Tl(e,t,r)}}var nc=!1;function rc(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tc(t,n,s)}i=i.next}while(i!==r)}}function ic(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sc(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function oc(e){var t=e.alternate;null!==t&&(e.alternate=null,oc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ac(e){return 5===e.tag||3===e.tag||4===e.tag}function cc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ac(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function lc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(lc(e,t,n),e=e.sibling;null!==e;)lc(e,t,n),e=e.sibling}function uc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(uc(e,t,n),e=e.sibling;null!==e;)uc(e,t,n),e=e.sibling}var hc=null,dc=!1;function fc(e,t,n){for(n=n.child;null!==n;)pc(e,t,n),n=n.sibling}function pc(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ja||ec(n,t);case 6:var r=hc,i=dc;hc=null,fc(e,t,n),dc=i,null!==(hc=r)&&(dc?(e=hc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hc.removeChild(n.stateNode));break;case 18:null!==hc&&(dc?(e=hc,n=n.stateNode,8===e.nodeType?ci(e.parentNode,n):1===e.nodeType&&ci(e,n),zt(e)):ci(hc,n.stateNode));break;case 4:r=hc,i=dc,hc=n.stateNode.containerInfo,dc=!0,fc(e,t,n),hc=r,dc=i;break;case 0:case 11:case 14:case 15:if(!Ja&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tc(n,t,o),i=i.next}while(i!==r)}fc(e,t,n);break;case 1:if(!Ja&&(ec(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Tl(n,t,a)}fc(e,t,n);break;case 21:fc(e,t,n);break;case 22:1&n.mode?(Ja=(r=Ja)||null!==n.memoizedState,fc(e,t,n),Ja=r):fc(e,t,n);break;default:fc(e,t,n)}}function mc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xa),t.forEach((function(t){var r=Al.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,c=a;e:for(;null!==c;){switch(c.tag){case 5:hc=c.stateNode,dc=!1;break e;case 3:case 4:hc=c.stateNode.containerInfo,dc=!0;break e}c=c.return}if(null===hc)throw Error(s(160));pc(o,a,i),hc=null,dc=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(u){Tl(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vc(t,e),t=t.sibling}function vc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gc(t,e),yc(e),4&r){try{rc(3,e,e.return),ic(3,e)}catch(g){Tl(e,e.return,g)}try{rc(5,e,e.return)}catch(g){Tl(e,e.return,g)}}break;case 1:gc(t,e),yc(e),512&r&&null!==n&&ec(n,n.return);break;case 5:if(gc(t,e),yc(e),512&r&&null!==n&&ec(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Tl(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,c=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===c&&"radio"===o.type&&null!=o.name&&J(i,o),we(c,a);var u=we(c,o);for(a=0;a<l.length;a+=2){var h=l[a],d=l[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):w(i,h,d,u)}switch(c){case"input":X(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){Tl(e,e.return,g)}}break;case 6:if(gc(t,e),yc(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Tl(e,e.return,g)}}break;case 3:if(gc(t,e),yc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){Tl(e,e.return,g)}break;case 4:default:gc(t,e),yc(e);break;case 13:gc(t,e),yc(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zc=Je())),4&r&&mc(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ja=(u=Ja)||h,gc(t,e),Ja=u):gc(t,e),yc(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Za=e,h=e.child;null!==h;){for(d=Za=h;null!==Za;){switch(p=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:rc(4,f,f.return);break;case 1:ec(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Tl(r,n,g)}}break;case 5:ec(f,f.return);break;case 22:if(null!==f.memoizedState){Ec(d);continue}}null!==p?(p.return=f,Za=p):Ec(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(c=d.stateNode,a=void 0!==(l=d.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,c.style.display=me("display",a))}catch(g){Tl(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Tl(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gc(t,e),yc(e),4&r&&mc(e);case 21:}}function yc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ac(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),uc(e,cc(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;lc(e,cc(e),o);break;default:throw Error(s(161))}}catch(a){Tl(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wc(e,t,n){Za=e,bc(e,t,n)}function bc(e,t,n){for(var r=0!==(1&e.mode);null!==Za;){var i=Za,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$a;if(!o){var a=i.alternate,c=null!==a&&null!==a.memoizedState||Ja;a=$a;var l=Ja;if($a=o,(Ja=c)&&!l)for(Za=i;null!==Za;)c=(o=Za).child,22===o.tag&&null!==o.memoizedState?Ic(i):null!==c?(c.return=o,Za=c):Ic(i);for(;null!==s;)Za=s,bc(s,t,n),s=s.sibling;Za=i,$a=a,Ja=l}_c(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Za=s):_c(e)}}function _c(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ja||ic(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ja)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:gs(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Us(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Us(t,a,n)}break;case 5:var c=t.stateNode;if(null===n&&4&t.flags){n=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&zt(d)}}}break;default:throw Error(s(163))}Ja||512&t.flags&&sc(t)}catch(f){Tl(t,t.return,f)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function Ec(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function Ic(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ic(4,t)}catch(c){Tl(t,n,c)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(c){Tl(t,i,c)}}var s=t.return;try{sc(t)}catch(c){Tl(t,s,c)}break;case 5:var o=t.return;try{sc(t)}catch(c){Tl(t,o,c)}}}catch(c){Tl(t,t.return,c)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var Sc,Tc=Math.ceil,kc=b.ReactCurrentDispatcher,Cc=b.ReactCurrentOwner,xc=b.ReactCurrentBatchConfig,Ac=0,Pc=null,Nc=null,Rc=0,Dc=0,Oc=Si(0),Lc=0,Fc=null,Mc=0,Uc=0,Vc=0,Bc=null,jc=null,zc=0,qc=1/0,Kc=null,Hc=!1,Gc=null,Wc=null,Qc=!1,Yc=null,$c=0,Jc=0,Xc=null,Zc=-1,el=0;function tl(){return 0!==(6&Ac)?Je():-1!==Zc?Zc:Zc=Je()}function nl(e){return 0===(1&e.mode)?1:0!==(2&Ac)&&0!==Rc?Rc&-Rc:null!==ms.transition?(0===el&&(el=mt()),el):0!==(e=wt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rl(e,t,n,r){if(50<Jc)throw Jc=0,Xc=null,Error(s(185));vt(e,n,r),0!==(2&Ac)&&e===Pc||(e===Pc&&(0===(2&Ac)&&(Uc|=n),4===Lc&&cl(e,Rc)),il(e,r),1===n&&0===Ac&&0===(1&t.mode)&&(qc=Je()+500,Vi&&zi()))}function il(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,c=i[o];-1===c?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):c<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Pc?Rc:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,ji(e)}(ll.bind(null,e)):ji(ll.bind(null,e)),oi((function(){0===(6&Ac)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Pl(n,sl.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sl(e,t){if(Zc=-1,el=0,0!==(6&Ac))throw Error(s(327));var n=e.callbackNode;if(Il()&&e.callbackNode!==n)return null;var r=dt(e,e===Pc?Rc:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vl(e,r);else{t=r;var i=Ac;Ac|=2;var o=ml();for(Pc===e&&Rc===t||(Kc=null,qc=Je()+500,fl(e,t));;)try{wl();break}catch(c){pl(e,c)}_s(),kc.current=o,Ac=i,null!==Nc?t=0:(Pc=null,Rc=0,t=Lc)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ol(e,i))),1===t)throw n=Fc,fl(e,0),cl(e,r),il(e,Je()),n;if(6===t)cl(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vl(e,r))&&(0!==(o=pt(e))&&(r=o,t=ol(e,o))),1===t))throw n=Fc,fl(e,0),cl(e,r),il(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:El(e,jc,Kc);break;case 3:if(cl(e,r),(130023424&r)===r&&10<(t=zc+500-Je())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(El.bind(null,e,jc,Kc),t);break}El(e,jc,Kc);break;case 4:if(cl(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tc(r/1960))-r)){e.timeoutHandle=ri(El.bind(null,e,jc,Kc),r);break}El(e,jc,Kc);break;default:throw Error(s(329))}}}return il(e,Je()),e.callbackNode===n?sl.bind(null,e):null}function ol(e,t){var n=Bc;return e.current.memoizedState.isDehydrated&&(fl(e,t).flags|=256),2!==(e=vl(e,t))&&(t=jc,jc=n,null!==t&&al(t)),e}function al(e){null===jc?jc=e:jc.push.apply(jc,e)}function cl(e,t){for(t&=~Vc,t&=~Uc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function ll(e){if(0!==(6&Ac))throw Error(s(327));Il();var t=dt(e,0);if(0===(1&t))return il(e,Je()),null;var n=vl(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ol(e,r))}if(1===n)throw n=Fc,fl(e,0),cl(e,t),il(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,El(e,jc,Kc),il(e,Je()),null}function ul(e,t){var n=Ac;Ac|=1;try{return e(t)}finally{0===(Ac=n)&&(qc=Je()+500,Vi&&zi())}}function hl(e){null!==Yc&&0===Yc.tag&&0===(6&Ac)&&Il();var t=Ac;Ac|=1;var n=xc.transition,r=wt;try{if(xc.transition=null,wt=1,e)return e()}finally{wt=r,xc.transition=n,0===(6&(Ac=t))&&zi()}}function dl(){Dc=Oc.current,Ti(Oc)}function fl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Nc)for(n=Nc.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:io(),Ti(Ai),Ti(xi),uo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ti(ao);break;case 10:Es(r.type._context);break;case 22:case 23:dl()}n=n.return}if(Pc=e,Nc=e=Ol(e.current,null),Rc=Dc=t,Lc=0,Fc=null,Vc=Uc=Mc=0,jc=Bc=null,null!==ks){for(t=0;t<ks.length;t++)if(null!==(r=(n=ks[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}ks=null}return e}function pl(e,t){for(;;){var n=Nc;try{if(_s(),ho.current=oa,yo){for(var r=mo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}yo=!1}if(po=0,vo=go=mo=null,wo=!1,bo=0,Cc.current=null,null===n||null===n.return){Lc=1,Fc=t,Nc=null;break}e:{var o=e,a=n.return,c=n,l=t;if(t=Rc,c.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l,h=c,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=va(a);if(null!==p){p.flags&=-257,ya(p,a,c,0,t),1&p.mode&&ga(o,u,t),l=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}if(0===(1&t)){ga(o,u,t),gl();break e}l=Error(s(426))}else if(is&&1&c.mode){var v=va(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ya(v,a,c,0,t),ps(ua(l,c));break e}}o=l=ua(l,c),4!==Lc&&(Lc=2),null===Bc?Bc=[o]:Bc.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Fs(o,pa(0,l,t));break e;case 1:c=l;var y=o.type,w=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Wc||!Wc.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t,Fs(o,ma(o,c,t));break e}}o=o.return}while(null!==o)}_l(n)}catch(b){t=b,Nc===n&&null!==n&&(Nc=n=n.return);continue}break}}function ml(){var e=kc.current;return kc.current=oa,null===e?oa:e}function gl(){0!==Lc&&3!==Lc&&2!==Lc||(Lc=4),null===Pc||0===(268435455&Mc)&&0===(268435455&Uc)||cl(Pc,Rc)}function vl(e,t){var n=Ac;Ac|=2;var r=ml();for(Pc===e&&Rc===t||(Kc=null,fl(e,t));;)try{yl();break}catch(i){pl(e,i)}if(_s(),Ac=n,kc.current=r,null!==Nc)throw Error(s(261));return Pc=null,Rc=0,Lc}function yl(){for(;null!==Nc;)bl(Nc)}function wl(){for(;null!==Nc&&!Ye();)bl(Nc)}function bl(e){var t=Sc(e.alternate,e,Dc);e.memoizedProps=e.pendingProps,null===t?_l(e):Nc=t,Cc.current=null}function _l(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qa(n,t,Dc)))return void(Nc=n)}else{if(null!==(n=Ya(n,t)))return n.flags&=32767,void(Nc=n);if(null===e)return Lc=6,void(Nc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Nc=t);Nc=t=e}while(null!==t);0===Lc&&(Lc=5)}function El(e,t,n){var r=wt,i=xc.transition;try{xc.transition=null,wt=1,function(e,t,n,r){do{Il()}while(null!==Yc);if(0!==(6&Ac))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Pc&&(Nc=Pc=null,Rc=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qc||(Qc=!0,Pl(tt,(function(){return Il(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=xc.transition,xc.transition=null;var a=wt;wt=1;var c=Ac;Ac|=4,Cc.current=null,function(e,t){if(ei=Kt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var a=0,c=-1,l=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(c=a+i),d!==o||0!==r&&3!==d.nodeType||(l=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(c=a),f===o&&++h===r&&(l=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===c||-1===l?null:{start:c,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,w=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:gs(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(_){Tl(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}m=nc,nc=!1}(e,n),vc(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,wc(n,e,i),$e(),Ac=c,wt=a,xc.transition=o}else e.current=n;if(Qc&&(Qc=!1,Yc=e,$c=i),o=e.pendingLanes,0===o&&(Wc=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),il(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hc)throw Hc=!1,e=Gc,Gc=null,e;0!==(1&$c)&&0!==e.tag&&Il(),o=e.pendingLanes,0!==(1&o)?e===Xc?Jc++:(Jc=0,Xc=e):Jc=0,zi()}(e,t,n,r)}finally{xc.transition=i,wt=r}return null}function Il(){if(null!==Yc){var e=bt($c),t=xc.transition,n=wt;try{if(xc.transition=null,wt=16>e?16:e,null===Yc)var r=!1;else{if(e=Yc,Yc=null,$c=0,0!==(6&Ac))throw Error(s(331));var i=Ac;for(Ac|=4,Za=e.current;null!==Za;){var o=Za,a=o.child;if(0!==(16&Za.flags)){var c=o.deletions;if(null!==c){for(var l=0;l<c.length;l++){var u=c[l];for(Za=u;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:rc(8,h,o)}var d=h.child;if(null!==d)d.return=h,Za=d;else for(;null!==Za;){var f=(h=Za).sibling,p=h.return;if(oc(h),h===u){Za=null;break}if(null!==f){f.return=p,Za=f;break}Za=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Za=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Za=a;else e:for(;null!==Za;){if(0!==(2048&(o=Za).flags))switch(o.tag){case 0:case 11:case 15:rc(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Za=y;break e}Za=o.return}}var w=e.current;for(Za=w;null!==Za;){var b=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Za=b;else e:for(a=w;null!==Za;){if(0!==(2048&(c=Za).flags))try{switch(c.tag){case 0:case 11:case 15:ic(9,c)}}catch(E){Tl(c,c.return,E)}if(c===a){Za=null;break e}var _=c.sibling;if(null!==_){_.return=c.return,Za=_;break e}Za=c.return}}if(Ac=i,zi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(E){}r=!0}return r}finally{wt=n,xc.transition=t}}return!1}function Sl(e,t,n){e=Os(e,t=pa(0,t=ua(n,t),1),1),t=tl(),null!==e&&(vt(e,1,t),il(e,t))}function Tl(e,t,n){if(3===e.tag)Sl(e,e,n);else for(;null!==t;){if(3===t.tag){Sl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wc||!Wc.has(r))){t=Os(t,e=ma(t,e=ua(n,e),1),1),e=tl(),null!==t&&(vt(t,1,e),il(t,e));break}}t=t.return}}function kl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tl(),e.pingedLanes|=e.suspendedLanes&n,Pc===e&&(Rc&n)===n&&(4===Lc||3===Lc&&(130023424&Rc)===Rc&&500>Je()-zc?fl(e,0):Vc|=n),il(e,t)}function Cl(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tl();null!==(e=As(e,t))&&(vt(e,t,n),il(e,n))}function xl(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cl(e,n)}function Al(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Cl(e,n)}function Pl(e,t){return We(e,t)}function Nl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rl(e,t,n,r){return new Nl(e,t,n,r)}function Dl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ol(e,t){var n=e.alternate;return null===n?((n=Rl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ll(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Dl(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case I:return Fl(n.children,i,o,t);case S:a=8,i|=8;break;case T:return(e=Rl(12,n,t,2|i)).elementType=T,e.lanes=o,e;case A:return(e=Rl(13,n,t,i)).elementType=A,e.lanes=o,e;case P:return(e=Rl(19,n,t,i)).elementType=P,e.lanes=o,e;case D:return Ml(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:a=10;break e;case C:a=9;break e;case x:a=11;break e;case N:a=14;break e;case R:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Rl(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Fl(e,t,n,r){return(e=Rl(7,e,r,t)).lanes=n,e}function Ml(e,t,n,r){return(e=Rl(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Ul(e,t,n){return(e=Rl(6,e,null,t)).lanes=n,e}function Vl(e,t,n){return(t=Rl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bl(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jl(e,t,n,r,i,s,o,a,c){return e=new Bl(e,t,n,a,c),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Rl(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ns(s),e}function zl(e){if(!e)return Ci;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function ql(e,t,n,r,i,s,o,a,c){return(e=jl(n,r,!0,e,0,s,0,a,c)).context=zl(null),n=e.current,(s=Ds(r=tl(),i=nl(n))).callback=void 0!==t&&null!==t?t:null,Os(n,s,i),e.current.lanes=i,vt(e,i,r),il(e,r),e}function Kl(e,t,n,r){var i=t.current,s=tl(),o=nl(i);return n=zl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ds(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Os(i,t,o))&&(rl(e,i,o,s),Ls(e,i,o)),o}function Hl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wl(e,t){Gl(e,t),(e=e.alternate)&&Gl(e,t)}Sc=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Pa(t),fs();break;case 5:so(t);break;case 1:Ri(t.type)&&Fi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ki(vs,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ki(ao,1&ao.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ua(e,t,n):(ki(ao,1&ao.current),null!==(e=Ha(e,t,n))?e.sibling:null);ki(ao,1&ao.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(ao,ao.current),r)break;return null;case 22:case 23:return t.lanes=0,Ta(e,t,n)}return Ha(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,is&&0!==(1048576&t.flags)&&Zi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ka(e,t),e=t.pendingProps;var i=Ni(t,xi.current);Ss(t,n),i=So(null,t,r,e,i,n);var o=To();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Fi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ns(t),i.updater=js,t.stateNode=i,i._reactInternals=t,Hs(t,r,e,n),t=Aa(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),_a(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ka(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===x)return 11;if(e===N)return 14}return 2}(r),e=gs(r,e),i){case 0:t=Ca(null,t,r,e,n);break e;case 1:t=xa(null,t,r,e,n);break e;case 11:t=Ea(null,t,r,e,n);break e;case 14:t=Ia(null,t,r,gs(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 1:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 3:e:{if(Pa(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Rs(e,t),Ms(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Na(e,t,r,n,i=ua(Error(s(423)),t));break e}if(r!==i){t=Na(e,t,r,n,i=ua(Error(s(424)),t));break e}for(rs=li(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=Js(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Ha(e,t,n);break e}_a(e,t,r,n)}t=t.child}return t;case 5:return so(t),null===e&&ls(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),ka(e,t),_a(e,t,a,n),t.child;case 6:return null===e&&ls(t),null;case 13:return Ua(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$s(t,null,r,n):_a(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ea(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,ki(vs,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ai.current){t=Ha(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var c=o.dependencies;if(null!==c){a=o.child;for(var l=c.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=Ds(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Is(o.return,n,t),c.lanes|=n;break}l=l.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Is(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}_a(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ss(t,n),r=r(i=Ts(i)),t.flags|=1,_a(e,t,r,n),t.child;case 14:return i=gs(r=t.type,t.pendingProps),Ia(e,t,r,i=gs(r.type,i),n);case 15:return Sa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gs(r,i),Ka(e,t),t.tag=1,Ri(r)?(e=!0,Fi(t)):e=!1,Ss(t,n),qs(t,r,i),Hs(t,r,i,n),Aa(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return Ta(e,t,n)}throw Error(s(156,t.tag))};var Ql="function"===typeof reportError?reportError:function(e){console.error(e)};function Yl(e){this._internalRoot=e}function $l(e){this._internalRoot=e}function Jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zl(){}function eu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Hl(o);a.call(e)}}Kl(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Hl(o);s.call(e)}}var o=ql(t,r,e,0,null,!1,0,"",Zl);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),hl(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Hl(c);a.call(e)}}var c=jl(e,0,!1,null,0,!1,0,"",Zl);return e._reactRootContainer=c,e[pi]=c.current,zr(8===e.nodeType?e.parentNode:e),hl((function(){Kl(t,c,n,r)})),c}(n,t,e,i,r);return Hl(o)}$l.prototype.render=Yl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Kl(e,t,null,null)},$l.prototype.unmount=Yl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hl((function(){Kl(null,e,null,null)})),t[pi]=null}},$l.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Mt(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),il(t,Je()),0===(6&Ac)&&(qc=Je()+500,zi()))}break;case 13:hl((function(){var t=As(e,1);if(null!==t){var n=tl();rl(t,e,1,n)}})),Wl(e,1)}},Et=function(e){if(13===e.tag){var t=As(e,134217728);if(null!==t)rl(t,e,134217728,tl());Wl(e,134217728)}},It=function(e){if(13===e.tag){var t=nl(e),n=As(e,t);if(null!==n)rl(n,e,t,tl());Wl(e,t)}},St=function(){return wt},Tt=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Ee=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(s(90));W(r),X(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},xe=ul,Ae=hl;var tu={usingClientEntryPoint:!1,Events:[wi,bi,_i,ke,Ce,ul]},nu={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),st=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jl(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jl(e))throw Error(s(299));var n=!1,r="",i=Ql;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=jl(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Yl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return hl(e)},t.hydrate=function(e,t,n){if(!Xl(t))throw Error(s(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jl(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Ql;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=ql(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $l(t)},t.render=function(e,t,n){if(!Xl(t))throw Error(s(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xl(e))throw Error(s(40));return!!e._reactRootContainer&&(hl((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=ul,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xl(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,s={},l=null,u=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!c.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:u,props:s,_owner:a.current}}t.jsx=l,t.jsxs=l},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=w.prototype=new y;b.constructor=w,m(b,v.prototype),b.isPureReactComponent=!0;var _=Array.isArray,E=Object.prototype.hasOwnProperty,I={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,i)&&!S.hasOwnProperty(i)&&(s[i]=t[i]);var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===s[i]&&(s[i]=c[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:I.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function x(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var c=!1;if(null===e)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0}}if(c)return o=o(c=e),e=""===s?"."+x(c,0):s,_(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(k(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||c&&c.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(c=0,s=""===s?".":s+":",_(e))for(var l=0;l<e.length;l++){var u=s+x(a=e[l],l);c+=A(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),l=0;!(a=e.next()).done;)c+=A(a=a.value,t,i,u=s+x(a,l++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function P(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:I};t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=I.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)E.call(t,l)&&!S.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,c=e[a],l=a+1,u=e[l];if(0>s(c,n))l<i&&0>s(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[a]=n,r=a);else{if(!(l<i&&0>s(u,n)))break e;e[r]=u,e[l]=n,r=l}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var l=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(l,t)}t=r(u)}}function _(e){if(g=!1,b(e),!m)if(null!==r(l))m=!0,D(E);else{var t=r(u);null!==t&&O(_,t.startTime-e)}}function E(e,n){m=!1,g&&(g=!1,y(k),k=-1),p=!0;var s=f;try{for(b(n),d=r(l);null!==d&&(!(d.expirationTime>n)||e&&!A());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(l)&&i(l),b(n)}else i(l);d=r(l)}if(null!==d)var c=!0;else{var h=r(u);null!==h&&O(_,h.startTime-n),c=!1}return c}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var I,S=!1,T=null,k=-1,C=5,x=-1;function A(){return!(t.unstable_now()-x<C)}function P(){if(null!==T){var e=t.unstable_now();x=e;var n=!0;try{n=T(!0,e)}finally{n?I():(S=!1,T=null)}}else S=!1}if("function"===typeof w)I=function(){w(P)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,R=N.port2;N.port1.onmessage=P,I=function(){R.postMessage(null)}}else I=function(){v(P,0)};function D(e){T=e,S||(S=!0,I())}function O(e,n){k=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(l)&&e===r(u)&&(g?(y(k),k=-1):g=!0,O(_,s-o))):(e.sortIndex=a,n(l,e),m||p||(m=!0,D(E))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},324:e=>{e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var s=Object.keys(e),o=Object.keys(t);if(s.length!==o.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),c=0;c<s.length;c++){var l=s[c];if(!a(l))return!1;var u=e[l],h=t[l];if(!1===(i=n?n.call(r,u,h,l):void 0)||void 0===i&&u!==h)return!1}return!0}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".be17f830.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="makeblog:";n.l=(r,i,s,o)=>{if(e[r])e[r].push(i);else{var a,c;if(void 0!==s)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var h=l[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+s){a=h;break}}a||(c=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=r),e[r]=[i];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),c&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/lunch-menu/lunch-menu.git/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=s);var o=n.p+n.u(t),a=new Error;n.l(o,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,i[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,s,o=r[0],a=r[1],c=r[2],l=0;if(o.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(c)c(n)}for(t&&t(r);l<o.length;l++)s=o[l],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkmakeblog=self.webpackChunkmakeblog||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),n.nc=void 0,(()=>{"use strict";var e={};n.r(e),n.d(e,{FirebaseError:()=>Yi,SDK_VERSION:()=>xo,_DEFAULT_ENTRY_NAME:()=>ho,_addComponent:()=>vo,_addOrOverwriteComponent:()=>yo,_apps:()=>po,_clearComponents:()=>So,_components:()=>go,_getProvider:()=>bo,_isFirebaseApp:()=>Eo,_isFirebaseServerApp:()=>Io,_registerComponent:()=>wo,_removeServiceInstance:()=>_o,_serverApps:()=>mo,deleteApp:()=>Do,getApp:()=>No,getApps:()=>Ro,initializeApp:()=>Ao,initializeServerApp:()=>Po,onLog:()=>Lo,registerVersion:()=>Oo,setLogLevel:()=>Fo});var t,r=n(43),i=n.t(r,2),s=n(391);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const a="popstate";function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function l(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function u(e,t){return{usr:e.state,key:e.key,idx:t}}function h(e,t,n,r){return void 0===n&&(n=null),o({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?f(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function d(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function f(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function p(e,n,r,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:l=!1}=i,f=s.history,p=t.Pop,m=null,g=v();function v(){return(f.state||{idx:null}).idx}function y(){p=t.Pop;let e=v(),n=null==e?null:e-g;g=e,m&&m({action:p,location:b.location,delta:n})}function w(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:d(e);return n=n.replace(/ $/,"%20"),c(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,f.replaceState(o({},f.state,{idx:g}),""));let b={get action(){return p},get location(){return e(s,f)},listen(e){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(a,y),m=e,()=>{s.removeEventListener(a,y),m=null}},createHref:e=>n(s,e),createURL:w,encodeLocation(e){let t=w(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){p=t.Push;let i=h(b.location,e,n);r&&r(i,e),g=v()+1;let o=u(i,g),a=b.createHref(i);try{f.pushState(o,"",a)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;s.location.assign(a)}l&&m&&m({action:p,location:b.location,delta:1})},replace:function(e,n){p=t.Replace;let i=h(b.location,e,n);r&&r(i,e),g=v();let s=u(i,g),o=b.createHref(i);f.replaceState(s,"",o),l&&m&&m({action:p,location:b.location,delta:0})},go:e=>f.go(e)};return b}var m;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(m||(m={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function g(e,t,n){void 0===n&&(n="/");let r=P(("string"===typeof t?f(t):t).pathname||"/",n);if(null==r)return null;let i=v(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let o=0;null==s&&o<i.length;++o){let e=A(r);s=C(i[o],e)}return s}function v(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(c(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=L([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(c(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),v(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:k(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of y(e.path))i(e,t,r);else i(e,t)})),t}function y(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=y(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const w=/^:[\w-]+$/,b=3,_=2,E=1,I=10,S=-2,T=e=>"*"===e;function k(e,t){let n=e.split("/"),r=n.length;return n.some(T)&&(r+=S),t&&(r+=_),n.filter((e=>!T(e))).reduce(((e,t)=>e+(w.test(t)?b:""===t?E:I)),r)}function C(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let e=n[o],a=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=x({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},c);if(!l)return null;Object.assign(r,l.params);let u=e.route;s.push({params:r,pathname:L([i,l.pathname]),pathnameBase:F(L([i,l.pathnameBase])),route:u}),"/"!==l.pathnameBase&&(i=L([i,l.pathnameBase]))}return s}function x(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);l("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const c=a[n];return e[r]=i&&!c?void 0:(c||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function A(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return l(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function P(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function N(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function R(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function D(e,t){let n=R(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function O(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=f(e):(i=o({},e),c(!i.pathname||!i.pathname.includes("?"),N("?","pathname","search",i)),c(!i.pathname||!i.pathname.includes("#"),N("#","pathname","hash",i)),c(!i.search||!i.search.includes("#"),N("#","search","hash",i)));let s,a=""===e||""===i.pathname,l=a?"/":i.pathname;if(null==l)s=n;else{let e=t.length-1;if(!r&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?f(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:M(r),hash:U(i)}}(i,s),h=l&&"/"!==l&&l.endsWith("/"),d=(a||"."===l)&&n.endsWith("/");return u.pathname.endsWith("/")||!h&&!d||(u.pathname+="/"),u}const L=e=>e.join("/").replace(/\/\/+/g,"/"),F=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),M=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",U=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function V(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const B=["post","put","patch","delete"],j=(new Set(B),["get",...B]);new Set(j),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function z(){return z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},z.apply(this,arguments)}const q=r.createContext(null);const K=r.createContext(null);const H=r.createContext(null);const G=r.createContext(null);const W=r.createContext({outlet:null,matches:[],isDataRoute:!1});const Q=r.createContext(null);function Y(){return null!=r.useContext(G)}function $(){return Y()||c(!1),r.useContext(G).location}function J(e){r.useContext(H).static||r.useLayoutEffect(e)}function X(){let{isDataRoute:e}=r.useContext(W);return e?function(){let{router:e}=ae(se.UseNavigateStable),t=le(oe.UseNavigateStable),n=r.useRef(!1);J((()=>{n.current=!0}));let i=r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,z({fromRouteId:t},i)))}),[e,t]);return i}():function(){Y()||c(!1);let e=r.useContext(q),{basename:t,future:n,navigator:i}=r.useContext(H),{matches:s}=r.useContext(W),{pathname:o}=$(),a=JSON.stringify(D(s,n.v7_relativeSplatPath)),l=r.useRef(!1);return J((()=>{l.current=!0})),r.useCallback((function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof n)return void i.go(n);let s=O(n,JSON.parse(a),o,"path"===r.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:L([t,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)}),[t,i,a,o,e])}()}function Z(e,n,i,s){Y()||c(!1);let{navigator:o}=r.useContext(H),{matches:a}=r.useContext(W),l=a[a.length-1],u=l?l.params:{},h=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,p=$();if(n){var m;let e="string"===typeof n?f(n):n;"/"===h||(null==(m=e.pathname)?void 0:m.startsWith(h))||c(!1),d=e}else d=p;let v=d.pathname||"/",y=v;if("/"!==h){let e=h.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=g(e,{pathname:y});let b=ie(w&&w.map((e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:L([h,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:L([h,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,i,s);return n&&b?r.createElement(G.Provider,{value:{location:z({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:t.Pop}},b):b}function ee(){let e=function(){var e;let t=r.useContext(Q),n=ce(oe.UseRouteError),i=le(oe.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=V(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:s},n):null,null)}const te=r.createElement(ee,null);class ne extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(W.Provider,{value:this.props.routeContext},r.createElement(Q.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function re(e){let{routeContext:t,match:n,children:i}=e,s=r.useContext(q);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(W.Provider,{value:t},i)}function ie(e,t,n,i){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var o;if(null==(o=n)||!o.errors)return null;e=n.matches}let a=e,l=null==(s=n)?void 0:s.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&(null==l?void 0:l[e.route.id])));e>=0||c(!1),a=a.slice(0,Math.min(a.length,e+1))}let u=!1,h=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<a.length;r++){let e=a[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(h=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){u=!0,a=h>=0?a.slice(0,h+1):[a[0]];break}}}return a.reduceRight(((e,i,s)=>{let o,c=!1,d=null,f=null;var p;n&&(o=l&&i.route.id?l[i.route.id]:void 0,d=i.route.errorElement||te,u&&(h<0&&0===s?(p="route-fallback",!1||ue[p]||(ue[p]=!0),c=!0,f=null):h===s&&(c=!0,f=i.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,s+1)),g=()=>{let t;return t=o?d:c?f:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(re,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?r.createElement(ne,{location:n.location,revalidation:n.revalidation,component:d,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var se=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(se||{}),oe=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(oe||{});function ae(e){let t=r.useContext(q);return t||c(!1),t}function ce(e){let t=r.useContext(K);return t||c(!1),t}function le(e){let t=function(e){let t=r.useContext(W);return t||c(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||c(!1),n.route.id}const ue={};i.startTransition;function he(e){c(!1)}function de(e){let{basename:n="/",children:i=null,location:s,navigationType:o=t.Pop,navigator:a,static:l=!1,future:u}=e;Y()&&c(!1);let h=n.replace(/^\/*/,"/"),d=r.useMemo((()=>({basename:h,navigator:a,static:l,future:z({v7_relativeSplatPath:!1},u)})),[h,u,a,l]);"string"===typeof s&&(s=f(s));let{pathname:p="/",search:m="",hash:g="",state:v=null,key:y="default"}=s,w=r.useMemo((()=>{let e=P(p,h);return null==e?null:{location:{pathname:e,search:m,hash:g,state:v,key:y},navigationType:o}}),[h,p,m,g,v,y,o]);return null==w?null:r.createElement(H.Provider,{value:d},r.createElement(G.Provider,{children:i,value:w}))}function fe(e){let{children:t,location:n}=e;return Z(pe(t),n)}new Promise((()=>{}));r.Component;function pe(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,((e,i)=>{if(!r.isValidElement(e))return;let s=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,pe(e.props.children,s));e.type!==he&&c(!1),e.props.index&&e.props.children&&c(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=pe(e.props.children,s)),n.push(o)})),n}var me=n(950),ge=n.t(me,2);new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(CR){}new Map;const ve=i.startTransition;ge.flushSync,i.useId;function ye(e){let{basename:t,children:n,future:i,window:s}=e,o=r.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:s,v5Compat:!0})&&(a={}),p((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return h("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:d(t)}),null,a)));let c=o.current,[l,u]=r.useState({action:c.action,location:c.location}),{v7_startTransition:f}=i||{},m=r.useCallback((e=>{f&&ve?ve((()=>u(e))):u(e)}),[u,f]);return r.useLayoutEffect((()=>c.listen(m)),[c,m]),r.createElement(de,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:c,future:i})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var we,be;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(we||(we={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(be||(be={}));const _e=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:s,getTTFB:o}=t;n(e),r(e),i(e),s(e),o(e)}))};function Ee(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Ie=function(){return Ie=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ie.apply(this,arguments)};Object.create;function Se(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;var Te=n(324),ke=n.n(Te),Ce="-ms-",xe="-moz-",Ae="-webkit-",Pe="comm",Ne="rule",Re="decl",De="@import",Oe="@keyframes",Le="@layer",Fe=Math.abs,Me=String.fromCharCode,Ue=Object.assign;function Ve(e){return e.trim()}function Be(e,t){return(e=t.exec(e))?e[0]:e}function je(e,t,n){return e.replace(t,n)}function ze(e,t,n){return e.indexOf(t,n)}function qe(e,t){return 0|e.charCodeAt(t)}function Ke(e,t,n){return e.slice(t,n)}function He(e){return e.length}function Ge(e){return e.length}function We(e,t){return t.push(e),e}function Qe(e,t){return e.filter((function(e){return!Be(e,t)}))}var Ye=1,$e=1,Je=0,Xe=0,Ze=0,et="";function tt(e,t,n,r,i,s,o,a){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:Ye,column:$e,length:o,return:"",siblings:a}}function nt(e,t){return Ue(tt("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function rt(e){for(;e.root;)e=nt(e.root,{children:[e]});We(e,e.siblings)}function it(){return Ze=Xe>0?qe(et,--Xe):0,$e--,10===Ze&&($e=1,Ye--),Ze}function st(){return Ze=Xe<Je?qe(et,Xe++):0,$e++,10===Ze&&($e=1,Ye++),Ze}function ot(){return qe(et,Xe)}function at(){return Xe}function ct(e,t){return Ke(et,e,t)}function lt(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function ut(e){return Ye=$e=1,Je=He(et=e),Xe=0,[]}function ht(e){return et="",e}function dt(e){return Ve(ct(Xe-1,mt(91===e?e+2:40===e?e+1:e)))}function ft(e){for(;(Ze=ot())&&Ze<33;)st();return lt(e)>2||lt(Ze)>3?"":" "}function pt(e,t){for(;--t&&st()&&!(Ze<48||Ze>102||Ze>57&&Ze<65||Ze>70&&Ze<97););return ct(e,at()+(t<6&&32==ot()&&32==st()))}function mt(e){for(;st();)switch(Ze){case e:return Xe;case 34:case 39:34!==e&&39!==e&&mt(Ze);break;case 40:41===e&&mt(e);break;case 92:st()}return Xe}function gt(e,t){for(;st()&&e+Ze!==57&&(e+Ze!==84||47!==ot()););return"/*"+ct(t,Xe-1)+"*"+Me(47===e?e:st())}function vt(e){for(;!lt(ot());)st();return ct(e,Xe)}function yt(e,t){for(var n="",r=0;r<e.length;r++)n+=t(e[r],r,e,t)||"";return n}function wt(e,t,n,r){switch(e.type){case Le:if(e.children.length)break;case De:case Re:return e.return=e.return||e.value;case Pe:return"";case Oe:return e.return=e.value+"{"+yt(e.children,r)+"}";case Ne:if(!He(e.value=e.props.join(",")))return""}return He(n=yt(e.children,r))?e.return=e.value+"{"+n+"}":""}function bt(e,t,n){switch(function(e,t){return 45^qe(e,0)?(((t<<2^qe(e,0))<<2^qe(e,1))<<2^qe(e,2))<<2^qe(e,3):0}(e,t)){case 5103:return Ae+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ae+e+e;case 4789:return xe+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Ae+e+xe+e+Ce+e+e;case 5936:switch(qe(e,t+11)){case 114:return Ae+e+Ce+je(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Ae+e+Ce+je(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Ae+e+Ce+je(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return Ae+e+Ce+e+e;case 6165:return Ae+e+Ce+"flex-"+e+e;case 5187:return Ae+e+je(e,/(\w+).+(:[^]+)/,Ae+"box-$1$2"+Ce+"flex-$1$2")+e;case 5443:return Ae+e+Ce+"flex-item-"+je(e,/flex-|-self/g,"")+(Be(e,/flex-|baseline/)?"":Ce+"grid-row-"+je(e,/flex-|-self/g,""))+e;case 4675:return Ae+e+Ce+"flex-line-pack"+je(e,/align-content|flex-|-self/g,"")+e;case 5548:return Ae+e+Ce+je(e,"shrink","negative")+e;case 5292:return Ae+e+Ce+je(e,"basis","preferred-size")+e;case 6060:return Ae+"box-"+je(e,"-grow","")+Ae+e+Ce+je(e,"grow","positive")+e;case 4554:return Ae+je(e,/([^-])(transform)/g,"$1"+Ae+"$2")+e;case 6187:return je(je(je(e,/(zoom-|grab)/,Ae+"$1"),/(image-set)/,Ae+"$1"),e,"")+e;case 5495:case 3959:return je(e,/(image-set\([^]*)/,Ae+"$1$`$1");case 4968:return je(je(e,/(.+:)(flex-)?(.*)/,Ae+"box-pack:$3"+Ce+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ae+e+e;case 4200:if(!Be(e,/flex-|baseline/))return Ce+"grid-column-align"+Ke(e,t)+e;break;case 2592:case 3360:return Ce+je(e,"template-","")+e;case 4384:case 3616:return n&&n.some((function(e,n){return t=n,Be(e.props,/grid-\w+-end/)}))?~ze(e+(n=n[t].value),"span",0)?e:Ce+je(e,"-start","")+e+Ce+"grid-row-span:"+(~ze(n,"span",0)?Be(n,/\d+/):+Be(n,/\d+/)-+Be(e,/\d+/))+";":Ce+je(e,"-start","")+e;case 4896:case 4128:return n&&n.some((function(e){return Be(e.props,/grid-\w+-start/)}))?e:Ce+je(je(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return je(e,/(.+)-inline(.+)/,Ae+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(He(e)-1-t>6)switch(qe(e,t+1)){case 109:if(45!==qe(e,t+4))break;case 102:return je(e,/(.+:)(.+)-([^]+)/,"$1"+Ae+"$2-$3$1"+xe+(108==qe(e,t+3)?"$3":"$2-$3"))+e;case 115:return~ze(e,"stretch",0)?bt(je(e,"stretch","fill-available"),t,n)+e:e}break;case 5152:case 5920:return je(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,(function(t,n,r,i,s,o,a){return Ce+n+":"+r+a+(i?Ce+n+"-span:"+(s?o:+o-+r)+a:"")+e}));case 4949:if(121===qe(e,t+6))return je(e,":",":"+Ae)+e;break;case 6444:switch(qe(e,45===qe(e,14)?18:11)){case 120:return je(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Ae+(45===qe(e,14)?"inline-":"")+"box$3$1"+Ae+"$2$3$1"+Ce+"$2box$3")+e;case 100:return je(e,":",":"+Ce)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return je(e,"scroll-","scroll-snap-")+e}return e}function _t(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case Re:return void(e.return=bt(e.value,e.length,n));case Oe:return yt([nt(e,{value:je(e.value,"@","@"+Ae)})],r);case Ne:if(e.length)return function(e,t){return e.map(t).join("")}(n=e.props,(function(t){switch(Be(t,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":rt(nt(e,{props:[je(t,/:(read-\w+)/,":"+xe+"$1")]})),rt(nt(e,{props:[t]})),Ue(e,{props:Qe(n,r)});break;case"::placeholder":rt(nt(e,{props:[je(t,/:(plac\w+)/,":"+Ae+"input-$1")]})),rt(nt(e,{props:[je(t,/:(plac\w+)/,":"+xe+"$1")]})),rt(nt(e,{props:[je(t,/:(plac\w+)/,Ce+"input-$1")]})),rt(nt(e,{props:[t]})),Ue(e,{props:Qe(n,r)})}return""}))}}function Et(e){return ht(It("",null,null,null,[""],e=ut(e),0,[0],e))}function It(e,t,n,r,i,s,o,a,c){for(var l=0,u=0,h=o,d=0,f=0,p=0,m=1,g=1,v=1,y=0,w="",b=i,_=s,E=r,I=w;g;)switch(p=y,y=st()){case 40:if(108!=p&&58==qe(I,h-1)){-1!=ze(I+=je(dt(y),"&","&\f"),"&\f",Fe(l?a[l-1]:0))&&(v=-1);break}case 34:case 39:case 91:I+=dt(y);break;case 9:case 10:case 13:case 32:I+=ft(p);break;case 92:I+=pt(at()-1,7);continue;case 47:switch(ot()){case 42:case 47:We(Tt(gt(st(),at()),t,n,c),c);break;default:I+="/"}break;case 123*m:a[l++]=He(I)*v;case 125*m:case 59:case 0:switch(y){case 0:case 125:g=0;case 59+u:-1==v&&(I=je(I,/\f/g,"")),f>0&&He(I)-h&&We(f>32?kt(I+";",r,n,h-1,c):kt(je(I," ","")+";",r,n,h-2,c),c);break;case 59:I+=";";default:if(We(E=St(I,t,n,l,u,i,a,w,b=[],_=[],h,s),s),123===y)if(0===u)It(I,t,E,E,b,s,h,a,_);else switch(99===d&&110===qe(I,3)?100:d){case 100:case 108:case 109:case 115:It(e,E,E,r&&We(St(e,E,E,0,0,i,a,w,i,b=[],h,_),_),i,_,h,a,r?b:_);break;default:It(I,E,E,E,[""],_,0,a,_)}}l=u=f=0,m=v=1,w=I="",h=o;break;case 58:h=1+He(I),f=p;default:if(m<1)if(123==y)--m;else if(125==y&&0==m++&&125==it())continue;switch(I+=Me(y),y*m){case 38:v=u>0?1:(I+="\f",-1);break;case 44:a[l++]=(He(I)-1)*v,v=1;break;case 64:45===ot()&&(I+=dt(st())),d=ot(),u=h=He(w=I+=vt(at())),y++;break;case 45:45===p&&2==He(I)&&(m=0)}}return s}function St(e,t,n,r,i,s,o,a,c,l,u,h){for(var d=i-1,f=0===i?s:[""],p=Ge(f),m=0,g=0,v=0;m<r;++m)for(var y=0,w=Ke(e,d+1,d=Fe(g=o[m])),b=e;y<p;++y)(b=Ve(g>0?f[y]+" "+w:je(w,/&\f/g,f[y])))&&(c[v++]=b);return tt(e,t,n,0===i?Ne:a,c,l,u,h)}function Tt(e,t,n,r){return tt(e,t,n,Pe,Me(Ze),Ke(e,2,-2),0,r)}function kt(e,t,n,r,i){return tt(e,t,n,Re,Ke(e,0,r),Ke(e,r+1,-1),r,i)}const Ct={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var xt="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/lunch-menu/lunch-menu.git",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_KEY:"AIzaSyDmUq8ddVDUUr9OH1hbeHPrwi97xAZ0hcs",REACT_APP_FB_AUTH_DOMAIN:"miniblog-43686.firebaseapp.com",REACT_APP_FB_PROJECT_ID:"miniblog-43686",REACT_APP_FB_STORAGE_BUCKET:"miniblog-43686.appspot.com",REACT_APP_FB_MESSAGING_SENDER_ID:"125888470069",REACT_APP_FB_API_ID:"1:125888470069:web:3addba989eafadf899657c"}&&({NODE_ENV:"production",PUBLIC_URL:"/lunch-menu/lunch-menu.git",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_KEY:"AIzaSyDmUq8ddVDUUr9OH1hbeHPrwi97xAZ0hcs",REACT_APP_FB_AUTH_DOMAIN:"miniblog-43686.firebaseapp.com",REACT_APP_FB_PROJECT_ID:"miniblog-43686",REACT_APP_FB_STORAGE_BUCKET:"miniblog-43686.appspot.com",REACT_APP_FB_MESSAGING_SENDER_ID:"125888470069",REACT_APP_FB_API_ID:"1:125888470069:web:3addba989eafadf899657c"}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"/lunch-menu/lunch-menu.git",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_KEY:"AIzaSyDmUq8ddVDUUr9OH1hbeHPrwi97xAZ0hcs",REACT_APP_FB_AUTH_DOMAIN:"miniblog-43686.firebaseapp.com",REACT_APP_FB_PROJECT_ID:"miniblog-43686",REACT_APP_FB_STORAGE_BUCKET:"miniblog-43686.appspot.com",REACT_APP_FB_MESSAGING_SENDER_ID:"125888470069",REACT_APP_FB_API_ID:"1:125888470069:web:3addba989eafadf899657c"}.SC_ATTR)||"data-styled",At="active",Pt="data-styled-version",Nt="6.1.8",Rt="/*!sc*/\n",Dt="undefined"!=typeof window&&"HTMLElement"in window,Ot=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/lunch-menu/lunch-menu.git",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_KEY:"AIzaSyDmUq8ddVDUUr9OH1hbeHPrwi97xAZ0hcs",REACT_APP_FB_AUTH_DOMAIN:"miniblog-43686.firebaseapp.com",REACT_APP_FB_PROJECT_ID:"miniblog-43686",REACT_APP_FB_STORAGE_BUCKET:"miniblog-43686.appspot.com",REACT_APP_FB_MESSAGING_SENDER_ID:"125888470069",REACT_APP_FB_API_ID:"1:125888470069:web:3addba989eafadf899657c"}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/lunch-menu/lunch-menu.git",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_KEY:"AIzaSyDmUq8ddVDUUr9OH1hbeHPrwi97xAZ0hcs",REACT_APP_FB_AUTH_DOMAIN:"miniblog-43686.firebaseapp.com",REACT_APP_FB_PROJECT_ID:"miniblog-43686",REACT_APP_FB_STORAGE_BUCKET:"miniblog-43686.appspot.com",REACT_APP_FB_MESSAGING_SENDER_ID:"125888470069",REACT_APP_FB_API_ID:"1:125888470069:web:3addba989eafadf899657c"}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/lunch-menu/lunch-menu.git",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_KEY:"AIzaSyDmUq8ddVDUUr9OH1hbeHPrwi97xAZ0hcs",REACT_APP_FB_AUTH_DOMAIN:"miniblog-43686.firebaseapp.com",REACT_APP_FB_PROJECT_ID:"miniblog-43686",REACT_APP_FB_STORAGE_BUCKET:"miniblog-43686.appspot.com",REACT_APP_FB_MESSAGING_SENDER_ID:"125888470069",REACT_APP_FB_API_ID:"1:125888470069:web:3addba989eafadf899657c"}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"/lunch-menu/lunch-menu.git",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_KEY:"AIzaSyDmUq8ddVDUUr9OH1hbeHPrwi97xAZ0hcs",REACT_APP_FB_AUTH_DOMAIN:"miniblog-43686.firebaseapp.com",REACT_APP_FB_PROJECT_ID:"miniblog-43686",REACT_APP_FB_STORAGE_BUCKET:"miniblog-43686.appspot.com",REACT_APP_FB_MESSAGING_SENDER_ID:"125888470069",REACT_APP_FB_API_ID:"1:125888470069:web:3addba989eafadf899657c"}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/lunch-menu/lunch-menu.git",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_KEY:"AIzaSyDmUq8ddVDUUr9OH1hbeHPrwi97xAZ0hcs",REACT_APP_FB_AUTH_DOMAIN:"miniblog-43686.firebaseapp.com",REACT_APP_FB_PROJECT_ID:"miniblog-43686",REACT_APP_FB_STORAGE_BUCKET:"miniblog-43686.appspot.com",REACT_APP_FB_MESSAGING_SENDER_ID:"125888470069",REACT_APP_FB_API_ID:"1:125888470069:web:3addba989eafadf899657c"}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/lunch-menu/lunch-menu.git",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_KEY:"AIzaSyDmUq8ddVDUUr9OH1hbeHPrwi97xAZ0hcs",REACT_APP_FB_AUTH_DOMAIN:"miniblog-43686.firebaseapp.com",REACT_APP_FB_PROJECT_ID:"miniblog-43686",REACT_APP_FB_STORAGE_BUCKET:"miniblog-43686.appspot.com",REACT_APP_FB_MESSAGING_SENDER_ID:"125888470069",REACT_APP_FB_API_ID:"1:125888470069:web:3addba989eafadf899657c"}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/lunch-menu/lunch-menu.git",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_KEY:"AIzaSyDmUq8ddVDUUr9OH1hbeHPrwi97xAZ0hcs",REACT_APP_FB_AUTH_DOMAIN:"miniblog-43686.firebaseapp.com",REACT_APP_FB_PROJECT_ID:"miniblog-43686",REACT_APP_FB_STORAGE_BUCKET:"miniblog-43686.appspot.com",REACT_APP_FB_MESSAGING_SENDER_ID:"125888470069",REACT_APP_FB_API_ID:"1:125888470069:web:3addba989eafadf899657c"}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/lunch-menu/lunch-menu.git",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_KEY:"AIzaSyDmUq8ddVDUUr9OH1hbeHPrwi97xAZ0hcs",REACT_APP_FB_AUTH_DOMAIN:"miniblog-43686.firebaseapp.com",REACT_APP_FB_PROJECT_ID:"miniblog-43686",REACT_APP_FB_STORAGE_BUCKET:"miniblog-43686.appspot.com",REACT_APP_FB_MESSAGING_SENDER_ID:"125888470069",REACT_APP_FB_API_ID:"1:125888470069:web:3addba989eafadf899657c"}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"/lunch-menu/lunch-menu.git",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_KEY:"AIzaSyDmUq8ddVDUUr9OH1hbeHPrwi97xAZ0hcs",REACT_APP_FB_AUTH_DOMAIN:"miniblog-43686.firebaseapp.com",REACT_APP_FB_PROJECT_ID:"miniblog-43686",REACT_APP_FB_STORAGE_BUCKET:"miniblog-43686.appspot.com",REACT_APP_FB_MESSAGING_SENDER_ID:"125888470069",REACT_APP_FB_API_ID:"1:125888470069:web:3addba989eafadf899657c"}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/lunch-menu/lunch-menu.git",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_KEY:"AIzaSyDmUq8ddVDUUr9OH1hbeHPrwi97xAZ0hcs",REACT_APP_FB_AUTH_DOMAIN:"miniblog-43686.firebaseapp.com",REACT_APP_FB_PROJECT_ID:"miniblog-43686",REACT_APP_FB_STORAGE_BUCKET:"miniblog-43686.appspot.com",REACT_APP_FB_MESSAGING_SENDER_ID:"125888470069",REACT_APP_FB_API_ID:"1:125888470069:web:3addba989eafadf899657c"}.SC_DISABLE_SPEEDY)),Lt=(new Set,Object.freeze([])),Ft=Object.freeze({});function Mt(e,t,n){return void 0===n&&(n=Ft),e.theme!==n.theme&&e.theme||t||n.theme}var Ut=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Vt=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Bt=/(^-|-$)/g;function jt(e){return e.replace(Vt,"-").replace(Bt,"")}var zt=/(a)(d)/gi,qt=52,Kt=function(e){return String.fromCharCode(e+(e>25?39:97))};function Ht(e){var t,n="";for(t=Math.abs(e);t>qt;t=t/qt|0)n=Kt(t%qt)+n;return(Kt(t%qt)+n).replace(zt,"$1-$2")}var Gt,Wt=5381,Qt=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},Yt=function(e){return Qt(Wt,e)};function $t(e){return Ht(Yt(e)>>>0)}function Jt(e){return e.displayName||e.name||"Component"}function Xt(e){return"string"==typeof e&&!0}var Zt="function"==typeof Symbol&&Symbol.for,en=Zt?Symbol.for("react.memo"):60115,tn=Zt?Symbol.for("react.forward_ref"):60112,nn={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},rn={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},sn={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},on=((Gt={})[tn]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Gt[en]=sn,Gt);function an(e){return("type"in(t=e)&&t.type.$$typeof)===en?sn:"$$typeof"in e?on[e.$$typeof]:nn;var t}var cn=Object.defineProperty,ln=Object.getOwnPropertyNames,un=Object.getOwnPropertySymbols,hn=Object.getOwnPropertyDescriptor,dn=Object.getPrototypeOf,fn=Object.prototype;function pn(e,t,n){if("string"!=typeof t){if(fn){var r=dn(t);r&&r!==fn&&pn(e,r,n)}var i=ln(t);un&&(i=i.concat(un(t)));for(var s=an(e),o=an(t),a=0;a<i.length;++a){var c=i[a];if(!(c in rn||n&&n[c]||o&&c in o||s&&c in s)){var l=hn(t,c);try{cn(e,c,l)}catch(e){}}}}return e}function mn(e){return"function"==typeof e}function gn(e){return"object"==typeof e&&"styledComponentId"in e}function vn(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function yn(e,t){if(0===e.length)return"";for(var n=e[0],r=1;r<e.length;r++)n+=t?t+e[r]:e[r];return n}function wn(e){return null!==e&&"object"==typeof e&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function bn(e,t,n){if(void 0===n&&(n=!1),!n&&!wn(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)e[r]=bn(e[r],t[r]);else if(wn(t))for(var r in t)e[r]=bn(e[r],t[r]);return e}function _n(e,t){Object.defineProperty(e,"toString",{value:t})}function En(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var In=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return e.prototype.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},e.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)if((i<<=1)<0)throw En(16,"".concat(e));this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var s=r;s<i;s++)this.groupSizes[s]=0}for(var o=this.indexOfGroup(e+1),a=(s=0,t.length);s<a;s++)this.tag.insertRule(o,t[s])&&(this.groupSizes[e]++,o++)},e.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},e.prototype.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,s=r;s<i;s++)t+="".concat(this.tag.getRule(s)).concat(Rt);return t},e}(),Sn=new Map,Tn=new Map,kn=1,Cn=function(e){if(Sn.has(e))return Sn.get(e);for(;Tn.has(kn);)kn++;var t=kn++;return Sn.set(e,t),Tn.set(t,e),t},xn=function(e,t){kn=t+1,Sn.set(e,t),Tn.set(t,e)},An="style[".concat(xt,"][").concat(Pt,'="').concat(Nt,'"]'),Pn=new RegExp("^".concat(xt,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),Nn=function(e,t,n){for(var r,i=n.split(","),s=0,o=i.length;s<o;s++)(r=i[s])&&e.registerName(t,r)},Rn=function(e,t){for(var n,r=(null!==(n=t.textContent)&&void 0!==n?n:"").split(Rt),i=[],s=0,o=r.length;s<o;s++){var a=r[s].trim();if(a){var c=a.match(Pn);if(c){var l=0|parseInt(c[1],10),u=c[2];0!==l&&(xn(u,l),Nn(e,u,c[3]),e.getTag().insertRules(l,i)),i.length=0}else i.push(a)}}};function Dn(){return n.nc}var On=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){var t=Array.from(e.querySelectorAll("style[".concat(xt,"]")));return t[t.length-1]}(n),s=void 0!==i?i.nextSibling:null;r.setAttribute(xt,At),r.setAttribute(Pt,Nt);var o=Dn();return o&&r.setAttribute("nonce",o),n.insertBefore(r,s),r},Ln=function(){function e(e){this.element=On(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}throw En(17)}(this.element),this.length=0}return e.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},e.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},e.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},e}(),Fn=function(){function e(e){this.element=On(e),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t);return this.element.insertBefore(n,this.nodes[e]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},e.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),Mn=function(){function e(e){this.rules=[],this.length=0}return e.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},e.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},e.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),Un=Dt,Vn={isServer:!Dt,useCSSOMInjection:!Ot},Bn=function(){function e(e,t,n){void 0===e&&(e=Ft),void 0===t&&(t={});var r=this;this.options=Ie(Ie({},Vn),e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&Dt&&Un&&(Un=!1,function(e){for(var t=document.querySelectorAll(An),n=0,r=t.length;n<r;n++){var i=t[n];i&&i.getAttribute(xt)!==At&&(Rn(e,i),i.parentNode&&i.parentNode.removeChild(i))}}(this)),_n(this,(function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=function(n){var i=function(e){return Tn.get(e)}(n);if(void 0===i)return"continue";var s=e.names.get(i),o=t.getGroup(n);if(void 0===s||0===o.length)return"continue";var a="".concat(xt,".g").concat(n,'[id="').concat(i,'"]'),c="";void 0!==s&&s.forEach((function(e){e.length>0&&(c+="".concat(e,","))})),r+="".concat(o).concat(a,'{content:"').concat(c,'"}').concat(Rt)},s=0;s<n;s++)i(s);return r}(r)}))}return e.registerId=function(e){return Cn(e)},e.prototype.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(Ie(Ie({},this.options),t),this.gs,n&&this.names||void 0)},e.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(e=function(e){var t=e.useCSSOMInjection,n=e.target;return e.isServer?new Mn(n):t?new Ln(n):new Fn(n)}(this.options),new In(e)));var e},e.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},e.prototype.registerName=function(e,t){if(Cn(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},e.prototype.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(Cn(e),n)},e.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},e.prototype.clearRules=function(e){this.getTag().clearGroup(Cn(e)),this.clearNames(e)},e.prototype.clearTag=function(){this.tag=void 0},e}(),jn=/&/g,zn=/^\s*\/\/.*$/gm;function qn(e,t){return e.map((function(e){return"rule"===e.type&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map((function(e){return"".concat(t," ").concat(e)}))),Array.isArray(e.children)&&"@keyframes"!==e.type&&(e.children=qn(e.children,t)),e}))}function Kn(e){var t,n,r,i=void 0===e?Ft:e,s=i.options,o=void 0===s?Ft:s,a=i.plugins,c=void 0===a?Lt:a,l=function(e,r,i){return i.startsWith(n)&&i.endsWith(n)&&i.replaceAll(n,"").length>0?".".concat(t):e},u=c.slice();u.push((function(e){e.type===Ne&&e.value.includes("&")&&(e.props[0]=e.props[0].replace(jn,n).replace(r,l))})),o.prefix&&u.push(_t),u.push(wt);var h=function(e,i,s,a){void 0===i&&(i=""),void 0===s&&(s=""),void 0===a&&(a="&"),t=a,n=i,r=new RegExp("\\".concat(n,"\\b"),"g");var c=e.replace(zn,""),l=Et(s||i?"".concat(s," ").concat(i," { ").concat(c," }"):c);o.namespace&&(l=qn(l,o.namespace));var h,d=[];return yt(l,function(e){var t=Ge(e);return function(n,r,i,s){for(var o="",a=0;a<t;a++)o+=e[a](n,r,i,s)||"";return o}}(u.concat((h=function(e){return d.push(e)},function(e){e.root||(e=e.return)&&h(e)})))),d};return h.hash=c.length?c.reduce((function(e,t){return t.name||En(15),Qt(e,t.name)}),Wt).toString():"",h}var Hn=new Bn,Gn=Kn(),Wn=r.createContext({shouldForwardProp:void 0,styleSheet:Hn,stylis:Gn}),Qn=(Wn.Consumer,r.createContext(void 0));function Yn(){return(0,r.useContext)(Wn)}function $n(e){var t=(0,r.useState)(e.stylisPlugins),n=t[0],i=t[1],s=Yn().styleSheet,o=(0,r.useMemo)((function(){var t=s;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target,s]),a=(0,r.useMemo)((function(){return Kn({options:{namespace:e.namespace,prefix:e.enableVendorPrefixes},plugins:n})}),[e.enableVendorPrefixes,e.namespace,n]);(0,r.useEffect)((function(){ke()(n,e.stylisPlugins)||i(e.stylisPlugins)}),[e.stylisPlugins]);var c=(0,r.useMemo)((function(){return{shouldForwardProp:e.shouldForwardProp,styleSheet:o,stylis:a}}),[e.shouldForwardProp,o,a]);return r.createElement(Wn.Provider,{value:c},r.createElement(Qn.Provider,{value:a},e.children))}var Jn=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=Gn);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,_n(this,(function(){throw En(12,String(n.name))}))}return e.prototype.getName=function(e){return void 0===e&&(e=Gn),this.name+e.hash},e}(),Xn=function(e){return e>="A"&&e<="Z"};function Zn(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(1===n&&"-"===r&&"-"===e[0])return e;Xn(r)?t+="-"+r.toLowerCase():t+=r}return t.startsWith("ms-")?"-"+t:t}var er=function(e){return null==e||!1===e||""===e},tr=function(e){var t,n,r=[];for(var i in e){var s=e[i];e.hasOwnProperty(i)&&!er(s)&&(Array.isArray(s)&&s.isCss||mn(s)?r.push("".concat(Zn(i),":"),s,";"):wn(s)?r.push.apply(r,Se(Se(["".concat(i," {")],tr(s),!1),["}"],!1)):r.push("".concat(Zn(i),": ").concat((t=i,null==(n=s)||"boolean"==typeof n||""===n?"":"number"!=typeof n||0===n||t in Ct||t.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function nr(e,t,n,r){return er(e)?[]:gn(e)?[".".concat(e.styledComponentId)]:mn(e)?!mn(i=e)||i.prototype&&i.prototype.isReactComponent||!t?[e]:nr(e(t),t,n,r):e instanceof Jn?n?(e.inject(n,r),[e.getName(r)]):[e]:wn(e)?tr(e):Array.isArray(e)?Array.prototype.concat.apply(Lt,e.map((function(e){return nr(e,t,n,r)}))):[e.toString()];var i}function rr(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(mn(n)&&!gn(n))return!1}return!0}var ir=Yt(Nt),sr=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&rr(e),this.componentId=t,this.baseHash=Qt(ir,t),this.baseStyle=n,Bn.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))r=vn(r,this.staticRulesId);else{var i=yn(nr(this.rules,e,t,n)),s=Ht(Qt(this.baseHash,i)>>>0);if(!t.hasNameForId(this.componentId,s)){var o=n(i,".".concat(s),void 0,this.componentId);t.insertRules(this.componentId,s,o)}r=vn(r,s),this.staticRulesId=s}else{for(var a=Qt(this.baseHash,n.hash),c="",l=0;l<this.rules.length;l++){var u=this.rules[l];if("string"==typeof u)c+=u;else if(u){var h=yn(nr(u,e,t,n));a=Qt(a,h+l),c+=h}}if(c){var d=Ht(a>>>0);t.hasNameForId(this.componentId,d)||t.insertRules(this.componentId,d,n(c,".".concat(d),void 0,this.componentId)),r=vn(r,d)}}return r},e}(),or=r.createContext(void 0);or.Consumer;var ar={};new Set;function cr(e,t,n){var i=gn(e),s=e,o=!Xt(e),a=t.attrs,c=void 0===a?Lt:a,l=t.componentId,u=void 0===l?function(e,t){var n="string"!=typeof e?"sc":jt(e);ar[n]=(ar[n]||0)+1;var r="".concat(n,"-").concat($t(Nt+n+ar[n]));return t?"".concat(t,"-").concat(r):r}(t.displayName,t.parentComponentId):l,h=t.displayName,d=void 0===h?function(e){return Xt(e)?"styled.".concat(e):"Styled(".concat(Jt(e),")")}(e):h,f=t.displayName&&t.componentId?"".concat(jt(t.displayName),"-").concat(t.componentId):t.componentId||u,p=i&&s.attrs?s.attrs.concat(c).filter(Boolean):c,m=t.shouldForwardProp;if(i&&s.shouldForwardProp){var g=s.shouldForwardProp;if(t.shouldForwardProp){var v=t.shouldForwardProp;m=function(e,t){return g(e,t)&&v(e,t)}}else m=g}var y=new sr(n,f,i?s.componentStyle:void 0);function w(e,t){return function(e,t,n){var i=e.attrs,s=e.componentStyle,o=e.defaultProps,a=e.foldedComponentIds,c=e.styledComponentId,l=e.target,u=r.useContext(or),h=Yn(),d=e.shouldForwardProp||h.shouldForwardProp,f=Mt(t,u,o)||Ft,p=function(e,t,n){for(var r,i=Ie(Ie({},t),{className:void 0,theme:n}),s=0;s<e.length;s+=1){var o=mn(r=e[s])?r(i):r;for(var a in o)i[a]="className"===a?vn(i[a],o[a]):"style"===a?Ie(Ie({},i[a]),o[a]):o[a]}return t.className&&(i.className=vn(i.className,t.className)),i}(i,t,f),m=p.as||l,g={};for(var v in p)void 0===p[v]||"$"===v[0]||"as"===v||"theme"===v&&p.theme===f||("forwardedAs"===v?g.as=p.forwardedAs:d&&!d(v,m)||(g[v]=p[v]));var y=function(e,t){var n=Yn();return e.generateAndInjectStyles(t,n.styleSheet,n.stylis)}(s,p),w=vn(a,c);return y&&(w+=" "+y),p.className&&(w+=" "+p.className),g[Xt(m)&&!Ut.has(m)?"class":"className"]=w,g.ref=n,(0,r.createElement)(m,g)}(b,e,t)}w.displayName=d;var b=r.forwardRef(w);return b.attrs=p,b.componentStyle=y,b.displayName=d,b.shouldForwardProp=m,b.foldedComponentIds=i?vn(s.foldedComponentIds,s.styledComponentId):"",b.styledComponentId=f,b.target=i?s.target:e,Object.defineProperty(b,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=i?function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++)bn(e,i[r],!0);return e}({},s.defaultProps,e):e}}),_n(b,(function(){return".".concat(b.styledComponentId)})),o&&pn(b,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),b}function lr(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n}var ur=function(e){return Object.assign(e,{isCss:!0})};function hr(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(mn(e)||wn(e))return ur(nr(lr(Lt,Se([e],t,!0))));var r=e;return 0===t.length&&1===r.length&&"string"==typeof r[0]?nr(r):ur(nr(lr(r,t)))}function dr(e,t,n){if(void 0===n&&(n=Ft),!t)throw En(1,t);var r=function(r){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];return e(t,n,hr.apply(void 0,Se([r],i,!1)))};return r.attrs=function(r){return dr(e,t,Ie(Ie({},n),{attrs:Array.prototype.concat(n.attrs,r).filter(Boolean)}))},r.withConfig=function(r){return dr(e,t,Ie(Ie({},n),r))},r}var fr=function(e){return dr(cr,e)},pr=fr;Ut.forEach((function(e){pr[e]=fr(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=rr(e),Bn.registerId(this.componentId+1)}e.prototype.createStyles=function(e,t,n,r){var i=r(yn(nr(this.rules,t,n,r)),""),s=this.componentId+e;n.insertRules(s,s,i)},e.prototype.removeStyles=function(e,t){t.clearRules(this.componentId+e)},e.prototype.renderStyles=function(e,t,n,r){e>2&&Bn.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)}}();(function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString(),n=Dn(),r=yn([n&&'nonce="'.concat(n,'"'),"".concat(xt,'="true"'),"".concat(Pt,'="').concat(Nt,'"')].filter(Boolean)," ");return"<style ".concat(r,">").concat(t,"</style>")},this.getStyleTags=function(){if(e.sealed)throw En(2);return e._emitSheetCSS()},this.getStyleElement=function(){var t;if(e.sealed)throw En(2);var n=((t={})[xt]="",t[Pt]=Nt,t.dangerouslySetInnerHTML={__html:e.instance.toString()},t),i=Dn();return i&&(n.nonce=i),[r.createElement("style",Ie({},n,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new Bn({isServer:!0}),this.sealed=!1}e.prototype.collectStyles=function(e){if(this.sealed)throw En(2);return r.createElement($n,{sheet:this.instance},e)},e.prototype.interleaveWithNodeStream=function(e){throw En(3)}})(),"__sc-".concat(xt,"__");var mr,gr=n(579);const vr=pr.button(mr||(mr=Ee(["\n    font-size: 18px;\n    cursor: pointer;\n    color: #ffffff;\n    border: 0;\n    font-weight: 800;\n    background-color: transparent;\n"])));const yr=function(e){let{title:t,onClick:n,className:r}=e;return(0,gr.jsx)(vr,{className:r,onClick:n,children:t||"Button"})};var wr,br,_r,Er,Ir,Sr,Tr,kr,Cr,xr,Ar,Pr,Nr,Rr,Dr;const Or=pr.div(wr||(wr=Ee(["\n    box-sizing: content-box;\n    width: calc(100% - 40px);\n    padding: 34px 46px;\n    display: flex;\n    flex-direction: row;\n    align-items: flex-start;\n    justify-content: center;\n    border-radius: 8px;\n    cursor: pointer;\n    color: white;\n    background: #101010;\n    border: 1px solid #999999;\n    margin-bottom: 12px;\n    &:hover {\n        background: #1D1D1D;\n    }\n"]))),Lr=pr.div(br||(br=Ee(["\n    height: 140px;\n    width: 60px;\n    margin-right: 60px;\n"]))),Fr=pr.p(_r||(_r=Ee(["\n    font-size: 16px;\n    font-weight: 500;\n    margin-bottom: 20px;\n    margin-top:0px;\n"]))),Mr=pr.p(Er||(Er=Ee(["\n    font-size: 13px;\n    font-weight: 100;\n    margin-bottom:0px;\n"]))),Ur=pr.p(Ir||(Ir=Ee(["\n    font-size: 13px;\n    font-weight: 600;\n    color: #9C4FFF;\n    margin-top:0px;\n"]))),Vr=pr.div(Sr||(Sr=Ee(["\n    display: flexl;\n    flex-direction: column;\n    width: 496px;\n    height: 120px;\n"]))),Br=pr.p(Tr||(Tr=Ee(["\n    margin-top: 0px;\n    font-size: 20px;\n    font-weight: 800;\n    margin-bottom: 16px;\n"]))),jr=pr(Br)(kr||(kr=Ee(["\n    font-size: 14px;\n    font-weight: 200;\n    margin-bottom: 20px;\n    height: 48px;\n    overflow: hidden; \n"]))),zr=pr.div(Cr||(Cr=Ee(["\n    width: 158px;\n    margin-left:78px\n"]))),qr=pr.img(xr||(xr=Ee(["\n    width: 100%;\n    height: 142px;\n    object-fit: cover;\n"]))),Kr=pr.div(Ar||(Ar=Ee(["\n    display: flex;\n    margin: 0px;\n    height: 28px;\n"]))),Hr=pr.img(Pr||(Pr=Ee(["\n    width: 28px;\n    height: 28px;\n    object-fit: cover;\n    border-radius: 20px;\n    margin-right:12px;\n    border: 0.05px solid white;\n"]))),Gr=pr.p(Nr||(Nr=Ee(["\n    font-size: 14px;\n    line-height: 2px;\n    font-weight: 800;\n    margin-right: 12px;\n    text-transform: uppercase;\n"]))),Wr=pr.div(Rr||(Rr=Ee(["\n    display: flex;\n    align-items: center;\n"]))),Qr=pr.p(Dr||(Dr=Ee(["\n    margin-left: 6px;\n    font-weight:300;\n    color: #DCDCDC;\n"])));const Yr=function(e){const{post:t,onClick:n}=e,r=t.comments?t.comments.length:0,i=t.likes||0,{nanoseconds:s,seconds:o}=t.time,a=new Date(1e3*o+s/1e6);return(0,gr.jsxs)(Or,{onClick:n,children:[(0,gr.jsxs)(Lr,{children:[(0,gr.jsx)(Fr,{children:t.tag[0]}),(0,gr.jsx)(Mr,{children:function(e){const t=e.getMonth()+1,n=e.getDate();return"".concat(t,"\uc6d4 ").concat(n,"\uc77c")}(a)}),(0,gr.jsxs)(Ur,{children:["\uacf5\uac10 ",i]})]}),(0,gr.jsxs)(Vr,{children:[(0,gr.jsx)(Br,{children:t.title}),(0,gr.jsx)(jr,{children:t.content}),(0,gr.jsxs)(Kr,{children:[(0,gr.jsx)(Hr,{src:"https://firebasestorage.googleapis.com/v0/b/miniblog-43686.appspot.com/o/public%2Fowner.jpg?alt=media&token=20aa615d-ff20-43e7-9be4-f7c92a55b546"}),(0,gr.jsx)(Gr,{children:"Snackthief"}),(0,gr.jsxs)(Wr,{children:[(0,gr.jsx)("img",{src:"https://firebasestorage.googleapis.com/v0/b/miniblog-43686.appspot.com/o/public%2FComment.svg?alt=media&token=1121b883-12c7-4b4d-8645-1da0dd3bef18",alt:""}),(0,gr.jsx)(Qr,{children:r})]})]})]}),(0,gr.jsx)(zr,{children:(0,gr.jsx)(qr,{src:t.img})})]})};var $r;const Jr=pr.div($r||($r=Ee(["\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n    justify-content: center;\n    margin-right: 68px;\n    \n"])));const Xr=function(e){const{posts:t,onClickItem:n}=e;return(0,gr.jsx)(Jr,{children:t.map(((e,t)=>(0,gr.jsx)(Yr,{post:e,onClick:()=>n(e)},e.id)))})};var Zr,ei,ti,ni,ri,ii,si,oi;const ai=pr.div(Zr||(Zr=Ee(["\n    max-width: 260px;\n    width: calc(40% - 92px);\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    padding: 80px 48px;\n    border-left: solid 1px #585858;\n    box-sizing: content-box;\n    border-right: solid 1px #585858;\n"]))),ci=pr.img(ei||(ei=Ee(["\n    width: 260px;\n    height: 260px;\n    object-fit: cover;\n    border-radius: 50%;  // \uc774\ubbf8\uc9c0\ub97c \uc6d0\ud615\uc73c\ub85c \ud45c\uc2dc\n    margin-bottom: 60px;\n"]))),li=pr.div(ti||(ti=Ee(["\n    //\ub2c9\ub124\uc784 \uc544\uc774\ub514.\n    width: 220px;\n"]))),ui=pr.div(ni||(ni=Ee(["\n    display:flex\n"]))),hi=pr(ci)(ri||(ri=Ee(["\n    width: 36px;\n    height: 36px;\n    object-fit: cover;\n    border-radius: 20px;\n    margin-bottom: 0px;\n    margin-right:12px;\n"]))),di=pr.p(ii||(ii=Ee(["\n    font-size: 14px;\n    color: #ffffff;\n    margin:0px;\n    margin-bottom: 16px;\n    font-weight:100;\n"]))),fi=pr.p(si||(si=Ee(["\n    font-size: 14px;\n    color: #ffffff;\n    margin:0px;\n    margin-bottom: 16px;\n    font-weight:100;\n    text-transform: uppercase;\n"]))),pi=pr(di)(oi||(oi=Ee(["\n    font-size: 18px;\n    font-weight:800;\n    color: #ffffff;\n    margin-bottom: 0px;\n"])));const mi=function(e){const{aboutOwner:t}=e;return(0,gr.jsxs)(ai,{children:[(0,gr.jsx)(ci,{src:t[0].img}),(0,gr.jsxs)(ui,{children:[(0,gr.jsx)(hi,{src:t[0].img}),(0,gr.jsxs)(li,{children:[(0,gr.jsx)(pi,{children:t[0].id}),(0,gr.jsxs)(fi,{children:["@",t[0].name]}),(0,gr.jsx)(di,{children:t[0].introduction})]})]})]})};var gi,vi,yi,wi,bi,_i;const Ei=pr.p(gi||(gi=Ee(["\n    font-Weight: 700;\n    justify-content: center;\n    font-size: 28px;\n    color: white;\n    margin-bottom:38px;\n    margin-top: 4px;\n"]))),Ii=pr.p(vi||(vi=Ee(["\n    font-Weight: 200;\n    justify-content: center;\n    font-size: 15px;\n    color: white;\n    margin-top: 140px;\n    margin-bottom:16px;\n    line-height: 8px;\n"]))),Si=pr.div(yi||(yi=Ee(["\n    width: 100vw;\n    border-bottom: 1px solid #585858;\n"]))),Ti=pr.div(wi||(wi=Ee(["\n    max-width: 1306px;\n    margin-left:auto;\n    margin-right:auto;\n"]))),ki=pr.div(bi||(bi=Ee(["\n    width: 100%;\n    max-width: 720px;\n    display: flex;\n    margin-bottom: 12px;\n"]))),Ci=pr.p(_i||(_i=Ee(["\n    line-Height:8px;\n    margin-right: 20px;\n    color: white;\n    font-Weight: 200;\n    cursor: pointer;\n"])));const xi=function(e){const t=X();return(0,gr.jsx)(Si,{children:(0,gr.jsxs)(Ti,{children:[(0,gr.jsx)(Ii,{children:"\uac04\uc7a5\uacf5\uc7a5\uacf5\uc7a5\uc7a5"}),(0,gr.jsx)(Ei,{children:"\ub098\uc758 \ubcf4\ub77c\uc0c9 \uc77c\uae30\uc7a5"}),(0,gr.jsxs)(ki,{children:[(0,gr.jsx)(Ci,{onClick:()=>{t("index")},children:"HOME"}),(0,gr.jsx)(Ci,{children:"\uacf5\uc9c0"})]})]})})},Ai=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Pi={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,c=a?e[i+2]:0,l=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),r.push(n[l],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ai(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new Ni;const c=t<<2|s>>4;if(r.push(c),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ni extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ri=function(e){return function(e){const t=Ai(e);return Pi.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Di=function(e){try{return Pi.decodeString(e,!0)}catch(CR){console.error("base64Decode failed: ",CR)}return null};function Oi(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Oi(e[n],t[n]));return e}const Li=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Fi=()=>{try{return Li()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/lunch-menu/lunch-menu.git",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_KEY:"AIzaSyDmUq8ddVDUUr9OH1hbeHPrwi97xAZ0hcs",REACT_APP_FB_AUTH_DOMAIN:"miniblog-43686.firebaseapp.com",REACT_APP_FB_PROJECT_ID:"miniblog-43686",REACT_APP_FB_STORAGE_BUCKET:"miniblog-43686.appspot.com",REACT_APP_FB_MESSAGING_SENDER_ID:"125888470069",REACT_APP_FB_API_ID:"1:125888470069:web:3addba989eafadf899657c"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(CR){return}const t=e&&Di(e[1]);return t&&JSON.parse(t)})()}catch(CR){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(CR))}},Mi=e=>{const t=(e=>{var t,n;return null===(n=null===(t=Fi())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Ui=()=>{var e;return null===(e=Fi())||void 0===e?void 0:e.config};class Vi{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Bi(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ri(JSON.stringify({alg:"none",type:"JWT"})),Ri(JSON.stringify(s)),""].join(".")}function ji(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function zi(){var e;const t=null===(e=Fi())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(CR){return!1}}function qi(){return"object"===typeof self&&self.self===self}function Ki(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Hi(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Gi(){const e=ji();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Wi(){return!zi()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Qi(){try{return"object"===typeof indexedDB}catch(CR){return!1}}class Yi extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Yi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$i.prototype.create)}}class $i{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Ji,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Yi(n,s,t)}}const Ji=/\{\$([^}]+)}/g;function Xi(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Zi(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(es(n)&&es(s)){if(!Zi(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function es(e){return null!==e&&"object"===typeof e}function ts(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function ns(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function rs(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function is(e,t){const n=new ss(e,t);return n.subscribe.bind(n)}class ss{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=os),void 0===r.error&&(r.error=os),void 0===r.complete&&(r.complete=os);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(CR){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(CR){"undefined"!==typeof console&&console.error&&console.error(CR)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function os(){}function as(e){return e&&e._delegate?e._delegate:e}class cs{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ls="[DEFAULT]";class us{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Vi;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(CR){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(CR){if(r)return null;throw CR}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ls})}catch(CR){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(CR){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ls;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ls;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ls;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:hs(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ls;return this.component?this.component.multipleInstances?e:ls:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function hs(e){return e===ls?void 0:e}class ds{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new us(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const fs=[];var ps;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ps||(ps={}));const ms={debug:ps.DEBUG,verbose:ps.VERBOSE,info:ps.INFO,warn:ps.WARN,error:ps.ERROR,silent:ps.SILENT},gs=ps.INFO,vs={[ps.DEBUG]:"log",[ps.VERBOSE]:"log",[ps.INFO]:"info",[ps.WARN]:"warn",[ps.ERROR]:"error"},ys=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=vs[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class ws{constructor(e){this.name=e,this._logLevel=gs,this._logHandler=ys,this._userLogHandler=null,fs.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ps))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?ms[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ps.DEBUG,...t),this._logHandler(this,ps.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ps.VERBOSE,...t),this._logHandler(this,ps.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ps.INFO,...t),this._logHandler(this,ps.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ps.WARN,...t),this._logHandler(this,ps.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ps.ERROR,...t),this._logHandler(this,ps.ERROR,...t)}}const bs=(e,t)=>t.some((t=>e instanceof t));let _s,Es;const Is=new WeakMap,Ss=new WeakMap,Ts=new WeakMap,ks=new WeakMap,Cs=new WeakMap;let xs={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ss.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ts.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ns(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function As(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Es||(Es=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Rs(this),n),Ns(Is.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ns(e.apply(Rs(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Rs(this),t,...r);return Ts.set(s,t.sort?t.sort():[t]),Ns(s)}}function Ps(e){return"function"===typeof e?As(e):(e instanceof IDBTransaction&&function(e){if(Ss.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));Ss.set(e,t)}(e),bs(e,_s||(_s=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,xs):e)}function Ns(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Ns(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Is.set(t,e)})).catch((()=>{})),Cs.set(t,e),t}(e);if(ks.has(e))return ks.get(e);const t=Ps(e);return t!==e&&(ks.set(e,t),Cs.set(t,e)),t}const Rs=e=>Cs.get(e);const Ds=["get","getKey","getAll","getAllKeys","count"],Os=["put","add","delete","clear"],Ls=new Map;function Fs(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Ls.get(t))return Ls.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Os.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Ds.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),c=1;c<o;c++)a[c-1]=arguments[c];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return Ls.set(t,s),s}xs=(e=>({...e,get:(t,n,r)=>Fs(t,n)||e.get(t,n,r),has:(t,n)=>!!Fs(t,n)||e.has(t,n)}))(xs);class Ms{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Us="@firebase/app",Vs="0.10.1",Bs=new ws("@firebase/app"),js="@firebase/app-compat",zs="@firebase/analytics-compat",qs="@firebase/analytics",Ks="@firebase/app-check-compat",Hs="@firebase/app-check",Gs="@firebase/auth",Ws="@firebase/auth-compat",Qs="@firebase/database",Ys="@firebase/database-compat",$s="@firebase/functions",Js="@firebase/functions-compat",Xs="@firebase/installations",Zs="@firebase/installations-compat",eo="@firebase/messaging",to="@firebase/messaging-compat",no="@firebase/performance",ro="@firebase/performance-compat",io="@firebase/remote-config",so="@firebase/remote-config-compat",oo="@firebase/storage",ao="@firebase/storage-compat",co="@firebase/firestore",lo="@firebase/firestore-compat",uo="firebase",ho="[DEFAULT]",fo={[Us]:"fire-core",[js]:"fire-core-compat",[qs]:"fire-analytics",[zs]:"fire-analytics-compat",[Hs]:"fire-app-check",[Ks]:"fire-app-check-compat",[Gs]:"fire-auth",[Ws]:"fire-auth-compat",[Qs]:"fire-rtdb",[Ys]:"fire-rtdb-compat",[$s]:"fire-fn",[Js]:"fire-fn-compat",[Xs]:"fire-iid",[Zs]:"fire-iid-compat",[eo]:"fire-fcm",[to]:"fire-fcm-compat",[no]:"fire-perf",[ro]:"fire-perf-compat",[io]:"fire-rc",[so]:"fire-rc-compat",[oo]:"fire-gcs",[ao]:"fire-gcs-compat",[co]:"fire-fst",[lo]:"fire-fst-compat","fire-js":"fire-js",[uo]:"fire-js-all"},po=new Map,mo=new Map,go=new Map;function vo(e,t){try{e.container.addComponent(t)}catch(CR){Bs.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),CR)}}function yo(e,t){e.container.addOrOverwriteComponent(t)}function wo(e){const t=e.name;if(go.has(t))return Bs.debug("There were multiple attempts to register component ".concat(t,".")),!1;go.set(t,e);for(const n of po.values())vo(n,e);for(const n of mo.values())vo(n,e);return!0}function bo(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function _o(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ho;bo(e,t).clearInstance(n)}function Eo(e){return void 0!==e.options}function Io(e){return void 0!==e.settings}function So(){go.clear()}const To=new $i("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class ko{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new cs("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw To.create("app-deleted",{appName:this._name})}}class Co extends ko{constructor(e,t,n,r){const i=void 0!==t.automaticDataCollectionEnabled&&t.automaticDataCollectionEnabled,s={name:n,automaticDataCollectionEnabled:i};if(void 0!==e.apiKey)super(e,s,r);else{super(e.options,s,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},t),this._finalizationRegistry=new FinalizationRegistry((()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Oo(Us,Vs,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Do(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw To.create("server-app-deleted")}}const xo="10.11.0";function Ao(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:ho,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw To.create("bad-app-name",{appName:String(i)});if(n||(n=Ui()),!n)throw To.create("no-options");const s=po.get(i);if(s){if(Zi(n,s.options)&&Zi(r,s.config))return s;throw To.create("duplicate-app",{appName:i})}const o=new ds(i);for(const c of go.values())o.addComponent(c);const a=new ko(n,r,o);return po.set(i,a),a}function Po(e,t){if(qi())throw To.create("invalid-server-app-environment");let n;void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!1),n=Eo(e)?e.options:e;const r=Object.assign(Object.assign({},t),n);void 0!==r.releaseOnDeref&&delete r.releaseOnDeref;if(void 0!==t.releaseOnDeref&&"undefined"===typeof FinalizationRegistry)throw To.create("finalization-registry-not-supported",{});const i=""+(s=JSON.stringify(r),[...s].reduce(((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0),0));var s;const o=mo.get(i);if(o)return o.incRefCount(t.releaseOnDeref),o;const a=new ds(i);for(const l of go.values())a.addComponent(l);const c=new Co(n,t,i,a);return mo.set(i,c),c}function No(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ho;const t=po.get(e);if(!t&&e===ho&&Ui())return Ao();if(!t)throw To.create("no-app",{appName:e});return t}function Ro(){return Array.from(po.values())}async function Do(e){let t=!1;const n=e.name;if(po.has(n))t=!0,po.delete(n);else if(mo.has(n)){e.decRefCount()<=0&&(mo.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Oo(e,t,n){var r;let i=null!==(r=fo[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Bs.warn(e.join(" "))}wo(new cs("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function Lo(e,t){if(null!==e&&"function"!==typeof e)throw To.create("invalid-log-argument");!function(e,t){for(const n of fs){let r=null;t&&t.level&&(r=ms[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:ps[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function Fo(e){var t;t=e,fs.forEach((e=>{e.setLogLevel(t)}))}const Mo="firebase-heartbeat-database",Uo=1,Vo="firebase-heartbeat-store";let Bo=null;function jo(){return Bo||(Bo=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=Ns(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(Ns(o.result),e.oldVersion,e.newVersion,Ns(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(Mo,Uo,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Vo)}catch(CR){console.warn(CR)}}}).catch((e=>{throw To.create("idb-open",{originalErrorMessage:e.message})}))),Bo}async function zo(e,t){try{const n=(await jo()).transaction(Vo,"readwrite"),r=n.objectStore(Vo);await r.put(t,qo(e)),await n.done}catch(CR){if(CR instanceof Yi)Bs.warn(CR.message);else{const t=To.create("idb-set",{originalErrorMessage:null===CR||void 0===CR?void 0:CR.message});Bs.warn(t.message)}}}function qo(e){return"".concat(e.name,"!").concat(e.options.appId)}class Ko{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Go(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ho();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Ho(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Wo(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Wo(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Ri(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Ho(){return(new Date).toISOString().substring(0,10)}class Go{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Qi()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await jo()).transaction(Vo),n=await t.objectStore(Vo).get(qo(e));return await t.done,n}catch(CR){if(CR instanceof Yi)Bs.warn(CR.message);else{const t=To.create("idb-get",{originalErrorMessage:null===CR||void 0===CR?void 0:CR.message});Bs.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return zo(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return zo(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Wo(e){return Ri(JSON.stringify({version:2,heartbeats:e})).length}var Qo;Qo="",wo(new cs("platform-logger",(e=>new Ms(e)),"PRIVATE")),wo(new cs("heartbeat",(e=>new Ko(e)),"PRIVATE")),Oo(Us,Vs,Qo),Oo(Us,Vs,"esm2017"),Oo("fire-js","");class Yo{constructor(e,t){this._delegate=e,this.firebase=t,vo(e,new cs("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Do(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ho;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ho;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){vo(this._delegate,e)}_addOrOverwriteComponent(e){yo(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const $o=new $i("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const Jo=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=Ao(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Xi(n,i.name))return n[i.name];const s=new t(i,r);return n[i.name]=s,s},app:i,registerVersion:Oo,setLogLevel:Fo,onLog:Lo,apps:null,SDK_VERSION:xo,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if(wo(e)&&"PUBLIC"===e.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw $o.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&Oi(o,e.serviceProps),r[s]=o,t.prototype[s]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Xi(n,e=e||ho))throw $o.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(Yo);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Oi(n,e)},createSubscribe:is,ErrorFactory:$i,deepExtend:Oi}),n}(),Xo=new ws("@firebase/app-compat");if(qi()&&void 0!==self.firebase){Xo.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Xo.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Zo=Jo;!function(e){Oo("@firebase/app-compat","0.2.31",e)}();Zo.registerVersion("firebase","10.11.0","app-compat");Oo("firebase","10.11.0","app");function ea(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const ta={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},na="EMAIL_SIGNIN",ra="PASSWORD_RESET",ia="RECOVER_EMAIL",sa="REVERT_SECOND_FACTOR_ADDITION",oa="VERIFY_AND_CHANGE_EMAIL",aa="VERIFY_EMAIL";function ca(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const la=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},ua=ca,ha=new $i("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),da=new ws("@firebase/auth");function fa(e){if(da.logLevel<=ps.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];da.error("Auth (".concat(xo,"): ").concat(e),...n)}}function pa(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw wa(e,...n)}function ma(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return wa(e,...n)}function ga(e,t,n){const r=Object.assign(Object.assign({},ua()),{[t]:n});return new $i("auth","Firebase",r).create(t,{appName:e.name})}function va(e){return ga(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ya(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&pa(e,"argument-error"),ga(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function wa(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return ha.create(e,...n)}function ba(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw wa(t,...r)}}function _a(e){const t="INTERNAL ASSERTION FAILED: "+e;throw fa(t),new Error(t)}function Ea(e,t){e||_a(t)}function Ia(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Sa(){return"http:"===Ta()||"https:"===Ta()}function Ta(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class ka{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ea(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ji())||Hi()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Sa()||Ki()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Ca(e,t){Ea(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class xa{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void _a("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void _a("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void _a("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Aa={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Pa=new ka(3e4,6e4);function Na(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Ra(e,t,n,r){return Da(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=ts(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),xa.fetch()(La(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function Da(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Aa),t);try{const t=new Ma(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Ua(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Ua(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Ua(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Ua(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw ga(e,a,o);pa(e,a)}}catch(CR){if(CR instanceof Yi)throw CR;pa(e,"network-request-failed",{message:String(CR)})}}async function Oa(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Ra(e,t,n,r,i);return"mfaPendingCredential"in s&&pa(e,"multi-factor-auth-required",{_serverResponse:s}),s}function La(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Ca(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function Fa(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ma{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(ma(this.auth,"network-request-failed"))),Pa.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ua(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ma(e,t,r);return i.customData._tokenResponse=n,i}function Va(e){return void 0!==e&&void 0!==e.getResponse}function Ba(e){return void 0!==e&&void 0!==e.enterprise}class ja{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Fa(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function za(e,t){return Ra(e,"GET","/v2/recaptchaConfig",Na(e,t))}async function qa(e,t){return Ra(e,"POST","/v1/accounts:lookup",t)}function Ka(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(CR){}}function Ha(e){return 1e3*Number(e)}function Ga(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return fa("JWT malformed, contained fewer than 3 sections"),null;try{const e=Di(n);return e?JSON.parse(e):(fa("Failed to decode base64 JWT payload"),null)}catch(CR){return fa("Caught error parsing JWT payload as JSON",null===CR||void 0===CR?void 0:CR.toString()),null}}function Wa(e){const t=Ga(e);return ba(t,"internal-error"),ba("undefined"!==typeof t.exp,"internal-error"),ba("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Qa(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(CR){throw CR instanceof Yi&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(CR)&&e.auth.currentUser===e&&await e.auth.signOut(),CR}}class Ya{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(CR){return void((null===CR||void 0===CR?void 0:CR.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class $a{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ka(this.lastLoginAt),this.creationTime=Ka(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Ja(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Qa(e,qa(n,{idToken:r}));ba(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?Xa(s.providerUserInfo):[],a=(c=e.providerData,l=o,[...c.filter((e=>!l.some((t=>t.providerId===e.providerId)))),...l]);var c,l;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new $a(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function Xa(e){return e.map((e=>{var{providerId:t}=e,n=ea(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class Za{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ba(e.idToken,"internal-error"),ba("undefined"!==typeof e.idToken,"internal-error"),ba("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Wa(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ba(0!==e.length,"internal-error");const t=Wa(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(ba(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Da(e,{},(async()=>{const n=ts({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=La(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",xa.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Za;return n&&(ba("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(ba("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(ba("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Za,this.toJSON())}_performRefresh(){return _a("not implemented")}}function ec(e,t){ba("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class tc{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=ea(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ya(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new $a(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Qa(this,this.stsTokenManager.getToken(this.auth,e));return ba(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=as(e),r=await n.getIdToken(t),i=Ga(r);ba(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ka(Ha(i.auth_time)),issuedAtTime:Ka(Ha(i.iat)),expirationTime:Ka(Ha(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=as(e);await Ja(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(ba(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new tc(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ba(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Ja(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Io(this.auth.app))return Promise.reject(va(this.auth));const e=await this.getIdToken();return await Qa(this,async function(e,t){return Ra(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,c,l;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,v=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:y,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:E}=t;ba(y&&E,e,"internal-error");const I=Za.fromJSON(this.name,E);ba("string"===typeof y,e,"internal-error"),ec(u,e.name),ec(h,e.name),ba("boolean"===typeof w,e,"internal-error"),ba("boolean"===typeof b,e,"internal-error"),ec(d,e.name),ec(f,e.name),ec(p,e.name),ec(m,e.name),ec(g,e.name),ec(v,e.name);const S=new tc({uid:y,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:I,createdAt:g,lastLoginAt:v});return _&&Array.isArray(_)&&(S.providerData=_.map((e=>Object.assign({},e)))),m&&(S._redirectEventId=m),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Za;r.updateFromServerResponse(t);const i=new tc({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Ja(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];ba(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Xa(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new Za;o.updateFromIdToken(n);const a=new tc({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new $a(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,c),a}}const nc=new Map;function rc(e){Ea(e instanceof Function,"Expected a class definition");let t=nc.get(e);return t?(Ea(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,nc.set(e,t),t)}class ic{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ic.type="NONE";const sc=ic;function oc(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class ac{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=oc(this.userKey,r.apiKey,i),this.fullPersistenceKey=oc("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?tc._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new ac(rc(sc),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||rc(sc);const s=oc(n,e.config.apiKey,e.name);let o=null;for(const l of t)try{const t=await l._get(s);if(t){const n=tc._fromJSON(e,t);l!==i&&(o=n),i=l;break}}catch(c){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(c){}}))),new ac(i,e,n)):new ac(i,e,n)}}function cc(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(dc(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(lc(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(pc(t))return"Blackberry";if(mc(t))return"Webos";if(uc(t))return"Safari";if((t.includes("chrome/")||hc(t))&&!t.includes("edge/"))return"Chrome";if(fc(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function lc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ji();return/firefox\//i.test(e)}function uc(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ji()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ji();return/crios\//i.test(e)}function dc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ji();return/iemobile/i.test(e)}function fc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ji();return/android/i.test(e)}function pc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ji();return/blackberry/i.test(e)}function mc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ji();return/webos/i.test(e)}function gc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ji();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function vc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ji();return gc(e)||fc(e)||mc(e)||pc(e)||/windows phone/i.test(e)||dc(e)}function yc(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=cc(ji());break;case"Worker":t="".concat(cc(ji()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(xo,"/").concat(r)}class wc{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(CR){r(CR)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(CR){t.reverse();for(const n of t)try{n()}catch(Lt){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===CR||void 0===CR?void 0:CR.message})}}}class bc{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class _c{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ic(this),this.idTokenSubscription=new Ic(this),this.beforeStateQueue=new wc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ha,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=rc(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await ac.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(CR){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await qa(this,{idToken:e}),n=await tc._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Io(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(CR){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(CR)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ba(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(CR){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ja(e)}catch(CR){if((null===CR||void 0===CR?void 0:CR.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Io(this.app))return Promise.reject(va(this));const t=e?as(e):null;return t&&ba(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&ba(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return Io(this.app)?Promise.reject(va(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Io(this.app)?Promise.reject(va(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(rc(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Ra(e,"GET","/v2/passwordPolicy",Na(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new bc(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new $i("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Ra(e,"POST","/v2/accounts:revokeToken",Na(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&rc(e)||this._popupRedirectResolver;ba(t,this,"argument-error"),this.redirectPersistenceManager=await ac.create(this,[rc(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(ba(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ba(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yc(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(da.logLevel<=ps.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];da.warn("Auth (".concat(xo,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Ec(e){return as(e)}class Ic{constructor(e){this.auth=e,this.observer=null,this.addObserver=is((e=>this.observer=e))}get next(){return ba(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Sc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Tc(e){return Sc.loadJS(e)}function kc(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Cc{constructor(e){this.type="recaptcha-enterprise",this.auth=Ec(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Ba(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{za(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new ja(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Ba(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Sc.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Tc(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function xc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Cc(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Ac(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await xc(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await xc(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function Pc(e,t,n){const r=Ec(e);ba(r._canInitEmulator,r,"emulator-config-failed"),ba(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Nc(t),{host:o,port:a}=function(e){const t=Nc(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Rc(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Rc(t)}}}(t),c=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Nc(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Rc(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Dc{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _a("not implemented")}_getIdTokenResponse(e){return _a("not implemented")}_linkToIdToken(e,t){return _a("not implemented")}_getReauthenticationResolver(e){return _a("not implemented")}}async function Oc(e,t){return Ra(e,"POST","/v1/accounts:resetPassword",Na(e,t))}async function Lc(e,t){return Ra(e,"POST","/v1/accounts:signUp",t)}async function Fc(e,t){return Oa(e,"POST","/v1/accounts:signInWithPassword",Na(e,t))}async function Mc(e,t){return Ra(e,"POST","/v1/accounts:sendOobCode",Na(e,t))}async function Uc(e,t){return Mc(e,t)}async function Vc(e,t){return Mc(e,t)}class Bc extends Dc{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Bc(e,t,"password")}static _fromEmailAndCode(e,t){return new Bc(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Ac(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Fc);case"emailLink":return async function(e,t){return Oa(e,"POST","/v1/accounts:signInWithEmailLink",Na(e,t))}(e,{email:this._email,oobCode:this._password});default:pa(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Ac(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Lc);case"emailLink":return async function(e,t){return Oa(e,"POST","/v1/accounts:signInWithEmailLink",Na(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:pa(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function jc(e,t){return Oa(e,"POST","/v1/accounts:signInWithIdp",Na(e,t))}class zc extends Dc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new zc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):pa("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=ea(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new zc(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return jc(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,jc(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,jc(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ts(t)}return e}}const qc={USER_NOT_FOUND:"user-not-found"};class Kc extends Dc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Kc({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Kc({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Oa(e,"POST","/v1/accounts:signInWithPhoneNumber",Na(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Oa(e,"POST","/v1/accounts:signInWithPhoneNumber",Na(e,t));if(n.temporaryProof)throw Ua(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Oa(e,"POST","/v1/accounts:signInWithPhoneNumber",Na(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),qc)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Kc({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Hc{constructor(e){var t,n,r,i,s,o;const a=ns(rs(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);ba(c&&l&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=l,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=ns(rs(e)).link,n=t?ns(rs(t)).deep_link_id:null,r=ns(rs(e)).deep_link_id;return(r?ns(rs(r)).link:null)||r||n||t||e}(e);try{return new Hc(t)}catch(n){return null}}}class Gc{constructor(){this.providerId=Gc.PROVIDER_ID}static credential(e,t){return Bc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Hc.parseLink(t);return ba(n,"argument-error"),Bc._fromEmailAndCode(e,n.code,n.tenantId)}}Gc.PROVIDER_ID="password",Gc.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Gc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Wc{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Qc extends Wc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Yc extends Qc{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return ba("providerId"in t&&"signInMethod"in t,"argument-error"),zc._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return ba(e.idToken||e.accessToken,"argument-error"),zc._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Yc.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Yc.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=t;if(!r&&!i&&!n&&!s)return null;if(!a)return null;try{return new Yc(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch(CR){return null}}}class $c extends Qc{constructor(){super("facebook.com")}static credential(e){return zc._fromParams({providerId:$c.PROVIDER_ID,signInMethod:$c.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $c.credentialFromTaggedObject(e)}static credentialFromError(e){return $c.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return $c.credential(t.oauthAccessToken)}catch(n){return null}}}$c.FACEBOOK_SIGN_IN_METHOD="facebook.com",$c.PROVIDER_ID="facebook.com";class Jc extends Qc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return zc._fromParams({providerId:Jc.PROVIDER_ID,signInMethod:Jc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Jc.credentialFromTaggedObject(e)}static credentialFromError(e){return Jc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Jc.credential(n,r)}catch(i){return null}}}Jc.GOOGLE_SIGN_IN_METHOD="google.com",Jc.PROVIDER_ID="google.com";class Xc extends Qc{constructor(){super("github.com")}static credential(e){return zc._fromParams({providerId:Xc.PROVIDER_ID,signInMethod:Xc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xc.credentialFromTaggedObject(e)}static credentialFromError(e){return Xc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Xc.credential(t.oauthAccessToken)}catch(n){return null}}}Xc.GITHUB_SIGN_IN_METHOD="github.com",Xc.PROVIDER_ID="github.com";class Zc extends Dc{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return jc(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,jc(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,jc(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new Zc(n,i):null}static _create(e,t){return new Zc(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class el extends Wc{constructor(e){ba(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return el.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return el.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Zc.fromJSON(e);return ba(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return Zc._create(r,n)}catch(CR){return null}}}class tl extends Qc{constructor(){super("twitter.com")}static credential(e,t){return zc._fromParams({providerId:tl.PROVIDER_ID,signInMethod:tl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return tl.credentialFromTaggedObject(e)}static credentialFromError(e){return tl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return tl.credential(n,r)}catch(i){return null}}}async function nl(e,t){return Oa(e,"POST","/v1/accounts:signUp",Na(e,t))}tl.TWITTER_SIGN_IN_METHOD="twitter.com",tl.PROVIDER_ID="twitter.com";class rl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await tc._fromIdTokenResponse(e,n,r),s=il(n);return new rl({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=il(n);return new rl({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function il(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class sl extends Yi{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,sl.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new sl(e,t,n,r)}}function ol(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw sl._fromErrorAndOperation(e,n,t,r);throw n}))}function al(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function cl(e,t){const n=as(e);await ul(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return Ra(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=al(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function ll(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Qa(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return rl._forOperation(e,"link",r)}async function ul(e,t,n){await Ja(t);const r=!1===e?"provider-already-linked":"no-such-provider";ba(al(t.providerData).has(n)===e,t.auth,r)}async function hl(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Io(r.app))return Promise.reject(va(r));const i="reauthenticate";try{const s=await Qa(e,ol(r,i,t,e),n);ba(s.idToken,r,"internal-error");const o=Ga(s.idToken);ba(o,r,"internal-error");const{sub:a}=o;return ba(e.uid===a,r,"user-mismatch"),rl._forOperation(e,i,s)}catch(CR){throw(null===CR||void 0===CR?void 0:CR.code)==="auth/".concat("user-not-found")&&pa(r,"user-mismatch"),CR}}async function dl(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Io(e.app))return Promise.reject(va(e));const r="signIn",i=await ol(e,r,t),s=await rl._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function fl(e,t){return dl(Ec(e),t)}async function pl(e,t){const n=as(e);return await ul(!1,n,t.providerId),ll(n,t)}async function ml(e,t){return hl(as(e),t)}async function gl(e,t){if(Io(e.app))return Promise.reject(va(e));const n=Ec(e),r=await async function(e,t){return Oa(e,"POST","/v1/accounts:signInWithCustomToken",Na(e,t))}(n,{token:t,returnSecureToken:!0}),i=await rl._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class vl{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?yl._fromServerResponse(e,t):"totpInfo"in t?wl._fromServerResponse(e,t):pa(e,"internal-error")}}class yl extends vl{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new yl(t)}}class wl extends vl{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new wl(t)}}function bl(e,t,n){var r;ba((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),ba("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ba(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(ba(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function _l(e){const t=Ec(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function El(e,t){await async function(e,t){return Ra(e,"POST","/v1/accounts:update",Na(e,t))}(as(e),{oobCode:t})}async function Il(e,t){const n=as(e),r=await Oc(n,{oobCode:t}),i=r.requestType;switch(ba(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ba(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ba(r.mfaInfo,n,"internal-error");default:ba(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=vl._fromServerResponse(Ec(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function Sl(e,t){const n={identifier:t,continueUri:Sa()?Ia():"http://localhost"},{signinMethods:r}=await async function(e,t){return Ra(e,"POST","/v1/accounts:createAuthUri",Na(e,t))}(as(e),n);return r||[]}async function Tl(e,t){const n=as(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&bl(n.auth,r,t);const{email:i}=await async function(e,t){return Mc(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function kl(e,t,n){const r=as(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&bl(r.auth,i,n);const{email:s}=await async function(e,t){return Mc(e,t)}(r.auth,i);s!==e.email&&await e.reload()}async function Cl(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=as(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await Qa(i,async function(e,t){return Ra(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}async function xl(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await Qa(e,async function(e,t){return Ra(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}class Al{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class Pl extends Al{constructor(e,t,n,r){super(e,t,n),this.username=r}}class Nl extends Al{constructor(e,t){super(e,"facebook.com",t)}}class Rl extends Pl{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class Dl extends Al{constructor(e,t){super(e,"google.com",t)}}class Ol extends Pl{constructor(e,t,n){super(e,"twitter.com",t,n)}}function Ll(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=Ga(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new Al(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new Nl(s,i);case"github.com":return new Rl(s,i);case"google.com":return new Dl(s,i);case"twitter.com":return new Ol(s,i,e.screenName||null);case"custom":case"anonymous":return new Al(s,null);default:return new Al(s,r,i)}}(n)}class Fl{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new Fl("enroll",e,t)}static _fromMfaPendingCredential(e){return new Fl("signin",e)}toJSON(){const e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[e]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return Fl._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return Fl._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Ml{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=Ec(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>vl._fromServerResponse(n,e)));ba(r.mfaPendingCredential,n,"internal-error");const s=Fl._fromMfaPendingCredential(r.mfaPendingCredential);return new Ml(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await rl._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return ba(t.user,n,"internal-error"),rl._forOperation(t.user,t.operationType,o);default:pa(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class Ul{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>vl._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new Ul(e)}async getSession(){return Fl._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await Qa(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await Qa(this.user,(r=this.user.auth,i={idToken:n,mfaEnrollmentId:t},Ra(r,"POST","/v2/accounts/mfaEnrollment:withdraw",Na(r,i))));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(CR){throw CR}var r,i}}const Vl=new WeakMap;const Bl="__sak";class jl{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Bl,"1"),this.storage.removeItem(Bl),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class zl extends jl{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=ji();return uc(e)||gc(e)}()&&function(){try{return!(!window||window===window.top)}catch(CR){return!1}}(),this.fallbackToPolling=vc(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Gi()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}zl.type="LOCAL";const ql=zl;class Kl extends jl{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Kl.type="SESSION";const Hl=Kl;class Gl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Gl(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Wl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Gl.receivers=[];class Ql{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const c=Wl("",20);r.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Yl(){return window}function $l(){return"undefined"!==typeof Yl().WorkerGlobalScope&&"function"===typeof Yl().importScripts}const Jl="firebaseLocalStorageDb",Xl="firebaseLocalStorage",Zl="fbase_key";class eu{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function tu(e,t){return e.transaction([Xl],t?"readwrite":"readonly").objectStore(Xl)}function nu(){const e=indexedDB.open(Jl,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Xl,{keyPath:Zl})}catch(CR){n(CR)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Xl)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Jl);return new eu(e).toPromise()}(),t(await nu()))}))}))}async function ru(e,t,n){const r=tu(e,!0).put({[Zl]:t,value:n});return new eu(r).toPromise()}function iu(e,t){const n=tu(e,!0).delete(t);return new eu(n).toPromise()}class su{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await nu()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(CR){if(t++>3)throw CR;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $l()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gl._getInstance($l()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Ql(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await nu();return await ru(e,Bl,"1"),await iu(e,Bl),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>ru(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=tu(e,!1).get(t),r=await new eu(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>iu(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=tu(e,!1).getAll();return new eu(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}su.type="LOCAL";const ou=su;const au=1e12;class cu{constructor(e){this.auth=e,this.counter=au,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new lu(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||au;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||au;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||au;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class lu{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;ba(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(CR){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(CR){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const uu=kc("rcb"),hu=new ka(3e4,6e4);class du{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=Yl().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return ba(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&Va(Yl().grecaptcha)?Promise.resolve(Yl().grecaptcha):new Promise(((n,r)=>{const i=Yl().setTimeout((()=>{r(ma(e,"network-request-failed"))}),hu.get());Yl()[uu]=()=>{Yl().clearTimeout(i),delete Yl()[uu];const s=Yl().grecaptcha;if(!s||!Va(s))return void r(ma(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};Tc("".concat(Sc.recaptchaV2Script,"?").concat(ts({onload:uu,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(ma(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=Yl().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class fu{async load(e){return new cu(e)}clearedOneInstance(){}}const pu="recaptcha",mu={theme:"light",type:"image"};class gu{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},mu);this.parameters=n,this.type=pu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ec(e),this.isInvisible="invisible"===this.parameters.size,ba("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;ba(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new fu:new du,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(CR){return Promise.reject(CR)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){ba(!this.parameters.sitekey,this.auth,"argument-error"),ba(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ba("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=Yl()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){ba(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ba(Sa()&&!$l(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await Ra(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);ba(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ba(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class vu{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Kc._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function yu(e,t,n){var r;const i=await n.verify();try{let s;if(ba("string"===typeof i,e,"argument-error"),ba(n.type===pu,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){ba("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Ra(e,"POST","/v2/accounts/mfaEnrollment:start",Na(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{ba("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;ba(n,e,"missing-multi-factor-info");const o=await function(e,t){return Ra(e,"POST","/v2/accounts/mfaSignIn:start",Na(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Ra(e,"POST","/v1/accounts:sendVerificationCode",Na(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class wu{constructor(e){this.providerId=wu.PROVIDER_ID,this.auth=Ec(e)}verifyPhoneNumber(e,t){return yu(this.auth,e,as(t))}static credential(e,t){return Kc._fromVerification(e,t)}static credentialFromResult(e){const t=e;return wu.credentialFromTaggedObject(t)}static credentialFromError(e){return wu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Kc._fromTokenResponse(n,r):null}}function bu(e,t){return t?rc(t):(ba(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}wu.PROVIDER_ID="phone",wu.PHONE_SIGN_IN_METHOD="phone";class _u extends Dc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return jc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return jc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return jc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Eu(e){return dl(e.auth,new _u(e),e.bypassAuthState)}function Iu(e){const{auth:t,user:n}=e;return ba(n,t,"internal-error"),hl(n,new _u(e),e.bypassAuthState)}async function Su(e){const{auth:t,user:n}=e;return ba(n,t,"internal-error"),ll(n,new _u(e),e.bypassAuthState)}class Tu{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(CR){this.reject(CR)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(CR){this.reject(CR)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Eu;case"linkViaPopup":case"linkViaRedirect":return Su;case"reauthViaPopup":case"reauthViaRedirect":return Iu;default:pa(this.auth,"internal-error")}}resolve(e){Ea(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ea(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ku=new ka(2e3,1e4);class Cu extends Tu{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Cu.currentPopupAction&&Cu.currentPopupAction.cancel(),Cu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ba(e,this.auth,"internal-error"),e}async onExecution(){Ea(1===this.filter.length,"Popup operations only handle one event");const e=Wl();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(ma(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(ma(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Cu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(ma(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,ku.get())};e()}}Cu.currentPopupAction=null;const xu="pendingRedirect",Au=new Map;class Pu extends Tu{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Au.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Ou(t),r=Du(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(CR){e=()=>Promise.reject(CR)}Au.set(this.auth._key(),e)}return this.bypassAuthState||Au.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function Nu(e,t){return Du(e)._set(Ou(t),"true")}function Ru(e,t){Au.set(e._key(),t)}function Du(e){return rc(e._redirectPersistence)}function Ou(e){return oc(xu,e.config.apiKey,e.name)}function Lu(e,t,n){return async function(e,t,n){if(Io(e.app))return Promise.reject(va(e));const r=Ec(e);ya(e,t,Wc),await r._initializationPromise;const i=bu(r,n);return await Nu(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function Fu(e,t,n){return async function(e,t,n){const r=as(e);if(ya(r.auth,t,Wc),Io(r.auth.app))return Promise.reject(va(r.auth));await r.auth._initializationPromise;const i=bu(r.auth,n);await Nu(i,r.auth);const s=await Vu(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function Mu(e,t,n){return async function(e,t,n){const r=as(e);ya(r.auth,t,Wc),await r.auth._initializationPromise;const i=bu(r.auth,n);await ul(!1,r,t.providerId),await Nu(i,r.auth);const s=await Vu(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function Uu(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Io(e.app))return Promise.reject(va(e));const r=Ec(e),i=bu(r,t),s=new Pu(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function Vu(e){const t=Wl("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class Bu{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zu(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!zu(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(ma(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ju(e))}saveEventToCache(e){this.cachedEventUids.add(ju(e)),this.lastProcessedEventTime=Date.now()}}function ju(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function zu(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function qu(e){return Ra(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const Ku=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Hu=/^https?/;function Gu(e){const t=Ia(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Hu.test(n))return!1;if(Ku.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Wu=new ka(3e4,6e4);function Qu(){const e=Yl().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Yu(e){return new Promise(((t,n)=>{var r,i,s;function o(){Qu(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Qu(),n(ma(e,"network-request-failed"))},timeout:Wu.get()})}if(null===(i=null===(r=Yl().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Yl().gapi)||void 0===s?void 0:s.load)){const t=kc("iframefcb");return Yl()[t]=()=>{gapi.load?o():n(ma(e,"network-request-failed"))},Tc("".concat(Sc.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw $u=null,e}))}let $u=null;const Ju=new ka(5e3,15e3),Xu="__/auth/iframe",Zu="emulator/auth/iframe",eh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},th=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nh(e){const t=e.config;ba(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Ca(t,Zu):"https://".concat(e.config.authDomain,"/").concat(Xu),r={apiKey:t.apiKey,appName:e.name,v:xo},i=th.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(ts(r).slice(1))}async function rh(e){const t=await function(e){return $u=$u||Yu(e),$u}(e),n=Yl().gapi;return ba(n,e,"internal-error"),t.open({where:document.body,url:nh(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eh,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=ma(e,"network-request-failed"),s=Yl().setTimeout((()=>{r(i)}),Ju.get());function o(){Yl().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}const ih={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class sh{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(CR){}}}function oh(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},ih),{width:r.toString(),height:i.toString(),top:s,left:o}),l=ji().toLowerCase();n&&(a=hc(l)?"_blank":n),lc(l)&&(t=t||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return gc(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ji())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new sh(null);const h=window.open(t||"",a,u);ba(h,e,"popup-blocked");try{h.focus()}catch(CR){}return new sh(h)}const ah="__/auth/handler",ch="emulator/auth/handler",lh=encodeURIComponent("fac");async function uh(e,t,n,r,i,s){ba(e.config.authDomain,e,"auth-domain-config-required"),ba(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:xo,eventId:i};if(t instanceof Wc){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Qc){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const c=await e._getAppCheckToken(),l=c?"#".concat(lh,"=").concat(encodeURIComponent(c)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(ah);return Ca(t,ch)}(e),"?").concat(ts(a).slice(1)).concat(l)}const hh="webStorageSupport";const dh=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Hl,this._completeRedirectFn=Uu,this._overrideRedirectResult=Ru}async _openPopup(e,t,n,r){var i;Ea(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return oh(e,await uh(e,t,n,Ia(),r),Wl())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Yl().location.href=e}(await uh(e,t,n,Ia(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Ea(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await rh(e),n=new Bu(e);return t.register("authEvent",(t=>{ba(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(hh,{type:hh},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[hh];void 0!==i&&t(!!i),pa(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await qu(e);for(const r of t)try{if(Gu(r))return}catch(n){}pa(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return vc()||uc()||gc()}};class fh{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return _a("unexpected MultiFactorSessionType")}}}class ph extends fh{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new ph(e)}_finalizeEnroll(e,t,n){return function(e,t){return Ra(e,"POST","/v2/accounts/mfaEnrollment:finalize",Na(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return Ra(e,"POST","/v2/accounts/mfaSignIn:finalize",Na(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class mh{constructor(){}static assertion(e){return ph._fromCredential(e)}}mh.FACTOR_ID="phone";var gh="@firebase/auth",vh="1.7.1";class yh{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ba(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=Fi())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var wh;function bh(){return window}!function(e){Sc=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=ma("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),wh="Browser",wo(new cs("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ba(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:wh,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yc(wh)},l=new _c(r,i,s,c);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(rc);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),wo(new cs("auth-internal",(e=>(e=>new yh(e))(Ec(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Oo(gh,vh,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(wh)),Oo(gh,vh,"esm2017");async function _h(e,t,n){var r;const{BuildInfo:i}=bh();Ea(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(Ea(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return gc()?o.ibi=i.packageName:fc()?o.apn=i.packageName:pa(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,uh(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function Eh(e){const{cordova:t}=bh();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ji();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const Ih=20;class Sh extends Bu{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function Th(e){const t=await xh()._get(Ah(e));return t&&await xh()._remove(Ah(e)),t}function kh(e,t){var n,r;const i=function(e){const t=Ph(e),n=t.link?decodeURIComponent(t.link):void 0,r=Ph(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Ph(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=Ph(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(CR){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?ma(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Ch(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<Ih;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function xh(){return rc(ql)}function Ah(e){return oc("authEvent",e.config.apiKey,e.name)}function Ph(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return ns(n.join("?"))}const Nh=class{constructor(){this._redirectPersistence=Hl,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Uu,this._overrideRedirectResult=Ru}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new Sh(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){pa(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,c,l,u;const h=bh();ba("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ba("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ba("function"===typeof(null===(s=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ba("function"===typeof(null===(c=null===(a=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===c?void 0:c.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ba("function"===typeof(null===(u=null===(l=null===h||void 0===h?void 0:h.cordova)||void 0===l?void 0:l.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),Au.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:Ch(),postBody:null,tenantId:e.tenantId,error:ma(e,"no-auth-event")}}(e,n,r);await function(e,t){return xh()._set(Ah(e),t)}(e,s);const o=await _h(e,s,t);return async function(e,t,n){const{cordova:r}=bh();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function c(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function l(){a||(a=window.setTimeout((()=>{o(ma(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&l()}t.addPassiveListener(c),document.addEventListener("resume",l,!1),fc()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(c),document.removeEventListener("resume",l,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await Eh(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=bh(),n={};gc()?n.iosBundleId=t.packageName:fc()?n.androidPackageName=t.packageName:pa(e,"operation-not-supported-in-this-environment"),await qu(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=bh(),s=setTimeout((async()=>{await Th(e),t.onEvent(Rh())}),500),o=async n=>{clearTimeout(s);const r=await Th(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=kh(r,n.url)),t.onEvent(i||Rh())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,c="".concat(i.packageName.toLowerCase(),"://");bh().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(c)&&o({url:e}),"function"===typeof a)try{a(e)}catch(CR){console.error(CR)}}}};function Rh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ma("no-auth-event")}}function Dh(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Oh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ji();return!("file:"!==Dh()&&"ionic:"!==Dh()&&"capacitor:"!==Dh()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Lh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ji();return Gi()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ji();return/Edge\/\d+/.test(e)}(e)}function Fh(){try{const e=self.localStorage,t=Wl();if(e)return e.setItem(t,"1"),e.removeItem(t),!Lh()||Qi()}catch(CR){return Mh()&&Qi()}return!1}function Mh(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Uh(){return("http:"===Dh()||"https:"===Dh()||Ki()||Oh())&&!(Hi()||zi())&&Fh()&&!Mh()}function Vh(){return Oh()&&"undefined"!==typeof document}const Bh={LOCAL:"local",NONE:"none",SESSION:"session"},jh=ba,zh="persistence";async function qh(e){await e._initializationPromise;const t=Kh(),n=oc(zh,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function Kh(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(CR){return null}}const Hh=ba;class Gh{constructor(){this.browserResolver=rc(dh),this.cordovaResolver=rc(Nh),this.underlyingResolver=null,this._redirectPersistence=Hl,this._completeRedirectFn=Uu,this._overrideRedirectResult=Ru}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Vh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Hh(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!Vh()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function Wh(e){return e.unwrap()}function Qh(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new Xh(e,function(e,t){var n;const r=as(e),i=t;return ba(t.customData.operationType,r,"argument-error"),ba(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Ml._fromError(r,i)}(e,t))}else if(r){const e=Yh(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function Yh(e){const{_tokenResponse:t}=e instanceof Yi?e.customData:e;if(!t)return null;if(!(e instanceof Yi)&&"temporaryProof"in t&&"phoneNumber"in t)return wu.credentialFromResult(e);const n=t.providerId;if(!n||n===ta.PASSWORD)return null;let r;switch(n){case ta.GOOGLE:r=Jc;break;case ta.FACEBOOK:r=$c;break;case ta.GITHUB:r=Xc;break;case ta.TWITTER:r=tl;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?Zc._create(n,o):zc._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new Yc(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof Yi?r.credentialFromError(e):r.credentialFromResult(e)}function $h(e,t){return t.catch((t=>{throw t instanceof Yi&&Qh(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,Yh(r)),additionalUserInfo:Ll(e),user:Zh.getOrCreate(n)};var r}))}async function Jh(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>$h(e,n.confirm(t))}}class Xh{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return $h(Wh(this.auth),this.resolver.resolveSignIn(e))}}class Zh{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=as(e);return Vl.has(t)||Vl.set(t,Ul._fromUser(t)),Vl.get(t)}(e)}static getOrCreate(e){return Zh.USER_MAP.has(e)||Zh.USER_MAP.set(e,new Zh(e)),Zh.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return $h(this.auth,pl(this._delegate,e))}async linkWithPhoneNumber(e,t){return Jh(this.auth,async function(e,t,n){const r=as(e);await ul(!1,r,"phone");const i=await yu(r.auth,t,as(n));return new vu(i,(e=>pl(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return $h(this.auth,async function(e,t,n){const r=as(e);ya(r.auth,t,Wc);const i=bu(r.auth,n);return new Cu(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,Gh))}async linkWithRedirect(e){return await qh(Ec(this.auth)),Mu(this._delegate,e,Gh)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return $h(this.auth,ml(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return Jh(this.auth,async function(e,t,n){const r=as(e);if(Io(r.auth.app))return Promise.reject(va(r.auth));const i=await yu(r.auth,t,as(n));return new vu(i,(e=>ml(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return $h(this.auth,async function(e,t,n){const r=as(e);if(Io(r.auth.app))return Promise.reject(ma(r.auth,"operation-not-supported-in-this-environment"));ya(r.auth,t,Wc);const i=bu(r.auth,n);return new Cu(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,Gh))}async reauthenticateWithRedirect(e){return await qh(Ec(this.auth)),Fu(this._delegate,e,Gh)}sendEmailVerification(e){return Tl(this._delegate,e)}async unlink(e){return await cl(this._delegate,e),this}updateEmail(e){return function(e,t){const n=as(e);return Io(n.auth.app)?Promise.reject(va(n.auth)):xl(n,t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return xl(as(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){const n=as(e);if(Io(n.auth.app))return Promise.reject(va(n.auth));await ll(n,t)}(this._delegate,e)}updateProfile(e){return Cl(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return kl(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Zh.USER_MAP=new WeakMap;const ed=ba;class td{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;ed(n,"invalid-api-key",{appName:e.name}),ed(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?Gh:void 0;this._delegate=t.initialize({options:{persistence:rd(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(la),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Zh.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){Pc(this._delegate,e,t)}applyActionCode(e){return El(this._delegate,e)}checkActionCode(e){return Il(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await Oc(as(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&_l(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return $h(this._delegate,async function(e,t,n){if(Io(e.app))return Promise.reject(va(e));const r=Ec(e),i=Ac(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nl),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&_l(e),t})),o=await rl._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return Sl(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=Hc.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){ed(Uh(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await Ec(e)._initializationPromise,Uu(e,t,!1)}(this._delegate,Gh);return e?$h(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){Ec(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=nd(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=nd(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=Ec(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){ba(t.handleCodeInApp,r,"argument-error"),t&&bl(r,e,t)}(i,n),await Ac(r,i,"getOobCode",Vc)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=Ec(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&bl(r,i,n),await Ac(r,i,"getOobCode",Uc)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){jh(Object.values(Bh).includes(t),e,"invalid-persistence-type"),Hi()?jh(t!==Bh.SESSION,e,"unsupported-persistence-type"):zi()?jh(t===Bh.NONE,e,"unsupported-persistence-type"):Mh()?jh(t===Bh.NONE||t===Bh.LOCAL&&Qi(),e,"unsupported-persistence-type"):jh(t===Bh.NONE||Fh(),e,"unsupported-persistence-type")}(this._delegate,e),e){case Bh.SESSION:t=Hl;break;case Bh.LOCAL:t=await rc(ou)._isAvailable()?ou:ql;break;case Bh.NONE:t=sc;break;default:return pa("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return $h(this._delegate,async function(e){var t;if(Io(e.app))return Promise.reject(va(e));const n=Ec(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new rl({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await nl(n,{returnSecureToken:!0}),i=await rl._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return $h(this._delegate,fl(this._delegate,e))}signInWithCustomToken(e){return $h(this._delegate,gl(this._delegate,e))}signInWithEmailAndPassword(e,t){return $h(this._delegate,function(e,t,n){return Io(e.app)?Promise.reject(va(e)):fl(as(e),Gc.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&_l(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return $h(this._delegate,async function(e,t,n){if(Io(e.app))return Promise.reject(va(e));const r=as(e),i=Gc.credentialWithLink(t,n||Ia());return ba(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),fl(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Jh(this._delegate,async function(e,t,n){if(Io(e.app))return Promise.reject(va(e));const r=Ec(e),i=await yu(r,t,as(n));return new vu(i,(e=>fl(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return ed(Uh(),this._delegate,"operation-not-supported-in-this-environment"),$h(this._delegate,async function(e,t,n){if(Io(e.app))return Promise.reject(ma(e,"operation-not-supported-in-this-environment"));const r=Ec(e);ya(e,t,Wc);const i=bu(r,n);return new Cu(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,Gh))}async signInWithRedirect(e){return ed(Uh(),this._delegate,"operation-not-supported-in-this-environment"),await qh(this._delegate),Lu(this._delegate,e,Gh)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await Il(as(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function nd(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&Zh.getOrCreate(e)),error:t,complete:n}}function rd(e,t){const n=function(e,t){const n=Kh();if(!n)return[];const r=oc(zh,e,t);switch(n.getItem(r)){case Bh.NONE:return[sc];case Bh.LOCAL:return[ou,Hl];case Bh.SESSION:return[Hl];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(ou)||n.push(ou),"undefined"!==typeof window)for(const r of[ql,Hl])n.includes(r)||n.push(r);return n.includes(sc)||n.push(sc),n}td.Persistence=Bh;class id{constructor(){this.providerId="phone",this._delegate=new wu(Wh(Zo.auth()))}static credential(e,t){return wu.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}id.PHONE_SIGN_IN_METHOD=wu.PHONE_SIGN_IN_METHOD,id.PROVIDER_ID=wu.PROVIDER_ID;const sd=ba;class od{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zo.app();var r;sd(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new gu(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}var ad;(ad=Zo).INTERNAL.registerComponent(new cs("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new td(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:na,PASSWORD_RESET:ra,RECOVER_EMAIL:ia,REVERT_SECOND_FACTOR_ADDITION:sa,VERIFY_AND_CHANGE_EMAIL:oa,VERIFY_EMAIL:aa}},EmailAuthProvider:Gc,FacebookAuthProvider:$c,GithubAuthProvider:Xc,GoogleAuthProvider:Jc,OAuthProvider:Yc,SAMLAuthProvider:el,PhoneAuthProvider:id,PhoneMultiFactorGenerator:mh,RecaptchaVerifier:od,TwitterAuthProvider:tl,Auth:td,AuthCredential:Dc,Error:Yi}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ad.registerVersion("@firebase/auth-compat","0.5.6");var cd,ld="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ud={},hd=hd||{},dd=ld||self;function fd(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function pd(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var md="closure_uid_"+(1e9*Math.random()>>>0),gd=0;function vd(e,t,n){return e.call.apply(e.bind,arguments)}function yd(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function wd(e,t,n){return(wd=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?vd:yd).apply(null,arguments)}function bd(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function _d(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function Ed(){this.s=this.s,this.o=this.o}Ed.prototype.s=!1,Ed.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,md)&&e[md]||(e[md]=++gd))},Ed.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Id=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Sd(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Td(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(fd(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function kd(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}kd.prototype.h=function(){this.defaultPrevented=!0};var Cd=function(){if(!dd.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};dd.addEventListener("test",e,t),dd.removeEventListener("test",e,t)}catch(n){}return e}();function xd(e){return/^[\s\xa0]*$/.test(e)}function Ad(){var e=dd.navigator;return e&&(e=e.userAgent)?e:""}function Pd(e){return-1!=Ad().indexOf(e)}function Nd(e){return Nd[" "](e),e}Nd[" "]=function(){};var Rd,Dd,Od=Pd("Opera"),Ld=Pd("Trident")||Pd("MSIE"),Fd=Pd("Edge"),Md=Fd||Ld,Ud=Pd("Gecko")&&!(-1!=Ad().toLowerCase().indexOf("webkit")&&!Pd("Edge"))&&!(Pd("Trident")||Pd("MSIE"))&&!Pd("Edge"),Vd=-1!=Ad().toLowerCase().indexOf("webkit")&&!Pd("Edge");function Bd(){var e=dd.document;return e?e.documentMode:void 0}e:{var jd="",zd=function(){var e=Ad();return Ud?/rv:([^\);]+)(\)|;)/.exec(e):Fd?/Edge\/([\d\.]+)/.exec(e):Ld?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Vd?/WebKit\/(\S+)/.exec(e):Od?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(zd&&(jd=zd?zd[1]:""),Ld){var qd=Bd();if(null!=qd&&qd>parseFloat(jd)){Rd=String(qd);break e}}Rd=jd}if(dd.document&&Ld){var Kd=Bd();Dd=Kd||(parseInt(Rd,10)||void 0)}else Dd=void 0;var Hd=Dd;function Gd(e,t){if(kd.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Ud){e:{try{Nd(t.nodeName);var i=!0;break e}catch(xt){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Wd[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Gd.$.h.call(this)}}_d(Gd,kd);var Wd={2:"touch",3:"pen",4:"mouse"};Gd.prototype.h=function(){Gd.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Qd="closure_listenable_"+(1e6*Math.random()|0),Yd=0;function $d(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Yd,this.fa=this.ia=!1}function Jd(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Xd(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Zd(e){const t={};for(const n in e)t[n]=e[n];return t}const ef="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function tf(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<ef.length;t++)n=ef[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function nf(e){this.src=e,this.g={},this.h=0}function rf(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Id(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Jd(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function sf(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}nf.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=sf(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new $d(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var of="closure_lm_"+(1e6*Math.random()|0),af={};function cf(e,t,n,r,i){if(r&&r.once)return uf(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)cf(e,t[s],n,r,i);return null}return n=vf(n),e&&e[Qd]?e.O(t,n,pd(r)?!!r.capture:!!r,i):lf(e,t,n,!1,r,i)}function lf(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=pd(i)?!!i.capture:!!i,a=mf(e);if(a||(e[of]=a=new nf(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=pf;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Cd||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ff(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function uf(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)uf(e,t[s],n,r,i);return null}return n=vf(n),e&&e[Qd]?e.P(t,n,pd(r)?!!r.capture:!!r,i):lf(e,t,n,!0,r,i)}function hf(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)hf(e,t[s],n,r,i);else r=pd(r)?!!r.capture:!!r,n=vf(n),e&&e[Qd]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=sf(s=e.g[t],n,r,i))&&(Jd(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=mf(e))&&(t=e.g[t.toString()],e=-1,t&&(e=sf(t,n,r,i)),(n=-1<e?t[e]:null)&&df(n))}function df(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Qd])rf(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ff(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=mf(t))?(rf(n,e),0==n.h&&(n.src=null,t[of]=null)):Jd(e)}}}function ff(e){return e in af?af[e]:af[e]="on"+e}function pf(e,t){if(e.fa)e=!0;else{t=new Gd(t,this);var n=e.listener,r=e.la||e.src;e.ia&&df(e),e=n.call(r,t)}return e}function mf(e){return(e=e[of])instanceof nf?e:null}var gf="__closure_events_fn_"+(1e9*Math.random()>>>0);function vf(e){return"function"===typeof e?e:(e[gf]||(e[gf]=function(t){return e.handleEvent(t)}),e[gf])}function yf(){Ed.call(this),this.i=new nf(this),this.S=this,this.J=null}function wf(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new kd(t,e);else if(t instanceof kd)t.target=t.target||e;else{var i=t;tf(t=new kd(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=bf(o,r,!0,t)&&i}if(i=bf(o=t.g=e,r,!0,t)&&i,i=bf(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=bf(o=t.g=n[s],r,!1,t)&&i}function bf(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&rf(e.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}_d(yf,Ed),yf.prototype[Qd]=!0,yf.prototype.removeEventListener=function(e,t,n,r){hf(this,e,t,n,r)},yf.prototype.N=function(){if(yf.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Jd(n[r]);delete t.g[e],t.h--}}this.J=null},yf.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},yf.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var _f=dd.JSON.stringify;function Ef(){var e=Af;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var If=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Sf),(e=>e.reset()));class Sf{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Tf(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function kf(e){dd.setTimeout((()=>{throw e}),0)}let Cf,xf=!1,Af=new class{constructor(){this.h=this.g=null}add(e,t){const n=If.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Pf=()=>{const e=dd.Promise.resolve(void 0);Cf=()=>{e.then(Nf)}};var Nf=()=>{for(var e;e=Ef();){try{e.h.call(e.g)}catch(n){kf(n)}var t=If;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}xf=!1};function Rf(e,t){yf.call(this),this.h=e||1,this.g=t||dd,this.j=wd(this.qb,this),this.l=Date.now()}function Df(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Of(e,t,n){if("function"===typeof e)n&&(e=wd(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=wd(e.handleEvent,e)}return 2147483647<Number(t)?-1:dd.setTimeout(e,t||0)}function Lf(e){e.g=Of((()=>{e.g=null,e.i&&(e.i=!1,Lf(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}_d(Rf,yf),(cd=Rf.prototype).ga=!1,cd.T=null,cd.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),wf(this,"tick"),this.ga&&(Df(this),this.start()))}},cd.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},cd.N=function(){Rf.$.N.call(this),Df(this),delete this.g};class Ff extends Ed{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Lf(this)}N(){super.N(),this.g&&(dd.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mf(e){Ed.call(this),this.h=e,this.g={}}_d(Mf,Ed);var Uf=[];function Vf(e,t,n,r){Array.isArray(n)||(n&&(Uf[0]=n.toString()),n=Uf);for(var i=0;i<n.length;i++){var s=cf(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Bf(e){Xd(e.g,(function(e,t){this.g.hasOwnProperty(t)&&df(e)}),e),e.g={}}function jf(){this.g=!0}function zf(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return _f(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}Mf.prototype.N=function(){Mf.$.N.call(this),Bf(this)},Mf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},jf.prototype.Ea=function(){this.g=!1},jf.prototype.info=function(){};var qf={},Kf=null;function Hf(){return Kf=Kf||new yf}function Gf(e){kd.call(this,qf.Ta,e)}function Wf(e){const t=Hf();wf(t,new Gf(t))}function Qf(e,t){kd.call(this,qf.STAT_EVENT,e),this.stat=t}function Yf(e){const t=Hf();wf(t,new Qf(t,e))}function $f(e,t){kd.call(this,qf.Ua,e),this.size=t}function Jf(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return dd.setTimeout((function(){e()}),t)}qf.Ta="serverreachability",_d(Gf,kd),qf.STAT_EVENT="statevent",_d(Qf,kd),qf.Ua="timingevent",_d($f,kd);var Xf={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Zf={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ep(){}function tp(e){return e.h||(e.h=e.i())}function np(){}ep.prototype.h=null;var rp,ip={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function sp(){kd.call(this,"d")}function op(){kd.call(this,"c")}function ap(){}function cp(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Mf(this),this.P=up,e=Md?125:void 0,this.V=new Rf(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new lp}function lp(){this.i=null,this.g="",this.h=!1}_d(sp,kd),_d(op,kd),_d(ap,ep),ap.prototype.g=function(){return new XMLHttpRequest},ap.prototype.i=function(){return{}},rp=new ap;var up=45e3,hp={},dp={};function fp(e,t,n){e.L=1,e.A=Rp(Cp(t)),e.u=n,e.S=!0,pp(e,null)}function pp(e,t){e.G=Date.now(),yp(e),e.B=Cp(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),Hp(n.i,"t",r),e.o=0,n=e.l.J,e.h=new lp,e.g=Gm(e.l,n?t:null,!e.u),0<e.O&&(e.M=new Ff(wd(e.Pa,e,e.g),e.O)),Vf(e.U,e.g,"readystatechange",e.nb),t=e.I?Zd(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Wf(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function mp(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function gp(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=vp(e,n),r==dp){4==t&&(e.s=4,Yf(14),i=!1),zf(e.j,e.m,null,"[Incomplete Response]");break}if(r==hp){e.s=4,Yf(15),zf(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}zf(e.j,e.m,r,null),Ip(e,r)}mp(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,Yf(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Um(t),t.M=!0,Yf(11))):(zf(e.j,e.m,n,"[Invalid Chunked Response]"),Ep(e),_p(e))}function vp(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?dp:(n=Number(t.substring(n,r)),isNaN(n)?hp:(r+=1)+n>t.length?dp:(t=t.slice(r,r+n),e.o=r+n,t))}function yp(e){e.Y=Date.now()+e.P,wp(e,e.P)}function wp(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=Jf(wd(e.lb,e),t)}function bp(e){e.C&&(dd.clearTimeout(e.C),e.C=null)}function _p(e){0==e.l.H||e.J||jm(e.l,e)}function Ep(e){bp(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Df(e.V),Bf(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Ip(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Xp(n.i,e)))if(!e.K&&Xp(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(At){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Bm(n),Pm(n)}Mm(n),Yf(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Jf(wd(n.ib,n),6e3));if(1>=Jp(n.i)&&n.oa){try{n.oa()}catch(At){}n.oa=void 0}}else qm(n,11)}else if((e.K||n.g==e)&&Bm(n),!xd(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let l=i[t];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const t=l[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=l[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=l[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Zp(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Np(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=Hm(r,r.J?r.pa:null,r.Y),o.K){em(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(bp(a),yp(a)),r.g=o}else Fm(r);0<n.j.length&&Rm(n)}else"stop"!=l[0]&&"close"!=l[0]||qm(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?qm(n,7):Am(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}Wf()}catch(At){}}function Sp(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(fd(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(fd(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(fd(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(cd=cp.prototype).setTimeout=function(e){this.P=e},cd.nb=function(e){e=e.target;const t=this.M;t&&3==Im(e)?t.l():this.Pa(e)},cd.Pa=function(e){try{if(e==this.g)e:{const u=Im(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||Md||this.g&&(this.h.h||this.g.ja()||Sm(this.g)))){this.J||4!=u||7==t||Wf(),bp(this);var n=this.g.da();this.ca=n;t:if(mp(this)){var r=Sm(this.g);e="";var i=r.length,s=4==Im(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ep(this),_p(this);var o="";break t}this.h.i=new dd.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!xd(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.s=3,Yf(12),Ep(this),_p(this);break e}zf(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ip(this,n)}this.S?(gp(this,u,o),Md&&this.i&&3==u&&(Vf(this.U,this.V,"tick",this.mb),this.V.start())):(zf(this.j,this.m,o,null),Ip(this,o)),4==u&&Ep(this),this.i&&!this.J&&(4==u?jm(this.l,this):(this.i=!1,yp(this)))}else(function(e){const t={};e=(e.g&&2<=Im(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(xd(e[r]))continue;var n=Tf(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Yf(12)):(this.s=0,Yf(13)),Ep(this),_p(this)}}}catch(u){}},cd.mb=function(){if(this.g){var e=Im(this.g),t=this.g.ja();this.o<t.length&&(bp(this),gp(this,e,t),this.i&&4!=e&&yp(this))}},cd.cancel=function(){this.J=!0,Ep(this)},cd.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(Wf(),Yf(17)),Ep(this),this.s=2,_p(this)):wp(this,this.Y-e)};var Tp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kp(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof kp){this.h=e.h,xp(this,e.j),this.s=e.s,this.g=e.g,Ap(this,e.m),this.l=e.l;var t=e.i,n=new jp;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Pp(this,n),this.o=e.o}else e&&(t=String(e).match(Tp))?(this.h=!1,xp(this,t[1]||"",!0),this.s=Dp(t[2]||""),this.g=Dp(t[3]||"",!0),Ap(this,t[4]),this.l=Dp(t[5]||"",!0),Pp(this,t[6]||"",!0),this.o=Dp(t[7]||"")):(this.h=!1,this.i=new jp(null,this.h))}function Cp(e){return new kp(e)}function xp(e,t,n){e.j=n?Dp(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ap(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Pp(e,t,n){t instanceof jp?(e.i=t,function(e,t){t&&!e.j&&(zp(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(qp(this,t),Hp(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Op(t,Vp)),e.i=new jp(t,e.h))}function Np(e,t,n){e.i.set(t,n)}function Rp(e){return Np(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Dp(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Op(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Lp),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Lp(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}kp.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Op(t,Fp,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Op(t,Fp,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Op(n,"/"==n.charAt(0)?Up:Mp,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Op(n,Bp)),e.join("")};var Fp=/[#\/\?@]/g,Mp=/[#\?:]/g,Up=/[#\?]/g,Vp=/[#\?@]/g,Bp=/#/g;function jp(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function zp(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function qp(e,t){zp(e),t=Gp(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Kp(e,t){return zp(e),t=Gp(e,t),e.g.has(t)}function Hp(e,t,n){qp(e,t),0<n.length&&(e.i=null,e.g.set(Gp(e,t),Sd(n)),e.h+=n.length)}function Gp(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(cd=jp.prototype).add=function(e,t){zp(this),this.i=null,e=Gp(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},cd.forEach=function(e,t){zp(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},cd.ta=function(){zp(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},cd.Z=function(e){zp(this);let t=[];if("string"===typeof e)Kp(this,e)&&(t=t.concat(this.g.get(Gp(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},cd.set=function(e,t){return zp(this),this.i=null,Kp(this,e=Gp(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},cd.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},cd.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var Wp=class{constructor(e,t){this.g=e,this.map=t}};function Qp(e){this.l=e||Yp,dd.PerformanceNavigationTiming?e=0<(e=dd.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(dd.g&&dd.g.Ka&&dd.g.Ka()&&dd.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Yp=10;function $p(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Jp(e){return e.h?1:e.g?e.g.size:0}function Xp(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Zp(e,t){e.g?e.g.add(t):e.h=t}function em(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function tm(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Sd(e.i)}Qp.prototype.cancel=function(){if(this.i=tm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var nm,rm=class{stringify(e){return dd.JSON.stringify(e,void 0)}parse(e){return dd.JSON.parse(e,void 0)}};function im(){this.g=new rm}function sm(e,t,n){const r=n||"";try{Sp(e,(function(e,n){let i=e;pd(e)&&(i=_f(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(CR){throw t.push(r+"type="+encodeURIComponent("_badmap")),CR}}function om(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(xt){}}function am(e){this.l=e.ec||null,this.j=e.ob||!1}function cm(e,t){yf.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=lm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}_d(am,ep),am.prototype.g=function(){return new cm(this.l,this.j)},am.prototype.i=(nm={},function(){return nm}),_d(cm,yf);var lm=0;function um(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function hm(e){e.readyState=4,e.l=null,e.j=null,e.A=null,dm(e)}function dm(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(cd=cm.prototype).open=function(e,t){if(this.readyState!=lm)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,dm(this)},cd.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||dd).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},cd.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,hm(this)),this.readyState=lm},cd.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,dm(this)),this.g&&(this.readyState=3,dm(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof dd.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;um(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},cd.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?hm(this):dm(this),3==this.readyState&&um(this)}},cd.Za=function(e){this.g&&(this.response=this.responseText=e,hm(this))},cd.Ya=function(e){this.g&&(this.response=e,hm(this))},cd.ka=function(){this.g&&hm(this)},cd.setRequestHeader=function(e,t){this.v.append(e,t)},cd.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},cd.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(cm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var fm=dd.JSON.parse;function pm(e){yf.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=mm,this.L=this.M=!1}_d(pm,yf);var mm="",gm=/^https?$/i,vm=["POST","PUT"];function ym(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,wm(e),_m(e)}function wm(e){e.F||(e.F=!0,wf(e,"complete"),wf(e,"error"))}function bm(e){if(e.h&&"undefined"!=typeof hd&&(!e.C[1]||4!=Im(e)||2!=e.da()))if(e.v&&4==Im(e))Of(e.La,0,e);else if(wf(e,"readystatechange"),4==Im(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(Tp)[1]||null;!i&&dd.self&&dd.self.location&&(i=dd.self.location.protocol.slice(0,-1)),r=!gm.test(i?i.toLowerCase():"")}n=r}if(n)wf(e,"complete"),wf(e,"success");else{e.m=6;try{var s=2<Im(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",wm(e)}}finally{_m(e)}}}function _m(e,t){if(e.g){Em(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||wf(e,"ready");try{n.onreadystatechange=r}catch(CR){}}}function Em(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(dd.clearTimeout(e.A),e.A=null)}function Im(e){return e.g?e.g.readyState:0}function Sm(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case mm:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Tm(e){let t="";return Xd(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function km(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Tm(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Np(e,t,n))}function Cm(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function xm(e){this.Ga=0,this.j=[],this.l=new jf,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Cm("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Cm("baseRetryDelayMs",5e3,e),this.hb=Cm("retryDelaySeedMs",1e4,e),this.eb=Cm("forwardChannelMaxRetries",2,e),this.xa=Cm("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Qp(e&&e.concurrentRequestLimit),this.Ja=new im,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Am(e){if(Nm(e),3==e.H){var t=e.W++,n=Cp(e.I);if(Np(n,"SID",e.K),Np(n,"RID",t),Np(n,"TYPE","terminate"),Om(e,n),(t=new cp(e,e.l,t)).L=2,t.A=Rp(Cp(n)),n=!1,dd.navigator&&dd.navigator.sendBeacon)try{n=dd.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&dd.Image&&((new Image).src=t.A,n=!0),n||(t.g=Gm(t.l,null),t.g.ha(t.A)),t.G=Date.now(),yp(t)}Km(e)}function Pm(e){e.g&&(Um(e),e.g.cancel(),e.g=null)}function Nm(e){Pm(e),e.u&&(dd.clearTimeout(e.u),e.u=null),Bm(e),e.i.cancel(),e.m&&("number"===typeof e.m&&dd.clearTimeout(e.m),e.m=null)}function Rm(e){if(!$p(e.i)&&!e.m){e.m=!0;var t=e.Na;Cf||Pf(),xf||(Cf(),xf=!0),Af.add(t,e),e.C=0}}function Dm(e,t){var n;n=t?t.m:e.W++;const r=Cp(e.I);Np(r,"SID",e.K),Np(r,"RID",n),Np(r,"AID",e.V),Om(e,r),e.o&&e.s&&km(r,e.o,e.s),n=new cp(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Lm(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Zp(e.i,n),fp(n,r,t)}function Om(e,t){e.na&&Xd(e.na,(function(e,n){Np(t,n,e)})),e.h&&Sp({},(function(e,n){Np(t,n,e)}))}function Lm(e,t,n){n=Math.min(e.j.length,n);var r=e.h?wd(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{sm(a,e,"req"+n+"_")}catch(Xt){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Fm(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Cf||Pf(),xf||(Cf(),xf=!0),Af.add(t,e),e.A=0}}function Mm(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Jf(wd(e.Ma,e),zm(e,e.A)),e.A++,!0)}function Um(e){null!=e.B&&(dd.clearTimeout(e.B),e.B=null)}function Vm(e){e.g=new cp(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Cp(e.wa);Np(t,"RID","rpc"),Np(t,"SID",e.K),Np(t,"AID",e.V),Np(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Np(t,"TO",e.qa),Np(t,"TYPE","xmlhttp"),Om(e,t),e.o&&e.s&&km(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Rp(Cp(t)),n.u=null,n.S=!0,pp(n,e)}function Bm(e){null!=e.v&&(dd.clearTimeout(e.v),e.v=null)}function jm(e,t){var n=null;if(e.g==t){Bm(e),Um(e),e.g=null;var r=2}else{if(!Xp(e.i,t))return;n=t.F,em(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;wf(r=Hf(),new $f(r,n)),Rm(e)}else Fm(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Jp(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Jf(wd(e.Na,e,t),zm(e,e.C)),e.C++,!0))}(e,t)||2==r&&Mm(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:qm(e,5);break;case 4:qm(e,10);break;case 3:qm(e,6);break;default:qm(e,2)}}function zm(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function qm(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=wd(e.pb,e);n||(n=new kp("//www.google.com/images/cleardot.gif"),dd.location&&"http"==dd.location.protocol||xp(n,"https"),Rp(n)),function(e,t){const n=new jf;if(dd.Image){const r=new Image;r.onload=bd(om,n,r,"TestLoadImage: loaded",!0,t),r.onerror=bd(om,n,r,"TestLoadImage: error",!1,t),r.onabort=bd(om,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=bd(om,n,r,"TestLoadImage: timeout",!1,t),dd.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Yf(2);e.H=0,e.h&&e.h.za(t),Km(e),Nm(e)}function Km(e){if(e.H=0,e.ma=[],e.h){const t=tm(e.i);0==t.length&&0==e.j.length||(Td(e.ma,t),Td(e.ma,e.j),e.i.i.length=0,Sd(e.j),e.j.length=0),e.h.ya()}}function Hm(e,t,n){var r=n instanceof kp?Cp(n):new kp(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Ap(r,r.m);else{var i=dd.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new kp(null);r&&xp(s,r),t&&(s.g=t),i&&Ap(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&Np(r,n,t),Np(r,"VER",e.ra),Om(e,r),r}function Gm(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new pm(new am({ob:n})):new pm(e.va)).Oa(e.J),t}function Wm(){}function Qm(){if(Ld&&!(10<=Number(Hd)))throw Error("Environmental error: no available transport.")}function Ym(e,t){yf.call(this),this.g=new xm(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!xd(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!xd(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Xm(this)}function $m(e){sp.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Jm(){op.call(this),this.status=1}function Xm(e){this.g=e}function Zm(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function eg(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function tg(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(cd=pm.prototype).Oa=function(e){this.M=e},cd.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():rp.g(),this.C=this.u?tp(this.u):tp(rp),this.g.onreadystatechange=wd(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(xt){return void ym(this,xt)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=dd.FormData&&e instanceof dd.FormData,!(0<=Id(vm,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Em(this),0<this.B&&((this.L=function(e){return Ld&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=wd(this.ua,this)):this.A=Of(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(xt){ym(this,xt)}},cd.ua=function(){"undefined"!=typeof hd&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,wf(this,"timeout"),this.abort(8))},cd.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,wf(this,"complete"),wf(this,"abort"),_m(this))},cd.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),_m(this,!0)),pm.$.N.call(this)},cd.La=function(){this.s||(this.G||this.v||this.l?bm(this):this.kb())},cd.kb=function(){bm(this)},cd.isActive=function(){return!!this.g},cd.da=function(){try{return 2<Im(this)?this.g.status:-1}catch(nm){return-1}},cd.ja=function(){try{return this.g?this.g.responseText:""}catch(nm){return""}},cd.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),fm(t)}},cd.Ia=function(){return this.m},cd.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(cd=xm.prototype).ra=8,cd.H=1,cd.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new cp(this,this.l,e);let s=this.s;if(this.U&&(s?(s=Zd(s),tf(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Lm(this,i,t),Np(n=Cp(this.I),"RID",e),Np(n,"CVER",22),this.F&&Np(n,"X-HTTP-Session-Id",this.F),Om(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Tm(s)))+"&"+t:this.o&&km(n,this.o,s)),Zp(this.i,i),this.bb&&Np(n,"TYPE","init"),this.P?(Np(n,"$req",t),Np(n,"SID","null"),i.aa=!0,fp(i,n,null)):fp(i,n,t),this.H=2}}else 3==this.H&&(e?Dm(this,e):0==this.j.length||$p(this.i)||Dm(this))},cd.Ma=function(){if(this.u=null,Vm(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Jf(wd(this.jb,this),e)}},cd.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Yf(10),Pm(this),Vm(this))},cd.ib=function(){null!=this.v&&(this.v=null,Pm(this),Mm(this),Yf(19))},cd.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Yf(2)):(this.l.info("Failed to ping google.com"),Yf(1))},cd.isActive=function(){return!!this.h&&this.h.isActive(this)},(cd=Wm.prototype).Ba=function(){},cd.Aa=function(){},cd.za=function(){},cd.ya=function(){},cd.isActive=function(){return!0},cd.Va=function(){},Qm.prototype.g=function(e,t){return new Ym(e,t)},_d(Ym,yf),Ym.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Yf(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Hm(e,null,e.Y),Rm(e)},Ym.prototype.close=function(){Am(this.g)},Ym.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=_f(e),e=n);t.j.push(new Wp(t.fb++,e)),3==t.H&&Rm(t)},Ym.prototype.N=function(){this.g.h=null,delete this.j,Am(this.g),delete this.g,Ym.$.N.call(this)},_d($m,sp),_d(Jm,op),_d(Xm,Wm),Xm.prototype.Ba=function(){wf(this.g,"a")},Xm.prototype.Aa=function(e){wf(this.g,new $m(e))},Xm.prototype.za=function(e){wf(this.g,new Jm)},Xm.prototype.ya=function(){wf(this.g,"b")},_d(Zm,(function(){this.blockSize=-1})),Zm.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Zm.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)eg(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){eg(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){eg(this,r),i=0;break}}this.h=i,this.i+=t},Zm.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var ng={};function rg(e){return-128<=e&&128>e?function(e,t){var n=ng;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new tg([0|e],0>e?-1:0)})):new tg([0|e],0>e?-1:0)}function ig(e){if(isNaN(e)||!isFinite(e))return og;if(0>e)return hg(ig(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=sg;return new tg(t,0)}var sg=4294967296,og=rg(0),ag=rg(1),cg=rg(16777216);function lg(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function ug(e){return-1==e.h}function hg(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new tg(n,~e.h).add(ag)}function dg(e,t){return e.add(hg(t))}function fg(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function pg(e,t){this.g=e,this.h=t}function mg(e,t){if(lg(t))throw Error("division by zero");if(lg(e))return new pg(og,og);if(ug(e))return t=mg(hg(e),t),new pg(hg(t.g),hg(t.h));if(ug(t))return t=mg(e,hg(t)),new pg(hg(t.g),t.h);if(30<e.g.length){if(ug(e)||ug(t))throw Error("slowDivide_ only works with positive integers.");for(var n=ag,r=t;0>=r.X(e);)n=gg(n),r=gg(r);var i=vg(n,1),s=vg(r,1);for(r=vg(r,2),n=vg(n,2);!lg(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=vg(r,1),n=vg(n,1)}return t=dg(e,i.R(t)),new pg(i,t)}for(i=og;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=ig(n)).R(t);ug(o)||0<o.X(e);)o=(s=ig(n-=r)).R(t);lg(s)&&(s=ag),i=i.add(s),e=dg(e,o)}return new pg(i,e)}function gg(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new tg(n,e.h)}function vg(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new tg(i,e.h)}(cd=tg.prototype).ea=function(){if(ug(this))return-hg(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:sg+r)*t,t*=sg}return e},cd.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(lg(this))return"0";if(ug(this))return"-"+hg(this).toString(e);for(var t=ig(Math.pow(e,6)),n=this,r="";;){var i=mg(n,t).g,s=((0<(n=dg(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(lg(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},cd.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},cd.X=function(e){return ug(e=dg(this,e))?-1:lg(e)?0:1},cd.abs=function(){return ug(this)?hg(this):this},cd.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new tg(n,-2147483648&n[n.length-1]?-1:0)},cd.R=function(e){if(lg(this)||lg(e))return og;if(ug(this))return ug(e)?hg(this).R(hg(e)):hg(hg(this).R(e));if(ug(e))return hg(this.R(hg(e)));if(0>this.X(cg)&&0>e.X(cg))return ig(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,c=65535&e.D(i);n[2*r+2*i]+=o*c,fg(n,2*r+2*i),n[2*r+2*i+1]+=s*c,fg(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,fg(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,fg(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new tg(n,0)},cd.gb=function(e){return mg(this,e).h},cd.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new tg(n,this.h&e.h)},cd.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new tg(n,this.h|e.h)},cd.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new tg(n,this.h^e.h)},Qm.prototype.createWebChannel=Qm.prototype.g,Ym.prototype.send=Ym.prototype.u,Ym.prototype.open=Ym.prototype.m,Ym.prototype.close=Ym.prototype.close,Xf.NO_ERROR=0,Xf.TIMEOUT=8,Xf.HTTP_ERROR=6,Zf.COMPLETE="complete",np.EventType=ip,ip.OPEN="a",ip.CLOSE="b",ip.ERROR="c",ip.MESSAGE="d",yf.prototype.listen=yf.prototype.O,pm.prototype.listenOnce=pm.prototype.P,pm.prototype.getLastError=pm.prototype.Sa,pm.prototype.getLastErrorCode=pm.prototype.Ia,pm.prototype.getStatus=pm.prototype.da,pm.prototype.getResponseJson=pm.prototype.Wa,pm.prototype.getResponseText=pm.prototype.ja,pm.prototype.send=pm.prototype.ha,pm.prototype.setWithCredentials=pm.prototype.Oa,Zm.prototype.digest=Zm.prototype.l,Zm.prototype.reset=Zm.prototype.reset,Zm.prototype.update=Zm.prototype.j,tg.prototype.add=tg.prototype.add,tg.prototype.multiply=tg.prototype.R,tg.prototype.modulo=tg.prototype.gb,tg.prototype.compare=tg.prototype.X,tg.prototype.toNumber=tg.prototype.ea,tg.prototype.toString=tg.prototype.toString,tg.prototype.getBits=tg.prototype.D,tg.fromNumber=ig,tg.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return hg(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=ig(Math.pow(n,8)),i=og,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=ig(Math.pow(n,o)),i=i.R(o).add(ig(a))):i=(i=i.R(r)).add(ig(a))}return i};var yg=ud.createWebChannelTransport=function(){return new Qm},wg=ud.getStatEventTarget=function(){return Hf()},bg=ud.ErrorCode=Xf,_g=ud.EventType=Zf,Eg=ud.Event=qf,Ig=ud.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Sg=(ud.FetchXmlHttpFactory=am,ud.WebChannel=np),Tg=ud.XhrIo=pm,kg=ud.Md5=Zm,Cg=ud.Integer=tg;const xg="@firebase/firestore";class Ag{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ag.UNAUTHENTICATED=new Ag(null),Ag.GOOGLE_CREDENTIALS=new Ag("google-credentials-uid"),Ag.FIRST_PARTY=new Ag("first-party-uid"),Ag.MOCK_USER=new Ag("mock-user");let Pg="10.11.0";const Ng=new ws("@firebase/firestore");function Rg(){return Ng.logLevel}function Dg(e){if(Ng.logLevel<=ps.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Fg);Ng.debug("Firestore (".concat(Pg,"): ").concat(e),...i)}}function Og(e){if(Ng.logLevel<=ps.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Fg);Ng.error("Firestore (".concat(Pg,"): ").concat(e),...i)}}function Lg(e){if(Ng.logLevel<=ps.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Fg);Ng.warn("Firestore (".concat(Pg,"): ").concat(e),...i)}}function Fg(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Mg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Pg,") INTERNAL ASSERTION FAILED: ")+e;throw Og(t),new Error(t)}function Ug(e,t){e||Mg()}function Vg(e,t){return e}const Bg={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class jg extends Yi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class zg{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class qg{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Kg{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ag.UNAUTHENTICATED)))}shutdown(){}}class Hg{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Gg{constructor(e){this.t=e,this.currentUser=Ag.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new zg;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new zg,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Dg("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Dg("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new zg)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Dg("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ug("string"==typeof t.accessToken),new qg(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ug(null===e||"string"==typeof e),new Ag(e)}}class Wg{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Ag.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Qg{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Wg(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Ag.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Yg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $g{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Dg("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Dg("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Dg("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Dg("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Ug("string"==typeof e.token),this.R=e.token,new Yg(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Jg(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Xg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Jg(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Zg(e,t){return e<t?-1:e>t?1:0}function ev(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function tv(e){return e+"\0"}class nv{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new jg(Bg.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new jg(Bg.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new jg(Bg.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new jg(Bg.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return nv.fromMillis(Date.now())}static fromDate(e){return nv.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new nv(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Zg(this.nanoseconds,e.nanoseconds):Zg(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class rv{constructor(e){this.timestamp=e}static fromTimestamp(e){return new rv(e)}static min(){return new rv(new nv(0,0))}static max(){return new rv(new nv(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class iv{constructor(e,t,n){void 0===t?t=0:t>e.length&&Mg(),void 0===n?n=e.length-t:n>e.length-t&&Mg(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===iv.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof iv?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class sv extends iv{construct(e,t,n){return new sv(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new jg(Bg.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new sv(e)}static emptyPath(){return new sv([])}}const ov=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class av extends iv{construct(e,t,n){return new av(e,t,n)}static isValidIdentifier(e){return ov.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),av.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new av(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new jg(Bg.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new jg(Bg.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new jg(Bg.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new jg(Bg.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new av(t)}static emptyPath(){return new av([])}}class cv{constructor(e){this.path=e}static fromPath(e){return new cv(sv.fromString(e))}static fromName(e){return new cv(sv.fromString(e).popFirst(5))}static empty(){return new cv(sv.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===sv.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return sv.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new cv(new sv(e.slice()))}}class lv{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function uv(e){return e.fields.find((e=>2===e.kind))}function hv(e){return e.fields.filter((e=>2!==e.kind))}lv.UNKNOWN_ID=-1;class dv{constructor(e,t){this.fieldPath=e,this.kind=t}}class fv{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new fv(0,gv.min())}}function pv(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=rv.fromTimestamp(1e9===r?new nv(n+1,0):new nv(n,r));return new gv(i,cv.empty(),t)}function mv(e){return new gv(e.readTime,e.key,-1)}class gv{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new gv(rv.min(),cv.empty(),-1)}static max(){return new gv(rv.max(),cv.empty(),-1)}}function vv(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=cv.comparator(e.documentKey,t.documentKey),0!==n?n:Zg(e.largestBatchId,t.largestBatchId))}const yv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function bv(e){if(e.code!==Bg.FAILED_PRECONDITION||e.message!==yv)throw e;Dg("LocalStore","Unexpectedly lost primary lease")}class _v{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Mg(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new _v(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof _v?t:_v.resolve(t)}catch(e){return _v.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):_v.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):_v.reject(t)}static resolve(e){return new _v(((t,n)=>{t(e)}))}static reject(e){return new _v(((t,n)=>{n(e)}))}static waitFor(e){return new _v(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=_v.resolve(!1);for(const n of e)t=t.next((e=>e?_v.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new _v(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const c=a;t(e[c]).next((e=>{s[c]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new _v(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class Ev{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new zg,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Tv(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=Pv(t.target.error);this.V.reject(new Tv(e,n))}}static open(e,t,n,r){try{return new Ev(t,e.transaction(r,n))}catch(e){throw new Tv(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Dg("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Cv(t)}}class Iv{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===Iv.S(ji())&&Og("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Dg("SimpleDb","Removing database:",e),xv(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Qi())return!1;if(Iv.C())return!0;const e=ji(),t=Iv.S(e),n=0<t&&t<10,r=Iv.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(Dg("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Tv(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new jg(Bg.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new jg(Bg.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Tv(e,r))},r.onupgradeneeded=e=>{Dg("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{Dg("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.L&&(this.db.onversionchange=e=>this.L(e)),this.db}B(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.O(e);const t=Ev.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),_v.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(Dg("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Sv{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return xv(this.k.delete())}}class Tv extends jg{constructor(e,t){super(Bg.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function kv(e){return"IndexedDbTransactionError"===e.name}class Cv{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Dg("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Dg("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),xv(n)}add(e){return Dg("SimpleDb","ADD",this.store.name,e,e),xv(this.store.add(e))}get(e){return xv(this.store.get(e)).next((t=>(void 0===t&&(t=null),Dg("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Dg("SimpleDb","DELETE",this.store.name,e),xv(this.store.delete(e))}count(){return Dg("SimpleDb","COUNT",this.store.name),xv(this.store.count())}W(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new _v(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new _v(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){Dg("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new _v(((n,r)=>{t.onerror=e=>{const t=Pv(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new _v(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Sv(i),o=t(i.primaryKey,i.value,s);if(o instanceof _v){const e=o.catch((e=>(s.done(),_v.reject(e))));n.push(e)}s.isDone?r():null===s.$?i.continue():i.continue(s.$)}})).next((()=>_v.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function xv(e){return new _v(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Pv(e.target.error);n(t)}}))}let Av=!1;function Pv(e){const t=Iv.S(ji());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new jg("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Av||(Av=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Nv{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){Dg("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Dg("IndexBackfiller","Documents written: ".concat(await this.X.te()))}catch(e){kv(e)?Dg("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await bv(e)}await this.ee(6e4)}))}}class Rv{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let r=t,i=!0;return _v.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Dg("IndexBackfiller","Processing collection: ".concat(t)),this.re(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ie(r,n))).next((n=>(Dg("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=mv(t);vv(r,n)>0&&(n=r)})),new gv(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Dv{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function Ov(e){return null==e}function Lv(e){return 0===e&&1/e==-1/0}function Fv(e){return"number"==typeof e&&Number.isInteger(e)&&!Lv(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Mv(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Vv(t)),t=Uv(e.get(n),t);return Vv(t)}function Uv(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Vv(e){return e+"\x01\x01"}function Bv(e){const t=e.length;if(Ug(t>=2),2===t)return Ug("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),sv.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&Mg(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:Mg()}s=t+2}return new sv(r)}Dv._e=-1;const jv=["userId","batchId"];function zv(e,t){return[e,Mv(t)]}function qv(e,t,n){return[e,Mv(t),n]}const Kv={},Hv=["prefixPath","collectionGroup","readTime","documentId"],Gv=["prefixPath","collectionGroup","documentId"],Wv=["collectionGroup","readTime","prefixPath","documentId"],Qv=["canonicalId","targetId"],Yv=["targetId","path"],$v=["path","targetId"],Jv=["collectionId","parent"],Xv=["indexId","uid"],Zv=["uid","sequenceNumber"],ey=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ty=["indexId","uid","orderedDocumentKey"],ny=["userId","collectionPath","documentId"],ry=["userId","collectionPath","largestBatchId"],iy=["userId","collectionGroup","largestBatchId"],sy=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],oy=[...sy,"documentOverlays"],ay=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],cy=ay,ly=[...cy,"indexConfiguration","indexState","indexEntries"],uy=ly;class hy extends wv{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function dy(e,t){const n=Vg(e);return Iv.M(n.ae,t)}function fy(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function py(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function my(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class gy{constructor(e,t){this.comparator=e,this.root=t||yy.EMPTY}insert(e,t){return new gy(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,yy.BLACK,null,null))}remove(e){return new gy(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yy.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vy(this.root,e,this.comparator,!1)}getReverseIterator(){return new vy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vy(this.root,e,this.comparator,!0)}}class vy{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yy{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:yy.RED,this.left=null!=r?r:yy.EMPTY,this.right=null!=i?i:yy.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new yy(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return yy.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return yy.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yy.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yy.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Mg();if(this.right.isRed())throw Mg();const e=this.left.check();if(e!==this.right.check())throw Mg();return e+(this.isRed()?0:1)}}yy.EMPTY=null,yy.RED=!0,yy.BLACK=!1,yy.EMPTY=new class{constructor(){this.size=0}get key(){throw Mg()}get value(){throw Mg()}get color(){throw Mg()}get left(){throw Mg()}get right(){throw Mg()}copy(e,t,n,r,i){return this}insert(e,t,n){return new yy(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class wy{constructor(e){this.comparator=e,this.data=new gy(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new by(this.data.getIterator())}getIteratorFrom(e){return new by(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof wy))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new wy(this.comparator);return t.data=e,t}}class by{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function _y(e){return e.hasNext()?e.getNext():void 0}class Ey{constructor(e){this.fields=e,e.sort(av.comparator)}static empty(){return new Ey([])}unionWith(e){let t=new wy(av.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Ey(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ev(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Iy extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Sy{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Iy("Invalid base64 string: "+e):e}}(e);return new Sy(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Sy(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Zg(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Sy.EMPTY_BYTE_STRING=new Sy("");const Ty=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ky(e){if(Ug(!!e),"string"==typeof e){let t=0;const n=Ty.exec(e);if(Ug(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Cy(e.seconds),nanos:Cy(e.nanos)}}function Cy(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function xy(e){return"string"==typeof e?Sy.fromBase64String(e):Sy.fromUint8Array(e)}function Ay(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Py(e){const t=e.mapValue.fields.__previous_value__;return Ay(t)?Py(t):t}function Ny(e){const t=ky(e.mapValue.fields.__local_write_time__.timestampValue);return new nv(t.seconds,t.nanos)}class Ry{constructor(e,t,n,r,i,s,o,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class Dy{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Dy("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Dy&&e.projectId===this.projectId&&e.database===this.database}}const Oy={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ly={nullValue:"NULL_VALUE"};function Fy(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ay(e)?4:$y(e)?9007199254740991:10:Mg()}function My(e,t){if(e===t)return!0;const n=Fy(e);if(n!==Fy(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ny(e).isEqual(Ny(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=ky(e.timestampValue),r=ky(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return xy(e.bytesValue).isEqual(xy(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Cy(e.geoPointValue.latitude)===Cy(t.geoPointValue.latitude)&&Cy(e.geoPointValue.longitude)===Cy(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Cy(e.integerValue)===Cy(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Cy(e.doubleValue),r=Cy(t.doubleValue);return n===r?Lv(n)===Lv(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ev(e.arrayValue.values||[],t.arrayValue.values||[],My);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(fy(n)!==fy(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!My(n[i],r[i])))return!1;return!0}(e,t);default:return Mg()}}function Uy(e,t){return void 0!==(e.values||[]).find((e=>My(e,t)))}function Vy(e,t){if(e===t)return 0;const n=Fy(e),r=Fy(t);if(n!==r)return Zg(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Zg(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Cy(e.integerValue||e.doubleValue),r=Cy(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return By(e.timestampValue,t.timestampValue);case 4:return By(Ny(e),Ny(t));case 5:return Zg(e.stringValue,t.stringValue);case 6:return function(e,t){const n=xy(e),r=xy(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Zg(n[i],r[i]);if(0!==e)return e}return Zg(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Zg(Cy(e.latitude),Cy(t.latitude));return 0!==n?n:Zg(Cy(e.longitude),Cy(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Vy(n[i],r[i]);if(e)return e}return Zg(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Oy.mapValue&&t===Oy.mapValue)return 0;if(e===Oy.mapValue)return 1;if(t===Oy.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Zg(r[o],s[o]);if(0!==e)return e;const t=Vy(n[r[o]],i[s[o]]);if(0!==t)return t}return Zg(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Mg()}}function By(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Zg(e,t);const n=ky(e),r=ky(t),i=Zg(n.seconds,r.seconds);return 0!==i?i:Zg(n.nanos,r.nanos)}function jy(e){return zy(e)}function zy(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=ky(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return xy(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return cv.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=zy(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(zy(e.fields[i]));return n+"}"}(e.mapValue):Mg()}function qy(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Ky(e){return!!e&&"integerValue"in e}function Hy(e){return!!e&&"arrayValue"in e}function Gy(e){return!!e&&"nullValue"in e}function Wy(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Qy(e){return!!e&&"mapValue"in e}function Yy(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return py(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Yy(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Yy(e.arrayValue.values[n]);return t}return Object.assign({},e)}function $y(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Jy(e){return"nullValue"in e?Ly:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?qy(Dy.empty(),cv.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Mg()}function Xy(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?qy(Dy.empty(),cv.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Oy:Mg()}function Zy(e,t){const n=Vy(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function ew(e,t){const n=Vy(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class tw{constructor(e){this.value=e}static empty(){return new tw({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Qy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yy(t)}setAll(e){let t=av.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Yy(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Qy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return My(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Qy(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){py(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new tw(Yy(this.value))}}function nw(e){const t=[];return py(e.fields,((e,n)=>{const r=new av([e]);if(Qy(n)){const e=nw(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Ey(t)}class rw{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new rw(e,0,rv.min(),rv.min(),rv.min(),tw.empty(),0)}static newFoundDocument(e,t,n,r){return new rw(e,1,t,rv.min(),n,r,0)}static newNoDocument(e,t){return new rw(e,2,t,rv.min(),rv.min(),tw.empty(),0)}static newUnknownDocument(e,t){return new rw(e,3,t,rv.min(),rv.min(),tw.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(rv.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tw.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tw.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=rv.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof rw&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rw(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class iw{constructor(e,t){this.position=e,this.inclusive=t}}function sw(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?cv.comparator(cv.fromName(o.referenceValue),n.key):Vy(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function ow(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!My(e.position[n],t.position[n]))return!1;return!0}class aw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function cw(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class lw{}class uw extends lw{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new bw(e,t,n):"array-contains"===t?new Sw(e,n):"in"===t?new Tw(e,n):"not-in"===t?new kw(e,n):"array-contains-any"===t?new Cw(e,n):new uw(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new _w(e,n):new Ew(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Vy(t,this.value)):null!==t&&Fy(this.value)===Fy(t)&&this.matchesComparison(Vy(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Mg()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hw extends lw{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new hw(e,t)}matches(e){return dw(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function dw(e){return"and"===e.op}function fw(e){return"or"===e.op}function pw(e){return mw(e)&&dw(e)}function mw(e){for(const t of e.filters)if(t instanceof hw)return!1;return!0}function gw(e){if(e instanceof uw)return e.field.canonicalString()+e.op.toString()+jy(e.value);if(pw(e))return e.filters.map((e=>gw(e))).join(",");{const t=e.filters.map((e=>gw(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function vw(e,t){return e instanceof uw?function(e,t){return t instanceof uw&&e.op===t.op&&e.field.isEqual(t.field)&&My(e.value,t.value)}(e,t):e instanceof hw?function(e,t){return t instanceof hw&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&vw(n,t.filters[r])),!0)}(e,t):void Mg()}function yw(e,t){const n=e.filters.concat(t);return hw.create(n,e.op)}function ww(e){return e instanceof uw?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(jy(e.value))}(e):e instanceof hw?function(e){return e.op.toString()+" {"+e.getFilters().map(ww).join(" ,")+"}"}(e):"Filter"}class bw extends uw{constructor(e,t,n){super(e,t,n),this.key=cv.fromName(n.referenceValue)}matches(e){const t=cv.comparator(e.key,this.key);return this.matchesComparison(t)}}class _w extends uw{constructor(e,t){super(e,"in",t),this.keys=Iw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Ew extends uw{constructor(e,t){super(e,"not-in",t),this.keys=Iw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Iw(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>cv.fromName(e.referenceValue)))}class Sw extends uw{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Hy(t)&&Uy(t.arrayValue,this.value)}}class Tw extends uw{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Uy(this.value.arrayValue,t)}}class kw extends uw{constructor(e,t){super(e,"not-in",t)}matches(e){if(Uy(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Uy(this.value.arrayValue,t)}}class Cw extends uw{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Hy(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Uy(this.value.arrayValue,e)))}}class xw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ce=null}}function Aw(e){return new xw(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Pw(e){const t=Vg(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>gw(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Ov(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>jy(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>jy(e))).join(",")),t.ce=e}return t.ce}function Nw(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!cw(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!vw(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ow(e.startAt,t.startAt)&&ow(e.endAt,t.endAt)}function Rw(e){return cv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Dw(e,t){return e.filters.filter((e=>e instanceof uw&&e.field.isEqual(t)))}function Ow(e,t,n){let r=Ly,i=!0;for(const s of Dw(e,t)){let e=Ly,t=!0;switch(s.op){case"<":case"<=":e=Jy(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=Ly}Zy({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Zy({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Lw(e,t,n){let r=Oy,i=!0;for(const s of Dw(e,t)){let e=Oy,t=!0;switch(s.op){case">=":case">":e=Xy(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=Oy}ew({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];ew({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Fw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Mw(e,t,n,r,i,s,o,a){return new Fw(e,t,n,r,i,s,o,a)}function Uw(e){return new Fw(e)}function Vw(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Bw(e){return null!==e.collectionGroup}function jw(e){const t=Vg(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new wy(av.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new aw(r,n))})),e.has(av.keyField().canonicalString())||t.le.push(new aw(av.keyField(),n))}return t.le}function zw(e){const t=Vg(e);return t.he||(t.he=qw(t,jw(e))),t.he}function qw(e,t){if("F"===e.limitType)return Aw(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new aw(e.field,t)}));const n=e.endAt?new iw(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new iw(e.startAt.position,e.startAt.inclusive):null;return Aw(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Kw(e,t){const n=e.filters.concat([t]);return new Fw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Hw(e,t,n){return new Fw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Gw(e,t){return Nw(zw(e),zw(t))&&e.limitType===t.limitType}function Ww(e){return"".concat(Pw(zw(e)),"|lt:").concat(e.limitType)}function Qw(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>ww(e))).join(", "),"]")),Ov(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>jy(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>jy(e))).join(",")),"Target(".concat(t,")")}(zw(e)),"; limitType=").concat(e.limitType,")")}function Yw(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):cv.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of jw(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=sw(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,jw(e),t))&&!(e.endAt&&!function(e,t,n){const r=sw(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,jw(e),t))}(e,t)}function $w(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Jw(e){return(t,n)=>{let r=!1;for(const i of jw(e)){const e=Xw(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Xw(e,t,n){const r=e.field.isKeyField()?cv.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Vy(r,i):Mg()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Mg()}}class Zw{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){py(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return my(this.inner)}size(){return this.innerSize}}const eb=new gy(cv.comparator);function tb(){return eb}const nb=new gy(cv.comparator);function rb(){let e=nb;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function ib(e){let t=nb;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function sb(){return ab()}function ob(){return ab()}function ab(){return new Zw((e=>e.toString()),((e,t)=>e.isEqual(t)))}const cb=new gy(cv.comparator),lb=new wy(cv.comparator);function ub(){let e=lb;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const hb=new wy(Zg);function db(){return hb}function fb(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lv(t)?"-0":t}}function pb(e){return{integerValue:""+e}}function mb(e,t){return Fv(t)?pb(t):fb(e,t)}class gb{constructor(){this._=void 0}}function vb(e,t,n){return e instanceof bb?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Ay(t)&&(t=Py(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof _b?Eb(e,t):e instanceof Ib?Sb(e,t):function(e,t){const n=wb(e,t),r=kb(n)+kb(e.Ie);return Ky(n)&&Ky(e.Ie)?pb(r):fb(e.serializer,r)}(e,t)}function yb(e,t,n){return e instanceof _b?Eb(e,t):e instanceof Ib?Sb(e,t):n}function wb(e,t){return e instanceof Tb?function(e){return Ky(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class bb extends gb{}class _b extends gb{constructor(e){super(),this.elements=e}}function Eb(e,t){const n=Cb(t);for(const r of e.elements)n.some((e=>My(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Ib extends gb{constructor(e){super(),this.elements=e}}function Sb(e,t){let n=Cb(t);for(const r of e.elements)n=n.filter((e=>!My(e,r)));return{arrayValue:{values:n}}}class Tb extends gb{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function kb(e){return Cy(e.integerValue||e.doubleValue)}function Cb(e){return Hy(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class xb{constructor(e,t){this.field=e,this.transform=t}}class Ab{constructor(e,t){this.version=e,this.transformResults=t}}class Pb{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pb}static exists(e){return new Pb(void 0,e)}static updateTime(e){return new Pb(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nb(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Rb{}function Db(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new qb(e.key,Pb.none()):new Ub(e.key,e.data,Pb.none());{const n=e.data,r=tw.empty();let i=new wy(av.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Vb(e.key,r,new Ey(i.toArray()),Pb.none())}}function Ob(e,t,n){e instanceof Ub?function(e,t,n){const r=e.value.clone(),i=jb(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Vb?function(e,t,n){if(!Nb(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=jb(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Bb(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Lb(e,t,n,r){return e instanceof Ub?function(e,t,n,r){if(!Nb(e.precondition,t))return n;const i=e.value.clone(),s=zb(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Vb?function(e,t,n,r){if(!Nb(e.precondition,t))return n;const i=zb(e.fieldTransforms,r,t),s=t.data;return s.setAll(Bb(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Nb(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Fb(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=wb(r.transform,e||null);null!=i&&(null===n&&(n=tw.empty()),n.set(r.field,i))}return n||null}function Mb(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ev(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof _b&&t instanceof _b||e instanceof Ib&&t instanceof Ib?ev(e.elements,t.elements,My):e instanceof Tb&&t instanceof Tb?My(e.Ie,t.Ie):e instanceof bb&&t instanceof bb}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ub extends Rb{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Vb extends Rb{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Bb(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function jb(e,t,n){const r=new Map;Ug(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,yb(o,a,n[i]))}return r}function zb(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,vb(e,s,t))}return r}class qb extends Rb{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Kb extends Rb{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Hb{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Ob(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Lb(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Lb(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=ob();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Db(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(rv.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ub())}isEqual(e){return this.batchId===e.batchId&&ev(this.mutations,e.mutations,((e,t)=>Mb(e,t)))&&ev(this.baseMutations,e.baseMutations,((e,t)=>Mb(e,t)))}}class Gb{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Ug(e.mutations.length===n.length);let r=cb;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Gb(e,t,n,r)}}class Wb{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Qb{constructor(e,t){this.count=e,this.unchangedNames=t}}var Yb,$b;function Jb(e){switch(e){default:return Mg();case Bg.CANCELLED:case Bg.UNKNOWN:case Bg.DEADLINE_EXCEEDED:case Bg.RESOURCE_EXHAUSTED:case Bg.INTERNAL:case Bg.UNAVAILABLE:case Bg.UNAUTHENTICATED:return!1;case Bg.INVALID_ARGUMENT:case Bg.NOT_FOUND:case Bg.ALREADY_EXISTS:case Bg.PERMISSION_DENIED:case Bg.FAILED_PRECONDITION:case Bg.ABORTED:case Bg.OUT_OF_RANGE:case Bg.UNIMPLEMENTED:case Bg.DATA_LOSS:return!0}}function Xb(e){if(void 0===e)return Og("GRPC error has no .code"),Bg.UNKNOWN;switch(e){case Yb.OK:return Bg.OK;case Yb.CANCELLED:return Bg.CANCELLED;case Yb.UNKNOWN:return Bg.UNKNOWN;case Yb.DEADLINE_EXCEEDED:return Bg.DEADLINE_EXCEEDED;case Yb.RESOURCE_EXHAUSTED:return Bg.RESOURCE_EXHAUSTED;case Yb.INTERNAL:return Bg.INTERNAL;case Yb.UNAVAILABLE:return Bg.UNAVAILABLE;case Yb.UNAUTHENTICATED:return Bg.UNAUTHENTICATED;case Yb.INVALID_ARGUMENT:return Bg.INVALID_ARGUMENT;case Yb.NOT_FOUND:return Bg.NOT_FOUND;case Yb.ALREADY_EXISTS:return Bg.ALREADY_EXISTS;case Yb.PERMISSION_DENIED:return Bg.PERMISSION_DENIED;case Yb.FAILED_PRECONDITION:return Bg.FAILED_PRECONDITION;case Yb.ABORTED:return Bg.ABORTED;case Yb.OUT_OF_RANGE:return Bg.OUT_OF_RANGE;case Yb.UNIMPLEMENTED:return Bg.UNIMPLEMENTED;case Yb.DATA_LOSS:return Bg.DATA_LOSS;default:return Mg()}}($b=Yb||(Yb={}))[$b.OK=0]="OK",$b[$b.CANCELLED=1]="CANCELLED",$b[$b.UNKNOWN=2]="UNKNOWN",$b[$b.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$b[$b.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$b[$b.NOT_FOUND=5]="NOT_FOUND",$b[$b.ALREADY_EXISTS=6]="ALREADY_EXISTS",$b[$b.PERMISSION_DENIED=7]="PERMISSION_DENIED",$b[$b.UNAUTHENTICATED=16]="UNAUTHENTICATED",$b[$b.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$b[$b.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$b[$b.ABORTED=10]="ABORTED",$b[$b.OUT_OF_RANGE=11]="OUT_OF_RANGE",$b[$b.UNIMPLEMENTED=12]="UNIMPLEMENTED",$b[$b.INTERNAL=13]="INTERNAL",$b[$b.UNAVAILABLE=14]="UNAVAILABLE",$b[$b.DATA_LOSS=15]="DATA_LOSS";let Zb=null;function e_(){return new TextEncoder}const t_=new Cg([4294967295,4294967295],0);function n_(e){const t=e_().encode(e),n=new kg;return n.update(t),new Uint8Array(n.digest())}function r_(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Cg([n,r],0),new Cg([i,s],0)]}class i_{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new s_("Invalid padding: ".concat(t));if(n<0)throw new s_("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new s_("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new s_("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=Cg.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(Cg.fromNumber(n)));return 1===r.compare(t_)&&(r=new Cg([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=n_(e),[n,r]=r_(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new i_(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Te)return;const t=n_(e),[n,r]=r_(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class s_ extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class o_{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,a_.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new o_(rv.min(),r,new gy(Zg),tb(),ub())}}class a_{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new a_(n,t,ub(),ub(),ub())}}class c_{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class l_{constructor(e,t){this.targetId=e,this.fe=t}}class u_{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sy.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class h_{constructor(){this.ge=0,this.pe=p_(),this.ye=Sy.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=ub(),t=ub(),n=ub();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Mg()}})),new a_(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=p_()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Ug(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class d_{constructor(e){this.Be=e,this.ke=new Map,this.qe=tb(),this.Qe=f_(),this.Ke=new gy(Zg)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Le(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:Mg()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(Rw(i))if(0===n){const e=new cv(i.path);this.We(t,e,rw.newNoDocument(e,rv.min()))}else Ug(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==Zb||Zb.tt(function(e,t,n,r,i){var s,o,a,c,l,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(c=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==c?c:0,padding:null!==(u=null===(l=null==d?void 0:d.bits)||void 0===l?void 0:l.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Be.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=xy(n).toUint8Array()}catch(e){if(e instanceof Iy)return Lg("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new i_(s,r,i)}catch(e){return Lg(e instanceof s_?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Te?null:o}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Be.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Be.nt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&Rw(i.target)){const t=new cv(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,rw.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=ub();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new o_(e,t,this.Ke,this.qe,n);return this.qe=tb(),this.Qe=f_(),this.Ke=new gy(Zg),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new h_,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new wy(Zg),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||Dg("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Be._t(e)}He(e){this.ke.set(e,new h_),this.Be.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}}function f_(){return new gy(cv.comparator)}function p_(){return new gy(cv.comparator)}const m_={asc:"ASCENDING",desc:"DESCENDING"},g_={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},v_={and:"AND",or:"OR"};class y_{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function w_(e,t){return e.useProto3Json||Ov(t)?t:{value:t}}function b_(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function __(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function E_(e,t){return b_(e,t.toTimestamp())}function I_(e){return Ug(!!e),rv.fromTimestamp(function(e){const t=ky(e);return new nv(t.seconds,t.nanos)}(e))}function S_(e,t){return T_(e,t).canonicalString()}function T_(e,t){const n=function(e){return new sv(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function k_(e){const t=sv.fromString(e);return Ug(Q_(t)),t}function C_(e,t){return S_(e.databaseId,t.path)}function x_(e,t){const n=k_(t);if(n.get(1)!==e.databaseId.projectId)throw new jg(Bg.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new jg(Bg.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new cv(R_(n))}function A_(e,t){return S_(e.databaseId,t)}function P_(e){const t=k_(e);return 4===t.length?sv.emptyPath():R_(t)}function N_(e){return new sv(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function R_(e){return Ug(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function D_(e,t,n){return{name:C_(e,t),fields:n.value.mapValue.fields}}function O_(e,t,n){const r=x_(e,t.name),i=I_(t.updateTime),s=t.createTime?I_(t.createTime):rv.min(),o=new tw({mapValue:{fields:t.fields}}),a=rw.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function L_(e,t){let n;if(t instanceof Ub)n={update:D_(e,t.key,t.value)};else if(t instanceof qb)n={delete:C_(e,t.key)};else if(t instanceof Vb)n={update:D_(e,t.key,t.data),updateMask:W_(t.fieldMask)};else{if(!(t instanceof Kb))return Mg();n={verify:C_(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof bb)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof _b)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ib)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Tb)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw Mg()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:E_(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Mg()}(e,t.precondition)),n}function F_(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Pb.updateTime(I_(e.updateTime)):void 0!==e.exists?Pb.exists(e.exists):Pb.none()}(t.currentDocument):Pb.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Ug("REQUEST_TIME"===t.setToServerValue),n=new bb;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new _b(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Ib(e)}else"increment"in t?n=new Tb(e,t.increment):Mg();const r=av.fromServerFormat(t.fieldPath);return new xb(r,n)}(e,t))):[];if(t.update){t.update.name;const i=x_(e,t.update.name),s=new tw({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Ey(t.map((e=>av.fromServerFormat(e))))}(t.updateMask);return new Vb(i,s,e,n,r)}return new Ub(i,s,n,r)}if(t.delete){const r=x_(e,t.delete);return new qb(r,n)}if(t.verify){const r=x_(e,t.verify);return new Kb(r,n)}return Mg()}function M_(e,t){return{documents:[A_(e,t.path)]}}function U_(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=A_(e,i);const s=function(e){if(0!==e.length)return G_(hw.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:K_(e.field),direction:j_(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=w_(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ut:n,parent:i}}function V_(e){let t=P_(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ug(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=B_(e);return t instanceof hw&&pw(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new aw(H_(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Ov(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new iw(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new iw(n,t)}(n.endAt)),Mw(t,i,o,s,a,"F",c,l)}function B_(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=H_(e.unaryFilter.field);return uw.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=H_(e.unaryFilter.field);return uw.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=H_(e.unaryFilter.field);return uw.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=H_(e.unaryFilter.field);return uw.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Mg()}}(e):void 0!==e.fieldFilter?function(e){return uw.create(H_(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Mg()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return hw.create(e.compositeFilter.filters.map((e=>B_(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Mg()}}(e.compositeFilter.op))}(e):Mg()}function j_(e){return m_[e]}function z_(e){return g_[e]}function q_(e){return v_[e]}function K_(e){return{fieldPath:e.canonicalString()}}function H_(e){return av.fromServerFormat(e.fieldPath)}function G_(e){return e instanceof uw?function(e){if("=="===e.op){if(Wy(e.value))return{unaryFilter:{field:K_(e.field),op:"IS_NAN"}};if(Gy(e.value))return{unaryFilter:{field:K_(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Wy(e.value))return{unaryFilter:{field:K_(e.field),op:"IS_NOT_NAN"}};if(Gy(e.value))return{unaryFilter:{field:K_(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:K_(e.field),op:z_(e.op),value:e.value}}}(e):e instanceof hw?function(e){const t=e.getFilters().map((e=>G_(e)));return 1===t.length?t[0]:{compositeFilter:{op:q_(e.op),filters:t}}}(e):Mg()}function W_(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Q_(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Y_{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:rv.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:rv.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Sy.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Y_(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Y_(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Y_(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Y_(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class $_{constructor(e){this.ct=e}}function J_(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:X_(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:C_(e,t.key),fields:t.data.value.mapValue.fields,updateTime:b_(e,t.version.toTimestamp()),createTime:b_(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Z_(t.version)};else{if(!t.isUnknownDocument())return Mg();r.unknownDocument={path:n.path.toArray(),version:Z_(t.version)}}return r}function X_(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Z_(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function eE(e){const t=new nv(e.seconds,e.nanoseconds);return rv.fromTimestamp(t)}function tE(e,t){const n=(t.baseMutations||[]).map((t=>F_(e.ct,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>F_(e.ct,t))),i=nv.fromMillis(t.localWriteTimeMs);return new Hb(t.batchId,i,n,r)}function nE(e){const t=eE(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?eE(e.lastLimboFreeSnapshotVersion):rv.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return Ug(1===e.documents.length),zw(Uw(P_(e.documents[0])))}(e.query):function(e){return zw(V_(e))}(e.query),new Y_(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Sy.fromBase64String(e.resumeToken))}function rE(e,t){const n=Z_(t.snapshotVersion),r=Z_(t.lastLimboFreeSnapshotVersion);let i;i=Rw(t.target)?M_(e.ct,t.target):U_(e.ct,t.target).ut;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Pw(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function iE(e){const t=V_({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Hw(t,t.limit,"L"):t}function sE(e,t){return new Wb(t.largestBatchId,F_(e.ct,t.overlayMutation))}function oE(e,t){const n=t.path.lastSegment();return[e,Mv(t.path.popLast()),n]}function aE(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:Z_(r.readTime),documentKey:Mv(r.documentKey.path),largestBatchId:r.largestBatchId}}class cE{getBundleMetadata(e,t){return lE(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:eE(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return lE(e).put(function(e){return{bundleId:e.id,createTime:Z_(I_(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return uE(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:iE(e.bundledQuery),readTime:eE(e.readTime)}}(e)}))}saveNamedQuery(e,t){return uE(e).put(function(e){return{name:e.name,readTime:Z_(I_(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function lE(e){return dy(e,"bundles")}function uE(e){return dy(e,"namedQueries")}class hE{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new hE(e,n)}getOverlay(e,t){return dE(e).get(oE(this.userId,t)).next((e=>e?sE(this.serializer,e):null))}getOverlays(e,t){const n=sb();return _v.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new Wb(t,i);r.push(this.ht(e,s))})),_v.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Mv(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(dE(e).H("collectionPathOverlayIndex",r))})),_v.waitFor(i)}getOverlaysForCollection(e,t,n){const r=sb(),i=Mv(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return dE(e).W("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=sE(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=sb();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return dE(e).Y({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=sE(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return dE(e).put(function(e,t,n){const[r,i,s]=oE(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:L_(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function dE(e){return dy(e,"documentOverlays")}class fE{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Cy(e.integerValue));else if("doubleValue"in e){const n=Cy(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),Lv(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Et(t,20),"string"==typeof n&&(n=ky(n)),t.At("".concat(n.seconds||"")),t.dt(n.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(xy(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?$y(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Mg()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),cv.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function pE(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function mE(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=pE(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}fE.bt=new fE;class gE{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ct(n.value),n=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ct(e);else if(e<2048)this.Ct(960|e>>>6),this.Ct(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e);else{const e=t.codePointAt(0);this.Ct(240|e>>>18),this.Ct(128|63&e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e)}}this.vt()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Lt(e){const t=this.Bt(e),n=mE(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}qt(e){const t=this.Bt(e),n=mE(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class vE{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class yE{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class wE{constructor(){this.Gt=new gE,this.zt=new vE(this.Gt),this.jt=new yE(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class bE{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new bE(this.indexId,this.documentKey,this.arrayValue,n)}}function _E(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=EE(e.arrayValue,t.arrayValue),0!==n?n:(n=EE(e.directionalValue,t.directionalValue),0!==n?n:cv.comparator(e.documentKey,t.documentKey)))}function EE(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class IE{constructor(e){this.Yt=new wy(((e,t)=>av.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Yt=this.Yt.add(e):this.Xt.push(e)}}get en(){return this.Yt.size>1}tn(e){if(Ug(e.collectionGroup===this.collectionId),this.en)return!1;const t=uv(e);if(void 0!==t&&!this.nn(t))return!1;const n=hv(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){const e=this.Yt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.rn(e,t)||!this.sn(this.Zt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Zt.length||!this.sn(this.Zt[s++],e))return!1}return!0}on(){if(this.en)return null;let e=new wy(av.comparator);const t=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new dv(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new dv(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new dv(n.field,"asc"===n.dir?0:1)));return new lv(lv.UNKNOWN_ID,this.collectionId,t,fv.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function SE(e){var t,n;if(Ug(e instanceof uw||e instanceof hw),e instanceof uw){if(e instanceof Tw){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>uw.create(e.field,"==",t))))||[];return hw.create(r,"or")}return e}const r=e.filters.map((e=>SE(e)));return hw.create(r,e.op)}function TE(e){if(0===e.getFilters().length)return[];const t=AE(SE(e));return Ug(xE(t)),kE(t)||CE(t)?[t]:t.getFilters()}function kE(e){return e instanceof uw}function CE(e){return e instanceof hw&&pw(e)}function xE(e){return kE(e)||CE(e)||function(e){if(e instanceof hw&&fw(e)){for(const t of e.getFilters())if(!kE(t)&&!CE(t))return!1;return!0}return!1}(e)}function AE(e){if(Ug(e instanceof uw||e instanceof hw),e instanceof uw)return e;if(1===e.filters.length)return AE(e.filters[0]);const t=e.filters.map((e=>AE(e)));let n=hw.create(t,e.op);return n=RE(n),xE(n)?n:(Ug(n instanceof hw),Ug(dw(n)),Ug(n.filters.length>1),n.filters.reduce(((e,t)=>PE(e,t))))}function PE(e,t){let n;return Ug(e instanceof uw||e instanceof hw),Ug(t instanceof uw||t instanceof hw),n=e instanceof uw?t instanceof uw?function(e,t){return hw.create([e,t],"and")}(e,t):NE(e,t):t instanceof uw?NE(t,e):function(e,t){if(Ug(e.filters.length>0&&t.filters.length>0),dw(e)&&dw(t))return yw(e,t.getFilters());const n=fw(e)?e:t,r=fw(e)?t:e,i=n.filters.map((e=>PE(e,r)));return hw.create(i,"or")}(e,t),RE(n)}function NE(e,t){if(dw(t))return yw(t,e.getFilters());{const n=t.filters.map((t=>PE(e,t)));return hw.create(n,"or")}}function RE(e){if(Ug(e instanceof uw||e instanceof hw),e instanceof uw)return e;const t=e.getFilters();if(1===t.length)return RE(t[0]);if(mw(e))return e;const n=t.map((e=>RE(e))),r=[];return n.forEach((t=>{t instanceof uw?r.push(t):t instanceof hw&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:hw.create(r,e.op)}class DE{constructor(){this._n=new OE}addToCollectionParentIndex(e,t){return this._n.add(t),_v.resolve()}getCollectionParents(e,t){return _v.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return _v.resolve()}deleteFieldIndex(e,t){return _v.resolve()}deleteAllFieldIndexes(e){return _v.resolve()}createTargetIndexes(e,t){return _v.resolve()}getDocumentsMatchingTarget(e,t){return _v.resolve(null)}getIndexType(e,t){return _v.resolve(0)}getFieldIndexes(e,t){return _v.resolve([])}getNextCollectionGroupToUpdate(e){return _v.resolve(null)}getMinOffset(e,t){return _v.resolve(gv.min())}getMinOffsetFromCollectionGroup(e,t){return _v.resolve(gv.min())}updateCollectionGroup(e,t,n){return _v.resolve()}updateIndexEntries(e,t){return _v.resolve()}}class OE{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new wy(sv.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new wy(sv.comparator)).toArray()}}const LE=new Uint8Array(0);class FE{constructor(e,t){this.databaseId=t,this.an=new OE,this.un=new Zw((e=>Pw(e)),((e,t)=>Nw(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.an.add(t)}));const i={collectionId:n,parent:Mv(r)};return ME(e).put(i)}return _v.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[tv(t),""],!1,!0);return ME(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Bv(r.parent))}return n}))}addFieldIndex(e,t){const n=VE(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=BE(e);return i.next((e=>{n.put(aE(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=VE(e),r=BE(e),i=UE(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=VE(e),n=UE(e),r=BE(e);return t.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(e,t){return _v.forEach(this.cn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new IE(t).on();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=UE(e);let r=!0;const i=new Map;return _v.forEach(this.cn(t),(t=>this.ln(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=ub();const r=[];return _v.forEach(i,((i,s)=>{Dg("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(Pw(t)));const o=function(e,t){const n=uv(t);if(void 0===n)return null;for(const r of Dw(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of hv(t))for(const t of Dw(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of hv(t)){const t=0===i.kind?Ow(e,i.fieldPath,e.startAt):Lw(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new iw(n,r)}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of hv(t)){const t=0===i.kind?Lw(e,i.fieldPath,e.endAt):Ow(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new iw(n,r)}(s,i),u=this.hn(i,s,c),h=this.hn(i,s,l),d=this.Pn(i,s,a),f=this.In(i.indexId,o,u,c.inclusive,h,l.inclusive,d);return _v.forEach(f,(i=>n.j(i,t.limit).next((t=>{t.forEach((t=>{const n=cv.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return _v.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:TE(hw.create(e.filters,"and")).map((t=>Aw(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}In(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),c=a/(null!=t?t.length:1),l=[];for(let u=0;u<a;++u){const a=t?this.Tn(t[u/c]):LE,h=this.En(e,a,n[u%c],r),d=this.dn(e,a,i[u%c],s),f=o.map((t=>this.En(e,a,t,!0)));l.push(...this.createRange(h,d,f))}return l}En(e,t,n,r){const i=new bE(e,cv.empty(),t,n);return r?i:i.Jt()}dn(e,t,n,r){const i=new bE(e,cv.empty(),t,n);return r?i.Jt():i}ln(e,t){const n=new IE(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return _v.forEach(r,(t=>this.ln(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new wy(av.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}An(e,t){const n=new wE;for(const r of hv(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ht(r.kind);fE.bt.Pt(e,i)}return n.Wt()}Tn(e){const t=new wE;return fE.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const n=new wE;return fE.bt.Pt(qy(this.databaseId,t),n.Ht(function(e){const t=hv(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}Pn(e,t,n){if(null===n)return[];let r=[];r.push(new wE);let i=0;for(const s of hv(e)){const e=n[i++];for(const n of r)if(this.Vn(t,s.fieldPath)&&Hy(e))r=this.mn(r,s,e);else{const t=n.Ht(s.kind);fE.bt.Pt(e,t)}}return this.fn(r)}hn(e,t,n){return this.Pn(e,t,n.position)}fn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}mn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new wE;n.seed(e.Wt()),fE.bt.Pt(s,n.Ht(t.kind)),i.push(n)}return i}Vn(e,t){return!!e.filters.find((e=>e instanceof uw&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=VE(e),r=BE(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return _v.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new fv(t.sequenceNumber,new gv(eE(t.readTime),new cv(Bv(t.documentKey)),t.largestBatchId)):fv.empty(),r=e.fields.map((e=>{let[t,n]=e;return new dv(av.fromServerFormat(t),n)}));return new lv(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Zg(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=VE(e),i=BE(e);return this.gn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>_v.forEach(t,(t=>i.put(aE(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return _v.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?_v.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),_v.forEach(i,(n=>this.pn(e,t,n).next((t=>{const i=this.yn(r,n);return t.isEqual(i)?_v.resolve():this.wn(e,r,n,t,i)})))))))}))}Sn(e,t,n,r){return UE(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}bn(e,t,n,r){return UE(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}pn(e,t,n){const r=UE(e);let i=new wy(_E);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},((e,r)=>{i=i.add(new bE(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}yn(e,t){let n=new wy(_E);const r=this.An(t,e);if(null==r)return n;const i=uv(t);if(null!=i){const s=e.data.field(i.fieldPath);if(Hy(s))for(const i of s.arrayValue.values||[])n=n.add(new bE(t.indexId,e.key,this.Tn(i),r))}else n=n.add(new bE(t.indexId,e.key,LE,r));return n}wn(e,t,n,r,i){Dg("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=_y(s),c=_y(o);for(;a||c;){let e=!1,t=!1;if(a&&c){const r=n(a,c);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(c),c=_y(o)):t?(i(a),a=_y(s)):(a=_y(s),c=_y(o))}}(r,i,_E,(r=>{s.push(this.Sn(e,t,n,r))}),(r=>{s.push(this.bn(e,t,n,r))})),_v.waitFor(s)}gn(e){let t=1;return BE(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>_E(e,t))).filter(((e,t,n)=>!t||0!==_E(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=_E(s,e),i=_E(s,t);if(0===n)r[0]=e.Jt();else if(n>0&&i<0)r.push(s),r.push(s.Jt());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.Dn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,LE,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,LE,[]];i.push(IDBKeyRange.bound(e,t))}return i}Dn(e,t){return _E(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(jE)}getMinOffset(e,t){return _v.mapArray(this.cn(t),(t=>this.ln(e,t).next((e=>e||Mg())))).next(jE)}}function ME(e){return dy(e,"collectionParents")}function UE(e){return dy(e,"indexEntries")}function VE(e){return dy(e,"indexConfiguration")}function BE(e){return dy(e,"indexState")}function jE(e){Ug(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;vv(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new gv(t.readTime,t.documentKey,n)}const zE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class qE{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new qE(e,qE.DEFAULT_COLLECTION_PERCENTILE,qE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function KE(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.Y({range:o},((e,t,n)=>(a++,n.delete())));s.push(c.next((()=>{Ug(1===a)})));const l=[];for(const u of n.mutations){const e=qv(t,u.key.path,n.batchId);s.push(i.delete(e)),l.push(u.key)}return _v.waitFor(s).next((()=>l))}function HE(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Mg();t=e.noDocument}return JSON.stringify(t).length}qE.DEFAULT_COLLECTION_PERCENTILE=10,qE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qE.DEFAULT=new qE(41943040,qE.DEFAULT_COLLECTION_PERCENTILE,qE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qE.DISABLED=new qE(-1,0,0);class GE{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(e,t,n,r){Ug(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new GE(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return QE(e).Y({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=YE(e),s=QE(e);return s.add({}).next((o=>{Ug("number"==typeof o);const a=new Hb(o,t,n,r),c=function(e,t,n){const r=n.baseMutations.map((t=>L_(e.ct,t))),i=n.mutations.map((t=>L_(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),l=[];let u=new wy(((e,t)=>Zg(e.canonicalString(),t.canonicalString())));for(const e of r){const t=qv(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),l.push(s.put(c)),l.push(i.put(t,Kv))}return u.forEach((t=>{l.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Cn[o]=a.keys()})),_v.waitFor(l).next((()=>a))}))}lookupMutationBatch(e,t){return QE(e).get(t).next((e=>e?(Ug(e.userId===this.userId),tE(this.serializer,e)):null))}vn(e,t){return this.Cn[t]?_v.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Cn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return QE(e).Y({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(Ug(t.batchId>=n),i=tE(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return QE(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return QE(e).W("userMutationsIndex",t).next((e=>e.map((e=>tE(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=zv(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return YE(e).Y({range:r},((n,r,s)=>{const[o,a,c]=n,l=Bv(a);if(o===this.userId&&t.path.isEqual(l))return QE(e).get(c).next((e=>{if(!e)throw Mg();Ug(e.userId===this.userId),i.push(tE(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new wy(Zg);const r=[];return t.forEach((t=>{const i=zv(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=YE(e).Y({range:s},((e,r,i)=>{const[s,o,a]=e,c=Bv(o);s===this.userId&&t.path.isEqual(c)?n=n.add(a):i.done()}));r.push(o)})),_v.waitFor(r).next((()=>this.Fn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=zv(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new wy(Zg);return YE(e).Y({range:s},((e,t,i)=>{const[s,a,c]=e,l=Bv(a);s===this.userId&&n.isPrefixOf(l)?l.length===r&&(o=o.add(c)):i.done()})).next((()=>this.Fn(e,o)))}Fn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(QE(e).get(t).next((e=>{if(null===e)throw Mg();Ug(e.userId===this.userId),n.push(tE(this.serializer,e))})))})),_v.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return KE(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Mn(t.batchId)})),_v.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return _v.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return YE(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Bv(e[1]);r.push(t)}else n.done()})).next((()=>{Ug(0===r.length)}))}))}containsKey(e,t){return WE(e,this.userId,t)}xn(e){return $E(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function WE(e,t,n){const r=zv(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return YE(e).Y({range:s,J:!0},((e,n,r)=>{const[s,a,c]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function QE(e){return dy(e,"mutations")}function YE(e){return dy(e,"documentMutations")}function $E(e){return dy(e,"mutationQueues")}class JE{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new JE(0)}static Ln(){return new JE(-1)}}class XE{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next((t=>{const n=new JE(t.highestTargetId);return t.highestTargetId=n.next(),this.kn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Bn(e).next((e=>rv.fromTimestamp(new nv(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Bn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Bn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.kn(e,r))))}addTargetData(e,t){return this.qn(e,t).next((()=>this.Bn(e).next((n=>(n.targetCount+=1,this.Qn(t,n),this.kn(e,n))))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>ZE(e).delete(t.targetId))).next((()=>this.Bn(e))).next((t=>(Ug(t.targetCount>0),t.targetCount-=1,this.kn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return ZE(e).Y(((s,o)=>{const a=nE(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>_v.waitFor(i))).next((()=>r))}forEachTarget(e,t){return ZE(e).Y(((e,n)=>{const r=nE(n);t(r)}))}Bn(e){return eI(e).get("targetGlobalKey").next((e=>(Ug(null!==e),e)))}kn(e,t){return eI(e).put("targetGlobalKey",t)}qn(e,t){return ZE(e).put(rE(this.serializer,t))}Qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Bn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Pw(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return ZE(e).Y({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=nE(n);Nw(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=tI(e);return t.forEach((t=>{const s=Mv(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),_v.waitFor(r)}removeMatchingKeys(e,t,n){const r=tI(e);return _v.forEach(t,(t=>{const i=Mv(t.path);return _v.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=tI(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=tI(e);let i=ub();return r.Y({range:n,J:!0},((e,t,n)=>{const r=Bv(e[1]),s=new cv(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=Mv(t.path),r=IDBKeyRange.bound([n],[tv(n)],!1,!0);let i=0;return tI(e).Y({index:"documentTargetsIndex",J:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}_t(e,t){return ZE(e).get(t).next((e=>e?nE(e):null))}}function ZE(e){return dy(e,"targets")}function eI(e){return dy(e,"targetGlobal")}function tI(e){return dy(e,"targetDocuments")}function nI(e,t){let[n,r]=e,[i,s]=t;const o=Zg(n,i);return 0===o?Zg(r,s):o}class rI{constructor(e){this.Kn=e,this.buffer=new wy(nI),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();nI(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class iI{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){Dg("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){kv(e)?Dg("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await bv(e)}await this.zn(3e5)}))}}class sI{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return _v.resolve(Dv._e);const n=new rI(t);return this.jn.forEachTarget(e,(e=>n.Wn(e.sequenceNumber))).next((()=>this.jn.Jn(e,(e=>n.Wn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Dg("LruGarbageCollector","Garbage collection skipped; disabled"),_v.resolve(zE)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Dg("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),zE):this.Yn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let n,r,i,s,o,a,c;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Dg("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),Rg()<=ps.DEBUG&&Dg("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-a)+"ms\n"+"Total Duration: ".concat(c-l,"ms")),_v.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function oI(e,t){return new sI(e,t)}class aI{constructor(e,t){this.db=e,this.garbageCollector=oI(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Zn(e){let t=0;return this.Jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,((e,n)=>t(n)))}addReference(e,t,n){return cI(e,n)}removeReference(e,t,n){return cI(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return cI(e,t)}er(e,t){return function(e,t){let n=!1;return $E(e).Z((r=>WE(e,r,t).next((e=>(e&&(n=!0),_v.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Xn(e,((s,o)=>{if(o<=t){const t=this.er(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,rv.min()),tI(e).delete(function(e){return[0,Mv(e.path)]}(s)))))}));r.push(t)}})).next((()=>_v.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return cI(e,t)}Xn(e,t){const n=tI(e);let r,i=Dv._e;return n.Y({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:c}=n;0===s?(i!==Dv._e&&t(new cv(Bv(r)),i),i=c,r=a):i=Dv._e})).next((()=>{i!==Dv._e&&t(new cv(Bv(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function cI(e,t){return tI(e).put(function(e,t){return{targetId:0,path:Mv(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class lI{constructor(){this.changes=new Zw((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,rw.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?_v.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class uI{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return pI(e).put(n)}removeEntry(e,t,n){return pI(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],X_(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.tr(e,n))))}getEntry(e,t){let n=rw.newInvalidDocument(t);return pI(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(mI(t))},((e,r)=>{n=this.nr(t,r)})).next((()=>n))}rr(e,t){let n={size:0,document:rw.newInvalidDocument(t)};return pI(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(mI(t))},((e,r)=>{n={document:this.nr(t,r),size:HE(r)}})).next((()=>n))}getEntries(e,t){let n=tb();return this.ir(e,t,((e,t)=>{const r=this.nr(e,t);n=n.insert(e,r)})).next((()=>n))}sr(e,t){let n=tb(),r=new gy(cv.comparator);return this.ir(e,t,((e,t)=>{const i=this.nr(e,t);n=n.insert(e,i),r=r.insert(e,HE(t))})).next((()=>({documents:n,_r:r})))}ir(e,t,n){if(t.isEmpty())return _v.resolve();let r=new wy(vI);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(mI(r.first()),mI(r.last())),s=r.getIterator();let o=s.getNext();return pI(e).Y({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=cv.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&vI(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.U(mI(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),X_(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return pI(e).W(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=tb();for(const i of e){const e=this.nr(cv.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Yw(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=tb();const s=gI(t,n),o=gI(t,gv.max());return pI(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.nr(cv.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new dI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return fI(e).get("remoteDocumentGlobalKey").next((e=>(Ug(!!e),e)))}tr(e,t){return fI(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=O_(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=cv.fromSegments(t.noDocument.path),r=eE(t.noDocument.readTime);n=rw.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Mg();{const e=cv.fromSegments(t.unknownDocument.path),r=eE(t.unknownDocument.version);n=rw.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new nv(e[0],e[1]);return rv.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(rv.min()))return e}return rw.newInvalidDocument(e)}}function hI(e){return new uI(e)}class dI extends lI{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new Zw((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new wy(((e,t)=>Zg(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.ur.get(i);if(t.push(this.ar.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=J_(this.ar.serializer,s);r=r.add(i.path.popLast());const c=HE(a);n+=c-o.size,t.push(this.ar.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=J_(this.ar.serializer,s.convertToNoDocument(rv.min()));t.push(this.ar.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.ar.updateMetadata(e,n)),_v.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next((e=>(this.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ar.sr(e,t).next((e=>{let{documents:t,_r:n}=e;return n.forEach(((e,n)=>{this.ur.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function fI(e){return dy(e,"remoteDocumentGlobal")}function pI(e){return dy(e,"remoteDocumentsV14")}function mI(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function gI(e,t){const n=t.documentKey.path.toArray();return[e,X_(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function vI(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Zg(n[s],r[s]),i)return i;return i=Zg(n.length,r.length),i||(i=Zg(n[n.length-2],r[r.length-2]),i||Zg(n[n.length-1],r[r.length-1]))}class yI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class wI{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Lb(n.mutation,e,Ey.empty(),nv.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,ub()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ub();const r=sb();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=rb();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=sb();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,ub())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=tb();const s=ab(),o=ab();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Vb)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Lb(o.mutation,t,o.mutation.getFieldMask(),nv.now())):s.set(t.key,Ey.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new yI(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=ab();let r=new gy(((e,t)=>e-t)),i=ub();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Ey.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||ub()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,c=r.value,l=ob();c.forEach((e=>{if(!i.has(e)){const r=Db(t.get(e),n.get(e));null!==r&&l.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,l))}return _v.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return cv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Bw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):_v.resolve(sb());let o=-1,a=i;return s.next((t=>_v.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?_v.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,ub()))).next((e=>({batchId:o,changes:ib(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new cv(t)).next((e=>{let t=rb();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=rb();return this.indexManager.getCollectionParents(e,i).next((o=>_v.forEach(o,(o=>{const a=function(e,t){return new Fw(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,rw.newInvalidDocument(r)))}));let n=rb();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Lb(s.mutation,r,Ey.empty(),nv.now()),Yw(t,r)&&(n=n.insert(e,r))})),n}))}}class bI{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return _v.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:I_(e.createTime)}}(t)),_v.resolve()}getNamedQuery(e,t){return _v.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:iE(e.bundledQuery),readTime:I_(e.readTime)}}(t)),_v.resolve()}}class _I{constructor(){this.overlays=new gy(cv.comparator),this.hr=new Map}getOverlay(e,t){return _v.resolve(this.overlays.get(t))}getOverlays(e,t){const n=sb();return _v.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),_v.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),_v.resolve()}getOverlaysForCollection(e,t,n){const r=sb(),i=t.length+1,s=new cv(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return _v.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new gy(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=sb(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=sb(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return _v.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Wb(t,n));let i=this.hr.get(t);void 0===i&&(i=ub(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class EI{constructor(){this.Pr=new wy(II.Ir),this.Tr=new wy(II.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new II(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new II(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new cv(new sv([])),n=new II(t,e),r=new II(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new cv(new sv([])),n=new II(t,e),r=new II(t,e+1);let i=ub();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new II(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class II{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return cv.comparator(e.key,t.key)||Zg(e.pr,t.pr)}static Er(e,t){return Zg(e.pr,t.pr)||cv.comparator(e.key,t.key)}}class SI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new wy(II.Ir)}checkEmpty(e){return _v.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Hb(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.wr=this.wr.add(new II(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return _v.resolve(s)}lookupMutationBatch(e,t){return _v.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return _v.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return _v.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return _v.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new II(t,0),r=new II(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),_v.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new wy(Zg);return t.forEach((e=>{const t=new II(e,0),r=new II(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),_v.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;cv.isDocumentKey(i)||(i=i.child(""));const s=new II(new cv(i),0);let o=new wy(Zg);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.pr)),!0)}),s),_v.resolve(this.Dr(o))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Ug(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return _v.forEach(t.mutations,(r=>{const i=new II(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new II(t,0),r=this.wr.firstAfterOrEqual(n);return _v.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,_v.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class TI{constructor(e){this.vr=e,this.docs=new gy(cv.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return _v.resolve(n?n.document.mutableCopy():rw.newInvalidDocument(t))}getEntries(e,t){let n=tb();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():rw.newInvalidDocument(e))})),_v.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=tb();const s=t.path,o=new cv(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||vv(mv(o),n)<=0||(r.has(o.key)||Yw(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return _v.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Mg()}Fr(e,t){return _v.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new kI(this)}getSize(e){return _v.resolve(this.size)}}class kI extends lI{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),_v.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class CI{constructor(e){this.persistence=e,this.Mr=new Zw((e=>Pw(e)),Nw),this.lastRemoteSnapshotVersion=rv.min(),this.highestTargetId=0,this.Or=0,this.Nr=new EI,this.targetCount=0,this.Lr=JE.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),_v.resolve()}getLastRemoteSnapshotVersion(e){return _v.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _v.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),_v.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),_v.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new JE(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,_v.resolve()}updateTargetData(e,t){return this.qn(t),_v.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,_v.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Mr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),_v.waitFor(i).next((()=>r))}getTargetCount(e){return _v.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return _v.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),_v.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),_v.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),_v.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return _v.resolve(n)}containsKey(e,t){return _v.resolve(this.Nr.containsKey(t))}}class xI{constructor(e,t){this.Br={},this.overlays={},this.kr=new Dv(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new CI(this),this.indexManager=new DE,this.remoteDocumentCache=function(e){return new TI(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new $_(t),this.$r=new bI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new _I,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new SI(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){Dg("MemoryPersistence","Starting transaction:",e);const r=new AI(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return _v.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class AI extends wv{constructor(e){super(),this.currentSequenceNumber=e}}class PI{constructor(e){this.persistence=e,this.zr=new EI,this.jr=null}static Hr(e){return new PI(e)}get Jr(){if(this.jr)return this.jr;throw Mg()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),_v.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),_v.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),_v.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _v.forEach(this.Jr,(n=>{const r=cv.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,rv.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return _v.or([()=>_v.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class NI{constructor(e){this.serializer=e}N(e,t,n,r){const i=new Ev("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",jv,{unique:!0}),e.createObjectStore("documentMutations")}(e),RI(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=_v.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),RI(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:rv.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",jv,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return _v.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Xr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i))))),n<7&&r>=7&&(s=s.next((()=>this.ti(i)))),n<8&&r>=8&&(s=s.next((()=>this.ni(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ri(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:ny});t.createIndex("collectionPathOverlayIndex",ry,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",iy,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:Hv});t.createIndex("documentKeyIndex",Gv),t.createIndex("collectionGroupIndex",Wv)}(e))).next((()=>this.ii(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.si(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Xv}).createIndex("sequenceNumberIndex",Zv,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:ey}).createIndex("documentKeyIndex",ty,{unique:!1})}(e)))),n<16&&r>=16&&(s=s.next((()=>{t.objectStore("indexState").clear()})).next((()=>{t.objectStore("indexEntries").clear()}))),s}ei(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=HE(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>_v.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>_v.forEach(n,(n=>{Ug(n.userId===t.userId);const r=tE(this.serializer,n);return KE(e,t.userId,r).next((()=>{}))}))))}))))}ti(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Y(((n,i)=>{const s=new sv(n),o=function(e){return[0,Mv(e)]}(s);r.push(t.get(o).next((n=>n?_v.resolve():(n=>t.put({targetId:0,path:Mv(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>_v.waitFor(r)))}))}ni(e,t){e.createObjectStore("collectionParents",{keyPath:Jv});const n=t.store("collectionParents"),r=new OE,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Mv(r)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new sv(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[n,r,s]=e;const o=Bv(r);return i(o.popLast())}))))}ri(e){const t=e.store("targets");return t.Y(((e,n)=>{const r=nE(n),i=rE(this.serializer,r);return t.put(i)}))}ii(e,t){const n=t.store("remoteDocuments"),r=[];return n.Y(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new cv(sv.fromString(e.document.name).popFirst(5)):e.noDocument?cv.fromSegments(e.noDocument.path):e.unknownDocument?cv.fromSegments(e.unknownDocument.path):Mg()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>_v.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=hI(this.serializer),i=new xI(PI.Hr,this.serializer.ct);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:ub();tE(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),_v.forEach(n,((e,n)=>{const s=new Ag(n),o=hE.lt(this.serializer,s),a=i.getIndexManager(s),c=GE.lt(s,this.serializer,a,i.referenceDelegate);return new wI(r,c,o,a).recalculateAndSaveOverlaysForDocumentKeys(new hy(t,Dv._e),e).next()}))}))}}function RI(e){e.createObjectStore("targetDocuments",{keyPath:Yv}).createIndex("documentTargetsIndex",$v,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Qv,{unique:!0}),e.createObjectStore("targetGlobal")}const DI="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class OI{constructor(e,t,n,r,i,s,o,a,c,l){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:16;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.oi=i,this.window=s,this.document=o,this._i=c,this.ai=l,this.ui=u,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=e=>Promise.resolve(),!OI.D())throw new jg(Bg.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new aI(this,r),this.Ti=t+"main",this.serializer=new $_(a),this.Ei=new Iv(this.Ti,this.ui,new NI(this.serializer)),this.Qr=new XE(this.referenceDelegate,this.serializer),this.remoteDocumentCache=hI(this.serializer),this.$r=new cE,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===l&&Og("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new jg(Bg.FAILED_PRECONDITION,DI);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Qr.getHighestSequenceNumber(e)))})).then((e=>{this.kr=new Dv(e,this._i)})).then((()=>{this.qr=!0})).catch((e=>(this.Ei&&this.Ei.close(),Promise.reject(e))))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.B((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>FI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(e).next((e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(e))).next((t=>this.isPrimary&&!t?this.yi(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(kv(e))return Dg("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Dg("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.oi.enqueueRetryable((()=>this.Ii(e))),this.isPrimary=e}))}gi(e){return LI(e).get("owner").next((e=>_v.resolve(this.Si(e))))}bi(e){return FI(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=dy(e,"clientMetadata");return t.W().next((e=>{const n=this.vi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return _v.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?_v.resolve(!0):LI(e).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new jg(Bg.FAILED_PRECONDITION,DI);return!1}}return!(!this.networkEnabled||!this.inForeground)||FI(e).W().next((e=>void 0===this.vi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Dg("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new hy(e,Dv._e);return this.yi(t).next((()=>this.bi(t)))})),this.Ei.close(),this.Li()}vi(e,t){return e.filter((e=>this.Ci(e.updateTimeMs,t)&&!this.Mi(e.clientId)))}Bi(){return this.runTransaction("getActiveClients","readonly",(e=>FI(e).W().next((e=>this.vi(e,18e5).map((e=>e.clientId))))))}get started(){return this.qr}getMutationQueue(e,t){return GE.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new FE(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return hE.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,n){Dg("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 16===e?uy:15===e?ly:14===e?cy:13===e?ay:12===e?oy:11===e?sy:void Mg()}(this.ui);let s;return this.Ei.runTransaction(e,r,i,(r=>(s=new hy(r,this.kr?this.kr.next():Dv._e),"readwrite-primary"===t?this.gi(s).next((e=>!!e||this.pi(s))).next((t=>{if(!t)throw Og("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new jg(Bg.FAILED_PRECONDITION,yv);return n(s)})).next((e=>this.wi(s).next((()=>e)))):this.ki(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}ki(e){return LI(e).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new jg(Bg.FAILED_PRECONDITION,DI)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return LI(e).put("owner",t)}static D(){return Iv.D()}yi(e){const t=LI(e);return t.get("owner").next((e=>this.Si(e)?(Dg("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):_v.resolve()))}Ci(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Og("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;Wi()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return Dg("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Og("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(CR){Og("Failed to set zombie client id.",CR)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(CR){}}Fi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function LI(e){return dy(e,"owner")}function FI(e){return dy(e,"clientMetadata")}function MI(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class UI{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=ub(),r=ub();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new UI(e,t.fromCache,n,r)}}class VI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class BI{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=Wi()?8:Iv.v(ji())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new VI;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(Rg()<=ps.DEBUG&&Dg("QueryEngine","SDK will not create cache indexes for query:",Qw(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),_v.resolve()):(Rg()<=ps.DEBUG&&Dg("QueryEngine","Query:",Qw(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(Rg()<=ps.DEBUG&&Dg("QueryEngine","The SDK decides to create cache indexes for query:",Qw(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zw(t))):_v.resolve())}ji(e,t){if(Vw(t))return _v.resolve(null);let n=zw(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Hw(t,null,"F"),n=zw(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=ub(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Zi(t,r);return this.Xi(t,s,i,n.readTime)?this.ji(e,Hw(t,null,"F")):this.es(e,s,t,n)}))))})))))}Hi(e,t,n,r){return Vw(t)||r.isEqual(rv.min())?_v.resolve(null):this.zi.getDocuments(e,n).next((i=>{const s=this.Zi(t,i);return this.Xi(t,s,n,r)?_v.resolve(null):(Rg()<=ps.DEBUG&&Dg("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Qw(t)),this.es(e,s,t,pv(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new wy(Jw(e));return t.forEach(((t,r)=>{Yw(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return Rg()<=ps.DEBUG&&Dg("QueryEngine","Using full collection scan to execute query:",Qw(t)),this.zi.getDocumentsMatchingQuery(e,t,gv.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class jI{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new gy(Zg),this.rs=new Zw((e=>Pw(e)),Nw),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wI(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function zI(e,t,n,r){return new jI(e,t,n,r)}async function qI(e,t){const n=Vg(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=ub();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({us:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function KI(e){const t=Vg(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function HI(e,t,n){let r=ub(),i=ub();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=tb();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(rv.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Dg("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:r,ls:i}}))}function GI(e,t){const n=Vg(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function WI(e,t){const n=Vg(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,_v.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new Y_(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function QI(e,t,n){const r=Vg(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!kv(e))throw e;Dg("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function YI(e,t,n){const r=Vg(e);let i=rv.min(),s=ub();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Vg(e),i=r.rs.get(n);return void 0!==i?_v.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,zw(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:rv.min(),n?s:ub()))).next((e=>(XI(r,$w(t),e),{documents:e,hs:s})))))}function $I(e,t){const n=Vg(e),r=Vg(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r._t(e,t).next((e=>e?e.target:null))))}function JI(e,t){const n=Vg(e),r=n.ss.get(t)||rv.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.os.getAllFromCollectionGroup(e,t,pv(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(XI(n,t,e),e)))}function XI(e,t,n){let r=e.ss.get(t)||rv.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}async function ZI(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ub();const r=await WI(e,zw(iE(t.bundledQuery))),i=Vg(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=I_(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.$r.saveNamedQuery(e,t);const o=r.withResumeToken(Sy.EMPTY_BYTE_STRING,s);return i.ns=i.ns.insert(o.targetId,o),i.Qr.updateTargetData(e,o).next((()=>i.Qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.$r.saveNamedQuery(e,t)))}))}function eS(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function tS(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function nS(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class rS{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Es(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new jg(r.error.code,r.error.message))),s?new rS(e,t,r.state,i):(Og("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class iS{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Es(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new jg(n.error.code,n.error.message))),i?new iS(e,n.state,r):(Og("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sS{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=db();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Fv(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new sS(e,i):(Og("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class oS{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new oS(t.clientId,t.onlineState):(Og("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class aS{constructor(){this.activeTargetIds=db()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cS{constructor(e,t,n,r,i){this.window=e,this.oi=t,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new gy(Zg),this.started=!1,this.ys=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=eS(this.persistenceKey,this.Vs),this.Ss=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new aS),this.bs=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.vs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Fs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const n of e){if(n===this.Vs)continue;const e=this.getItem(eS(this.persistenceKey,n));if(e){const t=sS.Es(n,e);t&&(this.ps=this.ps.insert(t.clientId,t))}}this.Ms();const t=this.storage.getItem(this.vs);if(t){const e=this.xs(t);e&&this.Os(e)}for(const n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,n){this.Ls(e,t,n),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(nS(this.persistenceKey,e));if(n){const r=iS.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(nS(this.persistenceKey,e))}updateQueryState(e,t,n){this.qs(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Bs(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Dg("SharedClientState","READ",e,t),t}setItem(e,t){Dg("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Dg("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const t=e;if(t.storageArea===this.storage){if(Dg("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void Og("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.bs.test(t.key)){if(null==t.newValue){const e=this.$s(t.key);return this.Us(e,null)}{const e=this.Ws(t.key,t.newValue);if(e)return this.Us(e.clientId,e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.Gs(t.key,t.newValue);if(e)return this.zs(e)}}else if(this.Cs.test(t.key)){if(null!==t.newValue){const e=this.js(t.key,t.newValue);if(e)return this.Hs(e)}}else if(t.key===this.vs){if(null!==t.newValue){const e=this.xs(t.newValue);if(e)return this.Os(e)}}else if(t.key===this.Ss){const e=function(e){let t=Dv._e;if(null!=e)try{const n=JSON.parse(e);Ug("number"==typeof n),t=n}catch(e){Og("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Dv._e&&this.sequenceNumberHandler(e)}else if(t.key===this.Fs){const e=this.Js(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Ys(e))))}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,n){const r=new rS(this.currentUser,e,t,n),i=tS(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}Bs(e){const t=tS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){const t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,n){const r=nS(this.persistenceKey,e),i=new iS(e,t,n);this.setItem(r,i.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const n=this.$s(e);return sS.Es(n,t)}Gs(e,t){const n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return rS.Es(new Ag(i),r,t)}js(e,t){const n=this.Cs.exec(e),r=Number(n[1]);return iS.Es(r,t)}xs(e){return oS.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);Dg("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const n=t?this.ps.insert(e,t):this.ps.remove(e),r=this.Ns(this.ps),i=this.Ns(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.eo(s,o).then((()=>{this.ps=n}))}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=db();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class lS{constructor(){this.no=new aS,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new aS,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class uS{io(e){}shutdown(){}}class hS{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Dg("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Dg("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let dS=null;function fS(){return null===dS?dS=268435456+Math.round(2147483648*Math.random()):dS++,"0x"+dS.toString(16)}const pS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mS{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const gS="WebChannelConnection";class vS extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.fo=t+"://"+e.host,this.po="projects/".concat(n,"/databases/").concat(r),this.yo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get wo(){return!1}So(e,t,n,r,i){const s=fS(),o=this.bo(e,t.toUriEncodedString());Dg("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,r,i),this.Co(e,o,a,n).then((t=>(Dg("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw Lg("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}vo(e,t,n,r,i,s){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Pg,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=pS[e];return"".concat(this.fo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,n,r){const i=fS();return new Promise(((s,o)=>{const a=new Tg;a.setWithCredentials(!0),a.listenOnce(_g.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case bg.NO_ERROR:const t=a.getResponseJson();Dg(gS,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case bg.TIMEOUT:Dg(gS,"RPC '".concat(e,"' ").concat(i," timed out")),o(new jg(Bg.DEADLINE_EXCEEDED,"Request time out"));break;case bg.HTTP_ERROR:const n=a.getStatus();if(Dg(gS,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Bg).indexOf(t)>=0?t:Bg.UNKNOWN}(t.status);o(new jg(e,t.message))}else o(new jg(Bg.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new jg(Bg.UNAVAILABLE,"Connection failed."));break;default:Mg()}}finally{Dg(gS,"RPC '".concat(e,"' ").concat(i," completed."))}}));const c=JSON.stringify(r);Dg(gS,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",c,n,15)}))}Fo(e,t,n){const r=fS(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=yg(),o=wg(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const l=i.join("");Dg(gS,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(l),a);const u=s.createWebChannel(l,a);let h=!1,d=!1;const f=new mS({lo:t=>{d?Dg(gS,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Dg(gS,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),Dg(gS,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},ho:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,Sg.EventType.OPEN,(()=>{d||Dg(gS,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(u,Sg.EventType.CLOSE,(()=>{d||(d=!0,Dg(gS,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Vo())})),p(u,Sg.EventType.ERROR,(t=>{d||(d=!0,Lg(gS,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Vo(new jg(Bg.UNAVAILABLE,"The operation could not be completed")))})),p(u,Sg.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Ug(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Dg(gS,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=Yb[e];if(void 0!==t)return Xb(t)}(t),i=o.message;void 0===n&&(n=Bg.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.Vo(new jg(n,i)),u.close()}else Dg(gS,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.mo(i)}})),p(o,Eg.STAT_EVENT,(t=>{t.stat===Ig.PROXY?Dg(gS,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Ig.NOPROXY&&Dg(gS,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ro()}),0),f}}function yS(){return"undefined"!=typeof window?window:null}function wS(){return"undefined"!=typeof document?document:null}function bS(e){return new y_(e,!0)}class _S{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.Mo=n,this.xo=r,this.Oo=i,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Bo),r=Math.max(0,t-n);r>0&&Dg("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Lo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Bo=Date.now(),e()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}class ES{constructor(e,t,n,r,i,s,o,a){this.oi=e,this.$o=n,this.Uo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new _S(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==e?this.jo.reset():t&&t.code===Bg.RESOURCE_EXHAUSTED?(Og(t.toString()),Og("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===Bg.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Wo===t&&this.o_(n,r)}),(t=>{e((()=>{const e=new jg(Bg.UNKNOWN,"Fetching auth token failed: "+t.message);return this.__(e)}))}))}o_(e,t){const n=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((e=>{n((()=>this.__(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(e){return Dg("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget((()=>this.Wo===e?t():(Dg("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class IS extends ES{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Mg()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Ug(void 0===t||"string"==typeof t),Sy.fromBase64String(t||"")):(Ug(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Sy.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Bg.UNKNOWN:Xb(e.code);return new jg(t,e.message||"")}(o);n=new u_(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=x_(e,r.document.name),s=I_(r.document.updateTime),o=r.document.createTime?I_(r.document.createTime):rv.min(),a=new tw({mapValue:{fields:r.document.fields}}),c=rw.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new c_(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=x_(e,r.document),s=r.readTime?I_(r.readTime):rv.min(),o=rw.newNoDocument(i,s),a=r.removedTargetIds||[];n=new c_([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=x_(e,r.document),s=r.removedTargetIds||[];n=new c_([],s,i,null)}else{if(!("filter"in t))return Mg();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Qb(r,i),o=e.targetId;n=new l_(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return rv.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?rv.min():t.readTime?I_(t.readTime):rv.min()}(e);return this.listener.u_(t,n)}c_(e){const t={};t.database=N_(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Rw(r)?{documents:M_(e,r)}:{query:U_(e,r).ut},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=__(e,t.resumeToken);const r=w_(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(rv.min())>0){n.readTime=b_(e,t.snapshotVersion.toTimestamp());const r=w_(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Mg()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.t_(t)}l_(e){const t={};t.database=N_(this.serializer),t.removeTarget=e,this.t_(t)}}class SS extends ES{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(Ug(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function(e,t){return e&&e.length>0?(Ug(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?I_(e.updateTime):I_(t);return n.isEqual(rv.min())&&(n=I_(t)),new Ab(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=I_(e.commitTime);return this.listener.T_(n,t)}return Ug(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=N_(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>L_(this.serializer,e)))};this.t_(t)}}class TS extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new jg(Bg.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.So(e,T_(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Bg.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new jg(Bg.UNKNOWN,e.toString())}))}vo(e,t,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.vo(e,T_(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Bg.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new jg(Bg.UNKNOWN,e.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class kS{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(Og(t),this.g_=!1):Dg("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class CS{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io((e=>{n.enqueueAndForget((async()=>{FS(this)&&(Dg("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Vg(e);t.v_.add(4),await AS(t),t.x_.set("Unknown"),t.v_.delete(4),await xS(t)}(this))}))})),this.x_=new kS(n,r)}}async function xS(e){if(FS(e))for(const t of e.F_)await t(!0)}async function AS(e){for(const t of e.F_)await t(!1)}function PS(e,t){const n=Vg(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),LS(n)?OS(n):eT(n).Jo()&&RS(n,t))}function NS(e,t){const n=Vg(e),r=eT(n);n.C_.delete(t),r.Jo()&&DS(n,t),0===n.C_.size&&(r.Jo()?r.Xo():FS(n)&&n.x_.set("Unknown"))}function RS(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(rv.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}eT(e).c_(t)}function DS(e,t){e.O_.Oe(t),eT(e).l_(t)}function OS(e){e.O_=new d_({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),eT(e).start(),e.x_.p_()}function LS(e){return FS(e)&&!eT(e).Ho()&&e.C_.size>0}function FS(e){return 0===Vg(e).v_.size}function MS(e){e.O_=void 0}async function US(e){e.C_.forEach(((t,n)=>{RS(e,t)}))}async function VS(e,t){MS(e),LS(e)?(e.x_.S_(t),OS(e)):e.x_.set("Unknown")}async function BS(e,t,n){if(e.x_.set("Online"),t instanceof u_&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.C_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.C_.delete(r),e.O_.removeTarget(r))}(e,t)}catch(n){Dg("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await jS(e,n)}else if(t instanceof c_?e.O_.$e(t):t instanceof l_?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(rv.min()))try{const t=await KI(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.O_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.C_.get(r);i&&e.C_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.C_.get(t);if(!r)return;e.C_.set(t,r.withResumeToken(Sy.EMPTY_BYTE_STRING,r.snapshotVersion)),DS(e,t);const i=new Y_(r.target,t,n,r.sequenceNumber);RS(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Dg("RemoteStore","Failed to raise snapshot:",t),await jS(e,t)}}async function jS(e,t,n){if(!kv(t))throw t;e.v_.add(1),await AS(e),e.x_.set("Offline"),n||(n=()=>KI(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Dg("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await xS(e)}))}function zS(e,t){return t().catch((n=>jS(e,n,t)))}async function qS(e){const t=Vg(e),n=tT(t);let r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;KS(t);)try{const e=await GI(t.localStore,r);if(null===e){0===t.D_.length&&n.Xo();break}r=e.batchId,HS(t,e)}catch(e){await jS(t,e)}GS(t)&&WS(t)}function KS(e){return FS(e)&&e.D_.length<10}function HS(e,t){e.D_.push(t);const n=tT(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function GS(e){return FS(e)&&!tT(e).Ho()&&e.D_.length>0}function WS(e){tT(e).start()}async function QS(e){tT(e).d_()}async function YS(e){const t=tT(e);for(const n of e.D_)t.I_(n.mutations)}async function $S(e,t,n){const r=e.D_.shift(),i=Gb.from(r,t,n);await zS(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await qS(e)}async function JS(e,t){t&&tT(e).P_&&await async function(e,t){if(function(e){return Jb(e)&&e!==Bg.ABORTED}(t.code)){const n=e.D_.shift();tT(e).Zo(),await zS(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await qS(e)}}(e,t),GS(e)&&WS(e)}async function XS(e,t){const n=Vg(e);n.asyncQueue.verifyOperationInProgress(),Dg("RemoteStore","RemoteStore received new credentials");const r=FS(n);n.v_.add(3),await AS(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await xS(n)}async function ZS(e,t){const n=Vg(e);t?(n.v_.delete(2),await xS(n)):t||(n.v_.add(2),await AS(n),n.x_.set("Unknown"))}function eT(e){return e.N_||(e.N_=function(e,t,n){const r=Vg(e);return r.R_(),new IS(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:US.bind(null,e),To:VS.bind(null,e),u_:BS.bind(null,e)}),e.F_.push((async t=>{t?(e.N_.Zo(),LS(e)?OS(e):e.x_.set("Unknown")):(await e.N_.stop(),MS(e))}))),e.N_}function tT(e){return e.L_||(e.L_=function(e,t,n){const r=Vg(e);return r.R_(),new SS(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:QS.bind(null,e),To:JS.bind(null,e),E_:YS.bind(null,e),T_:$S.bind(null,e)}),e.F_.push((async t=>{t?(e.L_.Zo(),await qS(e)):(await e.L_.stop(),e.D_.length>0&&(Dg("RemoteStore","Stopping write stream with ".concat(e.D_.length," pending writes")),e.D_=[]))}))),e.L_}class nT{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new zg,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new nT(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new jg(Bg.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rT(e,t){if(Og("AsyncQueue","".concat(t,": ").concat(e)),kv(e))return new jg(Bg.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class iT{constructor(e){this.comparator=e?(t,n)=>e(t,n)||cv.comparator(t.key,n.key):(e,t)=>cv.comparator(e.key,t.key),this.keyedMap=rb(),this.sortedSet=new gy(this.comparator)}static emptySet(e){return new iT(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof iT))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new iT;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class sT{constructor(){this.B_=new gy(cv.comparator)}track(e){const t=e.doc.key,n=this.B_.get(t);n?0!==e.type&&3===n.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==n.type?this.B_=this.B_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.B_=this.B_.remove(t):1===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):Mg():this.B_=this.B_.insert(t,e)}k_(){const e=[];return this.B_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class oT{constructor(e,t,n,r,i,s,o,a,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new oT(e,t,iT.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class aT{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some((e=>e.U_()))}}class cT{constructor(){this.queries=new Zw((e=>Ww(e)),Gw),this.onlineState="Unknown",this.W_=new Set}}async function lT(e,t){const n=Vg(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.K_()&&t.U_()&&(r=2):(s=new aT,r=t.U_()?0:1);try{switch(r){case 0:s.q_=await n.onListen(i,!0);break;case 1:s.q_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=rT(e,"Initialization of query '".concat(Qw(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.Q_.push(t),t.G_(n.onlineState),s.q_&&t.z_(s.q_)&&fT(n)}async function uT(e,t){const n=Vg(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.Q_.indexOf(t);e>=0&&(s.Q_.splice(e,1),0===s.Q_.length?i=t.U_()?0:1:!s.K_()&&t.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function hT(e,t){const n=Vg(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Q_)e.z_(i)&&(r=!0);t.q_=i}}r&&fT(n)}function dT(e,t,n){const r=Vg(e),i=r.queries.get(t);if(i)for(const s of i.Q_)s.onError(n);r.queries.delete(t)}function fT(e){e.W_.forEach((e=>{e.next()}))}var pT,mT;(mT=pT||(pT={})).j_="default",mT.Cache="cache";class gT{constructor(e,t,n){this.query=e,this.H_=t,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=n||{}}z_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new oT(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),t=!0):this.X_(e,this.onlineState)&&(this.ea(e),t=!0),this.Y_=e,t}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let t=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),t=!0),t}X_(e,t){if(!e.fromCache)return!0;if(!this.U_())return!0;const n="Offline"!==t;return(!this.options.ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Z_(e){if(e.docChanges.length>0)return!0;const t=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ea(e){e=oT.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==pT.Cache}}class vT{constructor(e,t){this.na=e,this.byteLength=t}ra(){return"metadata"in this.na}}class yT{constructor(e){this.serializer=e}Ps(e){return x_(this.serializer,e)}Is(e){return e.metadata.exists?O_(this.serializer,e.document,!1):rw.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return I_(e)}}class wT{constructor(e,t,n){this.ia=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=bT(e)}sa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.na.namedQuery)this.queries.push(e.na.namedQuery);else if(e.na.documentMetadata){this.documents.push({metadata:e.na.documentMetadata}),e.na.documentMetadata.exists||++t;const n=sv.fromString(e.na.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.na.document&&(this.documents[this.documents.length-1].document=e.na.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}oa(e){const t=new Map,n=new yT(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Ps(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||ub()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Vg(e);let s=ub(),o=tb();for(const l of n){const e=t.Ps(l.metadata.name);l.document&&(s=s.add(e));const n=t.Is(l);n.setReadTime(t.Ts(l.metadata.readTime)),o=o.insert(e,n)}const a=i.os.newChangeBuffer({trackRemovals:!0}),c=await WI(i,function(e){return zw(Uw(sv.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>HI(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.Qr.removeMatchingKeysForTargetId(e,c.targetId).next((()=>i.Qr.addMatchingKeys(e,s,c.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls))).next((()=>t.cs))))))}(this.localStore,new yT(this.serializer),this.documents,this.ia.id),t=this.oa(this.documents);for(const n of this.queries)await ZI(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,_a:this.collectionGroups,aa:e}}}function bT(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class _T{constructor(e){this.key=e}}class ET{constructor(e){this.key=e}}class IT{constructor(e,t){this.query=e,this.ua=t,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=ub(),this.mutatedKeys=ub(),this.ha=Jw(e),this.Pa=new iT(this.ha)}get Ia(){return this.ua}Ta(e,t){const n=t?t.Ea:new sT,r=t?t.Pa:this.Pa;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const l=r.get(e),u=Yw(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.da(l,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.ha(u,a)>0||c&&this.ha(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Pa:s,Ea:n,Xi:o,mutatedKeys:i}}da(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const s=e.Ea.k_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Mg()}};return n(e)-n(t)}(e.type,t.type)||this.ha(e.doc,t.doc))),this.Aa(n),r=null!=r&&r;const o=t&&!r?this.Ra():[],a=0===this.la.size&&this.current&&!r?1:0,c=a!==this.ca;return this.ca=a,0!==s.length||c?{snapshot:new oT(this.query,e.Pa,i,s,e.mutatedKeys,0===a,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),Va:o}:{Va:o}}G_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new sT,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach((e=>this.ua=this.ua.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.ua=this.ua.delete(e))),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=ub(),this.Pa.forEach((e=>{this.ma(e.key)&&(this.la=this.la.add(e.key))}));const t=[];return e.forEach((e=>{this.la.has(e)||t.push(new ET(e))})),this.la.forEach((n=>{e.has(n)||t.push(new _T(n))})),t}fa(e){this.ua=e.hs,this.la=ub();const t=this.Ta(e.documents);return this.applyChanges(t,!0)}ga(){return oT.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,0===this.ca,this.hasCachedResults)}}class ST{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class TT{constructor(e){this.key=e,this.pa=!1}}class kT{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.ya={},this.wa=new Zw((e=>Ww(e)),Gw),this.Sa=new Map,this.ba=new Set,this.Da=new gy(cv.comparator),this.Ca=new Map,this.va=new EI,this.Fa={},this.Ma=new Map,this.xa=JE.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return!0===this.Oa}}async function CT(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=nk(e);let i;const s=r.wa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ga()):i=await AT(r,t,n,!0),i}async function xT(e,t){const n=nk(e);await AT(n,t,!0,!1)}async function AT(e,t,n,r){const i=await WI(e.localStore,zw(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await PT(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&PS(e.remoteStore,i),a}async function PT(e,t,n,r,i){e.Na=(t,n,r)=>async function(e,t,n,r){let i=t.view.Ta(n);i.Xi&&(i=await YI(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.Ta(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return zT(e,t.targetId,a.Va),a.snapshot}(e,t,n,r);const s=await YI(e.localStore,t,!0),o=new IT(t,s.hs),a=o.Ta(s.documents),c=a_.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),l=o.applyChanges(a,e.isPrimaryClient,c);zT(e,n,l.Va);const u=new ST(t,n,o);return e.wa.set(t,u),e.Sa.has(n)?e.Sa.get(n).push(t):e.Sa.set(n,[t]),l.snapshot}async function NT(e,t,n){const r=Vg(e),i=r.wa.get(t),s=r.Sa.get(i.targetId);if(s.length>1)return r.Sa.set(i.targetId,s.filter((e=>!Gw(e,t)))),void r.wa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await QI(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&NS(r.remoteStore,i.targetId),BT(r,i.targetId)})).catch(bv)):(BT(r,i.targetId),await QI(r.localStore,i.targetId,!0))}async function RT(e,t){const n=Vg(e),r=n.wa.get(t),i=n.Sa.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),NS(n.remoteStore,r.targetId))}async function DT(e,t){const n=Vg(e);try{const e=await function(e,t){const n=Vg(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const o=[];t.targetChanges.forEach(((s,a)=>{const c=i.get(a);if(!c)return;o.push(n.Qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,s.addedDocuments,a))));let l=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?l=l.withResumeToken(Sy.EMPTY_BYTE_STRING,rv.min()).withLastLimboFreeSnapshotVersion(rv.min()):s.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(s.resumeToken,r)),i=i.insert(a,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,s)&&o.push(n.Qr.updateTargetData(e,l))}));let a=tb(),c=ub();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(HI(e,s,t.documentUpdates).next((e=>{a=e.cs,c=e.ls}))),!r.isEqual(rv.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return _v.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,c))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Ca.get(t);r&&(Ug(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.pa=!0:e.modifiedDocuments.size>0?Ug(r.pa):e.removedDocuments.size>0&&(Ug(r.pa),r.pa=!1))})),await HT(n,e,t)}catch(e){await bv(e)}}function OT(e,t,n){const r=Vg(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wa.forEach(((n,r)=>{const i=r.view.G_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Vg(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.Q_)i.G_(t)&&(r=!0)})),r&&fT(n)}(r.eventManager,t),e.length&&r.ya.u_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function LT(e,t,n){const r=Vg(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Ca.get(t),s=i&&i.key;if(s){let e=new gy(cv.comparator);e=e.insert(s,rw.newNoDocument(s,rv.min()));const n=ub().add(s),i=new o_(rv.min(),new Map,new gy(Zg),e,n);await DT(r,i),r.Da=r.Da.remove(s),r.Ca.delete(t),KT(r)}else await QI(r.localStore,t,!1).then((()=>BT(r,t,n))).catch(bv)}async function FT(e,t){const n=Vg(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Vg(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=_v.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Ug(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=ub();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);VT(n,r,null),UT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await HT(n,e)}catch(e){await bv(e)}}async function MT(e,t,n){const r=Vg(e);try{const e=await function(e,t){const n=Vg(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Ug(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);VT(r,t,n),UT(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await HT(r,e)}catch(n){await bv(n)}}function UT(e,t){(e.Ma.get(t)||[]).forEach((e=>{e.resolve()})),e.Ma.delete(t)}function VT(e,t,n){const r=Vg(e);let i=r.Fa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Fa[r.currentUser.toKey()]=i}}function BT(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Sa.get(t))e.wa.delete(r),n&&e.ya.La(r,n);e.Sa.delete(t),e.isPrimaryClient&&e.va.Vr(t).forEach((t=>{e.va.containsKey(t)||jT(e,t)}))}function jT(e,t){e.ba.delete(t.path.canonicalString());const n=e.Da.get(t);null!==n&&(NS(e.remoteStore,n),e.Da=e.Da.remove(t),e.Ca.delete(n),KT(e))}function zT(e,t,n){for(const r of n)r instanceof _T?(e.va.addReference(r.key,t),qT(e,r)):r instanceof ET?(Dg("SyncEngine","Document no longer in limbo: "+r.key),e.va.removeReference(r.key,t),e.va.containsKey(r.key)||jT(e,r.key)):Mg()}function qT(e,t){const n=t.key,r=n.path.canonicalString();e.Da.get(n)||e.ba.has(r)||(Dg("SyncEngine","New document in limbo: "+n),e.ba.add(r),KT(e))}function KT(e){for(;e.ba.size>0&&e.Da.size<e.maxConcurrentLimboResolutions;){const t=e.ba.values().next().value;e.ba.delete(t);const n=new cv(sv.fromString(t)),r=e.xa.next();e.Ca.set(r,new TT(n)),e.Da=e.Da.insert(n,r),PS(e.remoteStore,new Y_(zw(Uw(n.path)),r,"TargetPurposeLimboResolution",Dv._e))}}async function HT(e,t,n){const r=Vg(e),i=[],s=[],o=[];r.wa.isEmpty()||(r.wa.forEach(((e,a)=>{o.push(r.Na(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=UI.Ki(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.ya.u_(i),await async function(e,t){const n=Vg(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>_v.forEach(t,(t=>_v.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>_v.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!kv(e))throw e;Dg("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,s))}async function GT(e,t){const n=Vg(e);if(!n.currentUser.isEqual(t)){Dg("SyncEngine","User change. New user:",t.toKey());const e=await qI(n.localStore,t);n.currentUser=t,function(e,t){e.Ma.forEach((e=>{e.forEach((e=>{e.reject(new jg(Bg.CANCELLED,t))}))})),e.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await HT(n,e.us)}}function WT(e,t){const n=Vg(e),r=n.Ca.get(t);if(r&&r.pa)return ub().add(r.key);{let e=ub();const r=n.Sa.get(t);if(!r)return e;for(const t of r){const r=n.wa.get(t);e=e.unionWith(r.view.Ia)}return e}}async function QT(e,t){const n=Vg(e),r=await YI(n.localStore,t.query,!0),i=t.view.fa(r);return n.isPrimaryClient&&zT(n,t.targetId,i.Va),i}async function YT(e,t){const n=Vg(e);return JI(n.localStore,t).then((e=>HT(n,e)))}async function $T(e,t,n,r){const i=Vg(e),s=await function(e,t){const n=Vg(e),r=Vg(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.vn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):_v.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await qS(i.remoteStore):"acknowledged"===n||"rejected"===n?(VT(i,t,r||null),UT(i,t),function(e,t){Vg(Vg(e).mutationQueue).Mn(t)}(i.localStore,t)):Mg(),await HT(i,s)):Dg("SyncEngine","Cannot apply mutation batch with id: "+t)}async function JT(e,t,n){const r=Vg(e),i=[],s=[];for(const o of t){let e;const t=r.Sa.get(o);if(t&&0!==t.length){e=await WI(r.localStore,zw(t[0]));for(const e of t){const t=r.wa.get(e),n=await QT(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await $I(r.localStore,o);e=await WI(r.localStore,t),await PT(r,XT(t),o,!1,e.resumeToken)}i.push(e)}return r.ya.u_(s),i}function XT(e){return Mw(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function ZT(e){return function(e){return Vg(Vg(e).persistence).Bi()}(Vg(e).localStore)}async function ek(e,t,n,r){const i=Vg(e);if(i.Oa)return void Dg("SyncEngine","Ignoring unexpected query state notification.");const s=i.Sa.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await JI(i.localStore,$w(s[0])),r=o_.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,Sy.EMPTY_BYTE_STRING);await HT(i,e,r);break}case"rejected":await QI(i.localStore,t,!0),BT(i,t,r);break;default:Mg()}}async function tk(e,t,n){const r=nk(e);if(r.Oa){for(const e of t){if(r.Sa.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){Dg("SyncEngine","Adding an already active target "+e);continue}const t=await $I(r.localStore,e),n=await WI(r.localStore,t);await PT(r,XT(t),n.targetId,!1,n.resumeToken),PS(r.remoteStore,n)}for(const e of n)r.Sa.has(e)&&await QI(r.localStore,e,!1).then((()=>{NS(r.remoteStore,e),BT(r,e)})).catch(bv)}}function nk(e){const t=Vg(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=DT.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=WT.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=LT.bind(null,t),t.ya.u_=hT.bind(null,t.eventManager),t.ya.La=dT.bind(null,t.eventManager),t}function rk(e){const t=Vg(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=FT.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=MT.bind(null,t),t}class ik{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=bS(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return zI(this.persistence,new BI,e.initialUser,this.serializer)}createPersistence(e){return new xI(PI.Hr,this.serializer)}createSharedClientState(e){return new lS}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class sk extends ik{constructor(e,t,n){super(),this.ka=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ka.initialize(this,e),await rk(this.ka.syncEngine),await qS(this.ka.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return zI(this.persistence,new BI,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new iI(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new Rv(t,this.persistence);return new Nv(e.asyncQueue,n)}createPersistence(e){const t=MI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?qE.withCacheSize(this.cacheSizeBytes):qE.DEFAULT;return new OI(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,yS(),wS(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new lS}}class ok extends sk{constructor(e,t){super(e,t,!1),this.ka=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.ka.syncEngine;this.sharedClientState instanceof cS&&(this.sharedClientState.syncEngine={Zs:$T.bind(null,t),Xs:ek.bind(null,t),eo:tk.bind(null,t),Bi:ZT.bind(null,t),Ys:YT.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi((async e=>{await async function(e,t){const n=Vg(e);if(nk(n),rk(n),!0===t&&!0!==n.Oa){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await JT(n,e.toArray());n.Oa=!0,await ZS(n.remoteStore,!0);for(const r of t)PS(n.remoteStore,r)}else if(!1===t&&!1!==n.Oa){const e=[];let t=Promise.resolve();n.Sa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(BT(n,i),QI(n.localStore,i,!0)))),NS(n.remoteStore,i)})),await t,await JT(n,e),function(e){const t=Vg(e);t.Ca.forEach(((e,n)=>{NS(t.remoteStore,n)})),t.va.mr(),t.Ca=new Map,t.Da=new gy(cv.comparator)}(n),n.Oa=!1,await ZS(n.remoteStore,!1)}}(this.ka.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=yS();if(!cS.D(t))throw new jg(Bg.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=MI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new cS(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class ak{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>OT(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=GT.bind(null,this.syncEngine),await ZS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new cT}createDatastore(e){const t=bS(e.databaseInfo.databaseId),n=function(e){return new vS(e)}(e.databaseInfo);return function(e,t,n,r){return new TS(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new CS(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>OT(this.syncEngine,e,0)),hS.D()?new hS:new uS)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new kT(e,t,n,r,i,s);return o&&(a.Oa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=Vg(e);Dg("RemoteStore","RemoteStore shutting down."),t.v_.add(5),await AS(t),t.M_.shutdown(),t.x_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}function ck(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class lk{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):Og("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class uk{constructor(e,t){this.Ka=e,this.serializer=t,this.metadata=new zg,this.buffer=new Uint8Array,this.$a=new TextDecoder("utf-8"),this.Ua().then((e=>{e&&e.ra()?this.metadata.resolve(e.na.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.na))))}),(e=>this.metadata.reject(e)))}close(){return this.Ka.cancel()}async getMetadata(){return this.metadata.promise}async Ba(){return await this.getMetadata(),this.Ua()}async Ua(){const e=await this.Wa();if(null===e)return null;const t=this.$a.decode(e),n=Number(t);isNaN(n)&&this.Ga("length string (".concat(t,") is not valid number"));const r=await this.za(n);return new vT(JSON.parse(r),e.length+n)}ja(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async Wa(){for(;this.ja()<0&&!await this.Ha(););if(0===this.buffer.length)return null;const e=this.ja();e<0&&this.Ga("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async za(e){for(;this.buffer.length<e;)await this.Ha()&&this.Ga("Reached the end of bundle when more is expected.");const t=this.$a.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Ga(e){throw this.Ka.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ha(){const e=await this.Ka.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class hk{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new jg(Bg.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=Vg(e),r={documents:t.map((e=>C_(n.serializer,e)))},i=await n.vo("BatchGetDocuments",n.serializer.databaseId,sv.emptyPath(),r,t.length),s=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Ug(!!t.found),t.found.name,t.found.updateTime;const n=x_(e,t.found.name),r=I_(t.found.updateTime),i=t.found.createTime?I_(t.found.createTime):rv.min(),s=new tw({mapValue:{fields:t.found.fields}});return rw.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){Ug(!!t.missing),Ug(!!t.readTime);const n=x_(e,t.missing),r=I_(t.readTime);return rw.newNoDocument(n,r)}(e,t):Mg()}(n.serializer,e);s.set(t.key.toString(),t)}));const o=[];return t.forEach((e=>{const t=s.get(e.toString());Ug(!!t),o.push(t)})),o}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new qb(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=cv.fromPath(t);this.mutations.push(new Kb(n,this.precondition(n)))})),await async function(e,t){const n=Vg(e),r={writes:t.map((e=>L_(n.serializer,e)))};await n.So("Commit",n.serializer.databaseId,sv.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Mg();t=rv.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new jg(Bg.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(rv.min())?Pb.exists(!1):Pb.updateTime(t):Pb.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(rv.min()))throw new jg(Bg.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Pb.updateTime(t)}return Pb.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class dk{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Ja=n.maxAttempts,this.jo=new _S(this.asyncQueue,"transaction_retry")}Ya(){this.Ja-=1,this.Za()}Za(){this.jo.qo((async()=>{const e=new hk(this.datastore),t=this.Xa(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.eu(e)}))))})).catch((e=>{this.eu(e)}))}))}Xa(e){try{const t=this.updateFunction(e);return!Ov(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}eu(e){this.Ja>0&&this.tu(e)?(this.Ja-=1,this.asyncQueue.enqueueAndForget((()=>(this.Za(),Promise.resolve())))):this.deferred.reject(e)}tu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Jb(t)}return!1}}class fk{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ag.UNAUTHENTICATED,this.clientId=Xg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Dg("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Dg("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new jg(Bg.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zg;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=rT(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function pk(e,t){e.asyncQueue.verifyOperationInProgress(),Dg("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await qI(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function mk(e,t){e.asyncQueue.verifyOperationInProgress();const n=await vk(e);Dg("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>XS(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>XS(t.remoteStore,n))),e._onlineComponents=t}function gk(e){return"FirebaseError"===e.name?e.code===Bg.FAILED_PRECONDITION||e.code===Bg.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function vk(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Dg("FirestoreClient","Using user provided OfflineComponentProvider");try{await pk(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!gk(n))throw n;Lg("Error using user provided cache. Falling back to memory cache: "+n),await pk(e,new ik)}}else Dg("FirestoreClient","Using default OfflineComponentProvider"),await pk(e,new ik);return e._offlineComponents}async function yk(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Dg("FirestoreClient","Using user provided OnlineComponentProvider"),await mk(e,e._uninitializedComponentsProvider._online)):(Dg("FirestoreClient","Using default OnlineComponentProvider"),await mk(e,new ak))),e._onlineComponents}function wk(e){return vk(e).then((e=>e.persistence))}function bk(e){return vk(e).then((e=>e.localStore))}function _k(e){return yk(e).then((e=>e.remoteStore))}function Ek(e){return yk(e).then((e=>e.syncEngine))}function Ik(e){return yk(e).then((e=>e.datastore))}async function Sk(e){const t=await yk(e),n=t.eventManager;return n.onListen=CT.bind(null,t.syncEngine),n.onUnlisten=NT.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=xT.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=RT.bind(null,t.syncEngine),n}function Tk(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new zg;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new lk({next:s=>{t.enqueueAndForget((()=>uT(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new jg(Bg.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new jg(Bg.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new gT(Uw(n.path),s,{includeMetadataChanges:!0,ta:!0});return lT(e,o)}(await Sk(e),e.asyncQueue,t,n,r))),r.promise}function kk(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new zg;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new lk({next:n=>{t.enqueueAndForget((()=>uT(e,o))),n.fromCache&&"server"===r.source?i.reject(new jg(Bg.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new gT(n,s,{includeMetadataChanges:!0,ta:!0});return lT(e,o)}(await Sk(e),e.asyncQueue,t,n,r))),r.promise}function Ck(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?e_().encode(e):e,function(e,t){return new uk(e,t)}(function(e,t){if(e instanceof Uint8Array)return ck(e,t);if(e instanceof ArrayBuffer)return ck(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,bS(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Vg(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Vg(e),r=I_(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.$r.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(bT(r));const i=new wT(r,e.localStore,t.serializer);let s=await t.Ba();for(;s;){const e=await i.sa(s);e&&n._updateProgress(e),s=await t.Ba()}const o=await i.complete();return await HT(e,o.aa,void 0),await function(e,t){const n=Vg(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.$r.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o._a)}catch(e){return Lg("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await Ek(e),i,r)}))}function xk(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Ak=new Map;function Pk(e,t,n){if(!n)throw new jg(Bg.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Nk(e,t,n,r){if(!0===t&&!0===r)throw new jg(Bg.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Rk(e){if(!cv.isDocumentKey(e))throw new jg(Bg.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Dk(e){if(cv.isDocumentKey(e))throw new jg(Bg.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ok(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Mg()}function Lk(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new jg(Bg.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ok(e);throw new jg(Bg.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Fk(e,t){if(t<=0)throw new jg(Bg.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class Mk{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new jg(Bg.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new jg(Bg.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Nk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xk(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new jg(Bg.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new jg(Bg.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new jg(Bg.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uk{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mk({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new jg(Bg.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new jg(Bg.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mk(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Kg;switch(e.type){case"firstParty":return new Qg(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new jg(Bg.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Ak.get(e);t&&(Dg("ComponentProvider","Removing Datastore"),Ak.delete(e),t.terminate())}(this),Promise.resolve()}}function Vk(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Lk(e,Uk))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&Lg("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Ag.MOCK_USER;else{t=Bi(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new jg(Bg.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ag(s)}e._authCredentials=new Hg(new qg(t,n))}}class Bk{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Bk(this.firestore,e,this._query)}}class jk{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zk(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jk(this.firestore,e,this._key)}}class zk extends Bk{constructor(e,t,n){super(e,t,Uw(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jk(this.firestore,null,new cv(e))}withConverter(e){return new zk(this.firestore,e,this._path)}}function qk(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=as(e),Pk("collection","path",t),e instanceof Uk){const n=sv.fromString(t,...r);return Dk(n),new zk(e,null,n)}{if(!(e instanceof jk||e instanceof zk))throw new jg(Bg.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(sv.fromString(t,...r));return Dk(n),new zk(e.firestore,null,n)}}function Kk(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=as(e),1===arguments.length&&(t=Xg.newId()),Pk("doc","path",t),e instanceof Uk){const n=sv.fromString(t,...r);return Rk(n),new jk(e,null,new cv(n))}{if(!(e instanceof jk||e instanceof zk))throw new jg(Bg.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(sv.fromString(t,...r));return Rk(n),new jk(e.firestore,e instanceof zk?e.converter:null,new cv(n))}}function Hk(e,t){return e=as(e),t=as(t),(e instanceof jk||e instanceof zk)&&(t instanceof jk||t instanceof zk)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Gk(e,t){return e=as(e),t=as(t),e instanceof Bk&&t instanceof Bk&&e.firestore===t.firestore&&Gw(e._query,t._query)&&e.converter===t.converter}class Wk{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new _S(this,"async_queue_retry"),this.cu=()=>{const e=wS();e&&Dg("AsyncQueue","Visibility state changed to "+e.visibilityState),this.jo.Ko()};const e=wS();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const t=wS();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise((()=>{}));const t=new zg;return this.hu((()=>this.iu&&this.au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.ru.push(e),this.Pu())))}async Pu(){if(0!==this.ru.length){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(CR){if(!kv(CR))throw CR;Dg("AsyncQueue","Operation failed with retryable error: "+CR)}this.ru.length>0&&this.jo.qo((()=>this.Pu()))}}hu(e){const t=this.nu.then((()=>(this._u=!0,e().catch((e=>{this.ou=e,this._u=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Og("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this._u=!1,e))))));return this.nu=t,t}enqueueAfterDelay(e,t,n){this.lu(),this.uu.indexOf(e)>-1&&(t=0);const r=nT.createAndSchedule(this,e,t,n,(e=>this.Iu(e)));return this.su.push(r),r}lu(){this.ou&&Mg()}verifyOperationInProgress(){}async Tu(){let e;do{e=this.nu,await e}while(e!==this.nu)}Eu(e){for(const t of this.su)if(t.timerId===e)return!0;return!1}du(e){return this.Tu().then((()=>{this.su.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.su)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tu()}))}Au(e){this.uu.push(e)}Iu(e){const t=this.su.indexOf(e);this.su.splice(t,1)}}function Qk(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Yk{constructor(){this._progressObserver={},this._taskCompletionResolver=new zg,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class $k extends Uk{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Wk,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Xk(this),this._firestoreClient.terminate()}}function Jk(e){return e._firestoreClient||Xk(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Xk(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Ry(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,xk(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new fk(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function Zk(e,t,n){const r=new zg;return e.asyncQueue.enqueue((async()=>{try{await pk(e,n),await mk(e,t),r.resolve()}catch(e){const n=e;if(!gk(n))throw n;Lg("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function eC(e){return function(e){const t=new zg;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Vg(e);FS(n.remoteStore)||Dg("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Vg(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Ma.get(e)||[];r.push(t),n.Ma.set(e,r)}catch(e){const n=rT(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await Ek(e),t))),t.promise}(Jk(e=Lk(e,$k)))}function tC(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await wk(e),n=await _k(e);return t.setNetworkEnabled(!0),function(e){const t=Vg(e);return t.v_.delete(0),xS(t)}(n)}))}(Jk(e=Lk(e,$k)))}function nC(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await wk(e),n=await _k(e);return t.setNetworkEnabled(!1),async function(e){const t=Vg(e);t.v_.add(0),await AS(t),t.x_.set("Offline")}(n)}))}(Jk(e=Lk(e,$k)))}function rC(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Vg(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.$r.getNamedQuery(e,t)))}(await bk(e),t)))}(Jk(e=Lk(e,$k)),t).then((t=>t?new Bk(e,null,t.query):null))}function iC(e){if(e._initialized||e._terminated)throw new jg(Bg.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class sC{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sC(Sy.fromBase64String(e))}catch(e){throw new jg(Bg.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new sC(Sy.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class oC{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new jg(Bg.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new av(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class aC{constructor(e){this._methodName=e}}class cC{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new jg(Bg.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new jg(Bg.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Zg(this._lat,e._lat)||Zg(this._long,e._long)}}const lC=/^__.*__$/;class uC{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Vb(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ub(e,this.data,t,this.fieldTransforms)}}class hC{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Vb(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function dC(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Mg()}}class fC{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Ru(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new fC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.mu({path:n,gu:!1});return r.pu(e),r}yu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.mu({path:n,gu:!1});return r.Ru(),r}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return DC(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(0===e.length)throw this.Su("Document fields must not be empty");if(dC(this.Vu)&&lC.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class pC{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||bS(e)}Cu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new fC({Vu:e,methodName:t,Du:n,path:av.emptyPath(),gu:!1,bu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mC(e){const t=e._freezeSettings(),n=bS(e._databaseId);return new pC(e._databaseId,!!t.ignoreUndefinedProperties,n)}function gC(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Cu(s.merge||s.mergeFields?2:0,t,n,i);AC("Data must be an object, but it was:",o,r);const a=CC(r,o);let c,l;if(s.merge)c=new Ey(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=PC(t,r,n);if(!o.contains(i))throw new jg(Bg.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));OC(e,i)||e.push(i)}c=new Ey(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new uC(new tw(a),c,l)}class vC extends aC{_toFieldTransform(e){if(2!==e.Vu)throw 1===e.Vu?e.Su("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Su("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vC}}function yC(e,t,n){return new fC({Vu:3,Du:t.settings.Du,methodName:e._methodName,gu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class wC extends aC{_toFieldTransform(e){return new xb(e.path,new bb)}isEqual(e){return e instanceof wC}}class bC extends aC{constructor(e,t){super(e),this.vu=t}_toFieldTransform(e){const t=yC(this,e,!0),n=this.vu.map((e=>kC(e,t))),r=new _b(n);return new xb(e.path,r)}isEqual(e){return e instanceof bC&&Zi(this.vu,e.vu)}}class _C extends aC{constructor(e,t){super(e),this.vu=t}_toFieldTransform(e){const t=yC(this,e,!0),n=this.vu.map((e=>kC(e,t))),r=new Ib(n);return new xb(e.path,r)}isEqual(e){return e instanceof _C&&Zi(this.vu,e.vu)}}class EC extends aC{constructor(e,t){super(e),this.Fu=t}_toFieldTransform(e){const t=new Tb(e.serializer,mb(e.serializer,this.Fu));return new xb(e.path,t)}isEqual(e){return e instanceof EC&&this.Fu===e.Fu}}function IC(e,t,n,r){const i=e.Cu(1,t,n);AC("Data must be an object, but it was:",i,r);const s=[],o=tw.empty();py(r,((e,r)=>{const a=RC(t,e,n);r=as(r);const c=i.yu(a);if(r instanceof vC)s.push(a);else{const e=kC(r,c);null!=e&&(s.push(a),o.set(a,e))}}));const a=new Ey(s);return new hC(o,a,i.fieldTransforms)}function SC(e,t,n,r,i,s){const o=e.Cu(1,t,n),a=[PC(t,r,n)],c=[i];if(s.length%2!=0)throw new jg(Bg.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(PC(t,s[d])),c.push(s[d+1]);const l=[],u=tw.empty();for(let d=a.length-1;d>=0;--d)if(!OC(l,a[d])){const e=a[d];let t=c[d];t=as(t);const n=o.yu(e);if(t instanceof vC)l.push(e);else{const r=kC(t,n);null!=r&&(l.push(e),u.set(e,r))}}const h=new Ey(l);return new hC(u,h,o.fieldTransforms)}function TC(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return kC(n,e.Cu(r?4:3,t))}function kC(e,t){if(xC(e=as(e)))return AC("Unsupported field value:",t,e),CC(e,t);if(e instanceof aC)return function(e,t){if(!dC(t.Vu))throw t.Su("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Su("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.gu&&4!==t.Vu)throw t.Su("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=kC(i,t.wu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=as(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return mb(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=nv.fromDate(e);return{timestampValue:b_(t.serializer,n)}}if(e instanceof nv){const n=new nv(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:b_(t.serializer,n)}}if(e instanceof cC)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof sC)return{bytesValue:__(t.serializer,e._byteString)};if(e instanceof jk){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Su("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:S_(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Su("Unsupported field value: ".concat(Ok(e)))}(e,t)}function CC(e,t){const n={};return my(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):py(e,((e,r)=>{const i=kC(r,t.fu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function xC(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof nv||e instanceof cC||e instanceof sC||e instanceof jk||e instanceof aC)}function AC(e,t,n){if(!xC(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Ok(n);throw"an object"===r?t.Su(e+" a custom object"):t.Su(e+" "+r)}}function PC(e,t,n){if((t=as(t))instanceof oC)return t._internalPath;if("string"==typeof t)return RC(e,t);throw DC("Field path arguments must be of type string or ",e,!1,void 0,n)}const NC=new RegExp("[~\\*/\\[\\]]");function RC(e,t,n){if(t.search(NC)>=0)throw DC("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new oC(...t.split("."))._internalPath}catch(_d){throw DC("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function DC(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=" in field ".concat(r)),o&&(c+=" in document ".concat(i)),c+=")"),new jg(Bg.INVALID_ARGUMENT,a+e+c)}function OC(e,t){return e.some((e=>e.isEqual(t)))}class LC{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new jk(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new FC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(MC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class FC extends LC{data(){return super.data()}}function MC(e,t){return"string"==typeof t?RC(e,t):t instanceof oC?t._internalPath:t._delegate._internalPath}function UC(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new jg(Bg.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class VC{}class BC extends VC{}function jC(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof VC&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof qC)).length,n=e.filter((e=>e instanceof zC)).length;if(t>1||t>0&&n>0)throw new jg(Bg.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class zC extends BC{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new zC(e,t,n)}_apply(e){const t=this._parse(e);return JC(e._query,t),new Bk(e.firestore,e.converter,Kw(e._query,t))}_parse(e){const t=mC(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new jg(Bg.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){$C(o,s);const t=[];for(const n of o)t.push(YC(r,e,n));a={arrayValue:{values:t}}}else a=YC(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||$C(o,s),a=TC(n,t,o,"in"===s||"not-in"===s);return uw.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class qC extends VC{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new qC(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:hw.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)JC(n,i),n=Kw(n,i)}(e._query,t),new Bk(e.firestore,e.converter,Kw(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class KC extends BC{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new KC(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new jg(Bg.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new jg(Bg.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new aw(t,n)}(e._query,this._field,this._direction);return new Bk(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Fw(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class HC extends BC{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new HC(e,t,n)}_apply(e){return new Bk(e.firestore,e.converter,Hw(e._query,this._limit,this._limitType))}}class GC extends BC{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new GC(e,t,n)}_apply(e){const t=QC(e,this.type,this._docOrFields,this._inclusive);return new Bk(e.firestore,e.converter,function(e,t){return new Fw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class WC extends BC{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new WC(e,t,n)}_apply(e){const t=QC(e,this.type,this._docOrFields,this._inclusive);return new Bk(e.firestore,e.converter,function(e,t){return new Fw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function QC(e,t,n,r){if(n[0]=as(n[0]),n[0]instanceof LC)return function(e,t,n,r,i){if(!r)throw new jg(Bg.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of jw(e))if(o.field.isKeyField())s.push(qy(t,r.key));else{const e=r.data.field(o.field);if(Ay(e))throw new jg(Bg.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new jg(Bg.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new iw(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=mC(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new jg(Bg.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let c=0;c<i.length;c++){const s=i[c];if(o[c].field.isKeyField()){if("string"!=typeof s)throw new jg(Bg.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!Bw(e)&&-1!==s.indexOf("/"))throw new jg(Bg.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(sv.fromString(s));if(!cv.isDocumentKey(n))throw new jg(Bg.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new cv(n);a.push(qy(t,i))}else{const e=TC(n,r,s);a.push(e)}}return new iw(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function YC(e,t,n){if("string"==typeof(n=as(n))){if(""===n)throw new jg(Bg.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Bw(t)&&-1!==n.indexOf("/"))throw new jg(Bg.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(sv.fromString(n));if(!cv.isDocumentKey(r))throw new jg(Bg.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return qy(e,new cv(r))}if(n instanceof jk)return qy(e,n._key);throw new jg(Bg.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Ok(n),"."))}function $C(e,t){if(!Array.isArray(e)||0===e.length)throw new jg(Bg.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function JC(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new jg(Bg.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new jg(Bg.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class XC{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Fy(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Cy(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xy(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Mg()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return py(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new cC(Cy(e.latitude),Cy(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Py(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ny(e));default:return null}}convertTimestamp(e){const t=ky(e);return new nv(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=sv.fromString(e);Ug(Q_(n));const r=new Dy(n.get(1),n.get(3)),i=new cv(n.popFirst(5));return r.isEqual(t)||Og("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function ZC(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class ex extends XC{constructor(e){super(),this.firestore=e}convertBytes(e){return new sC(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jk(this.firestore,null,t)}}class tx{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class nx extends LC{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new rx(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(MC("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class rx extends nx{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class ix{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new tx(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new rx(this._firestore,this._userDataWriter,n.key,n,new tx(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new jg(Bg.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new rx(e._firestore,e._userDataWriter,n.doc.key,n.doc,new tx(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new rx(e._firestore,e._userDataWriter,t.doc.key,t.doc,new tx(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:sx(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function sx(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Mg()}}function ox(e,t){return e instanceof nx&&t instanceof nx?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof ix&&t instanceof ix&&e._firestore===t._firestore&&Gk(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class ax extends XC{constructor(e){super(),this.firestore=e}convertBytes(e){return new sC(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jk(this.firestore,null,t)}}function cx(e){e=Lk(e,jk);const t=Lk(e.firestore,$k),n=Jk(t),r=new ax(t);return function(e,t){const n=new zg;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Vg(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new jg(Bg.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=rT(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await bk(e),t,n))),n.promise}(n,e._key).then((n=>new nx(t,r,e._key,n,new tx(null!==n&&n.hasLocalMutations,!0),e.converter)))}function lx(e){e=Lk(e,Bk);const t=Lk(e.firestore,$k),n=Jk(t),r=new ax(t);return function(e,t){const n=new zg;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await YI(e,t,!0),i=new IT(t,r.hs),s=i.Ta(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=rT(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await bk(e),t,n))),n.promise}(n,e._query).then((n=>new ix(t,r,e,n)))}function ux(e,t,n){e=Lk(e,jk);const r=Lk(e.firestore,$k),i=ZC(e.converter,t,n);return px(r,[gC(mC(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Pb.none())])}function hx(e,t,n){e=Lk(e,jk);const r=Lk(e.firestore,$k),i=mC(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),c=3;c<o;c++)a[c-3]=arguments[c];return s="string"==typeof(t=as(t))||t instanceof oC?SC(i,"updateDoc",e._key,t,n,a):IC(i,"updateDoc",e._key,t),px(r,[s.toMutation(e._key,Pb.exists(!0))])}function dx(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=as(e);let a={includeMetadataChanges:!1,source:"default"},c=0;"object"!=typeof n[c]||Qk(n[c])||(a=n[c],c++);const l={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(Qk(n[c])){const e=n[c];n[c]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[c+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[c+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof jk)h=Lk(e.firestore,$k),d=Uw(e._key.path),u={next:t=>{n[c]&&n[c](mx(h,e,t))},error:n[c+1],complete:n[c+2]};else{const t=Lk(e,Bk);h=Lk(t.firestore,$k),d=t._query;const r=new ax(h);u={next:e=>{n[c]&&n[c](new ix(h,r,t,e))},error:n[c+1],complete:n[c+2]},UC(e._query)}return function(e,t,n,r){const i=new lk(r),s=new gT(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>lT(await Sk(e),s))),()=>{i.Qa(),e.asyncQueue.enqueueAndForget((async()=>uT(await Sk(e),s)))}}(Jk(h),d,l,u)}function fx(e,t){return function(e,t){const n=new lk(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Vg(e).W_.add(t),t.next()}(await Sk(e),n))),()=>{n.Qa(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Vg(e).W_.delete(t)}(await Sk(e),n)))}}(Jk(e=Lk(e,$k)),Qk(t)?t:{next:t})}function px(e,t){return function(e,t){const n=new zg;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=rk(e);try{const e=await function(e,t){const n=Vg(e),r=nv.now(),i=t.reduce(((e,t)=>e.add(t.key)),ub());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=tb(),c=ub();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Fb(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Vb(e.key,t,nw(t.value.mapValue),Pb.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:ib(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Fa[e.currentUser.toKey()];r||(r=new gy(Zg)),r=r.insert(t,n),e.Fa[e.currentUser.toKey()]=r}(r,e.batchId,n),await HT(r,e.changes),await qS(r.remoteStore)}catch(e){const t=rT(e,"Failed to persist write");n.reject(t)}}(await Ek(e),t,n))),n.promise}(Jk(e),t)}function mx(e,t,n){const r=n.docs.get(t._key),i=new ax(e);return new nx(e,i,t._key,r,new tx(n.hasPendingWrites,n.fromCache),t.converter)}const gx={maxAttempts:5};class vx{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=mC(e)}set(e,t,n){this._verifyNotCommitted();const r=yx(e,this._firestore),i=ZC(r.converter,t,n),s=gC(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Pb.none())),this}update(e,t,n){this._verifyNotCommitted();const r=yx(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=as(t))||t instanceof oC?SC(this._dataReader,"WriteBatch.update",r._key,t,n,o):IC(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Pb.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=yx(e,this._firestore);return this._mutations=this._mutations.concat(new qb(t._key,Pb.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new jg(Bg.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function yx(e,t){if((e=as(e)).firestore!==t)throw new jg(Bg.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class wx extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=mC(e)}get(e){const t=yx(e,this._firestore),n=new ex(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Mg();const r=e[0];if(r.isFoundDocument())return new LC(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new LC(this._firestore,n,t._key,null,t.converter);throw Mg()}))}set(e,t,n){const r=yx(e,this._firestore),i=ZC(r.converter,t,n),s=gC(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=yx(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=as(t))||t instanceof oC?SC(this._dataReader,"Transaction.update",r._key,t,n,o):IC(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=yx(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=yx(e,this._firestore),n=new ax(this._firestore);return super.get(e).then((e=>new nx(this._firestore,n,t._key,e._document,new tx(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Pg=e}(xo),wo(new cs("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new $k(new Gg(e.getProvider("auth-internal")),new $g(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new jg(Bg.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dy(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Oo(xg,"4.6.0",e),Oo(xg,"4.6.0","esm2017")}();function bx(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new jg("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function _x(){if("undefined"===typeof Uint8Array)throw new jg("unimplemented","Uint8Arrays are not available in this environment.")}function Ex(){if("undefined"==typeof atob)throw new jg("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Ix{constructor(e){this._delegate=e}static fromBase64String(e){return Ex(),new Ix(sC.fromBase64String(e))}static fromUint8Array(e){return _x(),new Ix(sC.fromUint8Array(e))}toBase64(){return Ex(),this._delegate.toBase64()}toUint8Array(){return _x(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Sx(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Tx{enableIndexedDbPersistence(e,t){return function(e,t){iC(e=Lk(e,$k));const n=Jk(e);if(n._uninitializedComponentsProvider)throw new jg(Bg.FAILED_PRECONDITION,"SDK cache is already specified.");Lg("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new ak;return Zk(n,i,new sk(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){iC(e=Lk(e,$k));const t=Jk(e);if(t._uninitializedComponentsProvider)throw new jg(Bg.FAILED_PRECONDITION,"SDK cache is already specified.");Lg("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new ak;return Zk(t,r,new ok(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new jg(Bg.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new zg;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Iv.D())return Promise.resolve();const t=e+"main";await Iv.delete(t)}(MI(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class kx{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Dy||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Lg("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Vk(this._delegate,e,t,n)}enableNetwork(){return tC(this._delegate)}disableNetwork(){return nC(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Nk("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return eC(this._delegate)}onSnapshotsInSync(e){return fx(this._delegate,e)}get app(){if(!this._appCompat)throw new jg("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Bx(this,qk(this._delegate,e))}catch(CR){throw Rx(CR,"collection()","Firestore.collection()")}}doc(e){try{return new Nx(this,Kk(this._delegate,e))}catch(CR){throw Rx(CR,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Mx(this,function(e,t){if(e=Lk(e,Uk),Pk("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new jg(Bg.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Bk(e,null,function(e){return new Fw(sv.emptyPath(),e)}(t))}(this._delegate,e))}catch(CR){throw Rx(CR,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=Lk(e,$k);const r=Object.assign(Object.assign({},gx),n);return function(e){if(e.maxAttempts<1)throw new jg(Bg.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new zg;return e.asyncQueue.enqueueAndForget((async()=>{const i=await Ik(e);new dk(e.asyncQueue,i,n,t,r).Ya()})),r.promise}(Jk(e),(n=>t(new wx(e,n))),r)}(this._delegate,(t=>e(new xx(this,t))))}batch(){return Jk(this._delegate),new Ax(new vx(this._delegate,(e=>px(this._delegate,e))))}loadBundle(e){return function(e,t){const n=Jk(e=Lk(e,$k)),r=new Yk;return Ck(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return rC(this._delegate,e).then((e=>e?new Mx(this,e):null))}}class Cx extends XC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ix(new sC(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Nx.forKey(t,this.firestore,null)}}class xx{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Cx(e)}get(e){const t=jx(e);return this._delegate.get(t).then((e=>new Lx(this._firestore,new nx(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=jx(e);return n?(bx("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=jx(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=jx(e);return this._delegate.delete(t),this}}class Ax{constructor(e){this._delegate=e}set(e,t,n){const r=jx(e);return n?(bx("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=jx(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=jx(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Px{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new rx(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Fx(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=Px.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new Px(e,new Cx(e),t),r.set(t,i)),i}}Px.INSTANCES=new WeakMap;class Nx{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Cx(e)}static forPath(e,t,n){if(e.length%2!==0)throw new jg("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new Nx(t,new jk(t._delegate,n,new cv(e)))}static forKey(e,t,n){return new Nx(t,new jk(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new Bx(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Bx(this.firestore,qk(this._delegate,e))}catch(CR){throw Rx(CR,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=as(e))instanceof jk&&Hk(this._delegate,e)}set(e,t){t=bx("DocumentReference.set",t);try{return t?ux(this._delegate,e,t):ux(this._delegate,e)}catch(CR){throw Rx(CR,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?hx(this._delegate,e):hx(this._delegate,e,t,...r)}catch(CR){throw Rx(CR,"updateDoc()","DocumentReference.update()")}}delete(){return function(e){return px(Lk(e.firestore,$k),[new qb(e._key,Pb.none())])}(this._delegate)}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Dx(t),i=Ox(t,(e=>new Lx(this.firestore,new nx(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return dx(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?cx(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Lk(e,jk);const t=Lk(e.firestore,$k);return Tk(Jk(t),e._key,{source:"server"}).then((n=>mx(t,e,n)))}(this._delegate):function(e){e=Lk(e,jk);const t=Lk(e.firestore,$k);return Tk(Jk(t),e._key).then((n=>mx(t,e,n)))}(this._delegate),t.then((e=>new Lx(this.firestore,new nx(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new Nx(this.firestore,e?this._delegate.withConverter(Px.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Rx(e,t,n){return e.message=e.message.replace(t,n),e}function Dx(e){for(const t of e)if("object"===typeof t&&!Sx(t))return t;return{}}function Ox(e,t){var n,r;let i;return i=Sx(e[0])?e[0]:Sx(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Lx{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Nx(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return ox(this._delegate,e._delegate)}}class Fx extends Lx{data(e){const t=this._delegate.data(e);return this._delegate._converter||function(e,t){e||Mg()}(void 0!==t),t}}class Mx{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Cx(e)}where(e,t,n){try{return new Mx(this.firestore,jC(this._delegate,function(e,t,n){const r=t,i=MC("where",e);return zC._create(i,r,n)}(e,t,n)))}catch(CR){throw Rx(CR,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Mx(this.firestore,jC(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=MC("orderBy",e);return KC._create(n,t)}(e,t)))}catch(CR){throw Rx(CR,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Mx(this.firestore,jC(this._delegate,function(e){return Fk("limit",e),HC._create("limit",e,"F")}(e)))}catch(CR){throw Rx(CR,"limit()","Query.limit()")}}limitToLast(e){try{return new Mx(this.firestore,jC(this._delegate,function(e){return Fk("limitToLast",e),HC._create("limitToLast",e,"L")}(e)))}catch(CR){throw Rx(CR,"limitToLast()","Query.limitToLast()")}}startAt(){try{return new Mx(this.firestore,jC(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return GC._create("startAt",t,!0)}(...arguments)))}catch(CR){throw Rx(CR,"startAt()","Query.startAt()")}}startAfter(){try{return new Mx(this.firestore,jC(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return GC._create("startAfter",t,!1)}(...arguments)))}catch(CR){throw Rx(CR,"startAfter()","Query.startAfter()")}}endBefore(){try{return new Mx(this.firestore,jC(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return WC._create("endBefore",t,!1)}(...arguments)))}catch(CR){throw Rx(CR,"endBefore()","Query.endBefore()")}}endAt(){try{return new Mx(this.firestore,jC(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return WC._create("endAt",t,!0)}(...arguments)))}catch(CR){throw Rx(CR,"endAt()","Query.endAt()")}}isEqual(e){return Gk(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?lx(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Lk(e,Bk);const t=Lk(e.firestore,$k),n=Jk(t),r=new ax(t);return kk(n,e._query,{source:"server"}).then((n=>new ix(t,r,e,n)))}(this._delegate):function(e){e=Lk(e,Bk);const t=Lk(e.firestore,$k),n=Jk(t),r=new ax(t);return UC(e._query),kk(n,e._query).then((n=>new ix(t,r,e,n)))}(this._delegate),t.then((e=>new Vx(this.firestore,new ix(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Dx(t),i=Ox(t,(e=>new Vx(this.firestore,new ix(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return dx(this._delegate,r,i)}withConverter(e){return new Mx(this.firestore,e?this._delegate.withConverter(Px.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Ux{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Fx(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Vx{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Mx(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new Fx(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new Ux(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new Fx(this._firestore,n))}))}isEqual(e){return ox(this._delegate,e._delegate)}}class Bx extends Mx{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Nx(this.firestore,e):null}doc(e){try{return new Nx(this.firestore,void 0===e?Kk(this._delegate):Kk(this._delegate,e))}catch(CR){throw Rx(CR,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=Lk(e.firestore,$k),r=Kk(e),i=ZC(e.converter,t);return px(n,[gC(mC(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Pb.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new Nx(this.firestore,e)))}isEqual(e){return Hk(this._delegate,e._delegate)}withConverter(e){return new Bx(this.firestore,e?this._delegate.withConverter(Px.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function jx(e){return Lk(e,jk)}class zx{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new oC(...t)}static documentId(){return new zx(av.keyField().canonicalString())}isEqual(e){return(e=as(e))instanceof oC&&this._delegate._internalPath.isEqual(e._internalPath)}}class qx{constructor(e){this._delegate=e}static serverTimestamp(){const e=new wC("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new qx(e)}static delete(){const e=new vC("deleteField");return e._methodName="FieldValue.delete",new qx(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new bC("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new qx(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new _C("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new qx(e)}static increment(e){const t=function(e){return new EC("increment",e)}(e);return t._methodName="FieldValue.increment",new qx(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Kx={Firestore:kx,GeoPoint:cC,Timestamp:nv,Blob:Ix,Transaction:xx,WriteBatch:Ax,DocumentReference:Nx,DocumentSnapshot:Lx,Query:Mx,QueryDocumentSnapshot:Fx,QuerySnapshot:Vx,CollectionReference:Bx,FieldPath:zx,FieldValue:qx,setLogLevel:function(e){!function(e){Ng.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new cs("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Kx)))}(e,((e,t)=>new kx(e,t,new Tx))),e.registerVersion("@firebase/firestore-compat","0.3.29")}(Zo);const Hx="firebasestorage.googleapis.com",Gx="storageBucket";class Wx extends Yi{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super($x(e),"Firebase Storage: ".concat(t," (").concat($x(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Wx.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return $x(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var Qx,Yx;function $x(e){return"storage/"+e}function Jx(){return new Wx(Qx.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Xx(){return new Wx(Qx.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Zx(){return new Wx(Qx.CANCELED,"User canceled the upload/download.")}function eA(){return new Wx(Qx.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function tA(e){return new Wx(Qx.INVALID_ARGUMENT,e)}function nA(){return new Wx(Qx.APP_DELETED,"The Firebase app was deleted.")}function rA(e,t){return new Wx(Qx.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function iA(e){throw new Wx(Qx.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Qx||(Qx={}));class sA{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=sA.makeFromUrl(e,t)}catch(CR){return new sA(e,"")}if(""===n.path)return n;throw r=e,new Wx(Qx.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(o,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://".concat(t===Hx?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:s}];for(let c=0;c<a.length;c++){const t=a[c],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new sA(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new Wx(Qx.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class oA{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function aA(e){return"string"===typeof e||e instanceof String}function cA(e){return lA()&&e instanceof Blob}function lA(){return"undefined"!==typeof Blob}function uA(e,t,n,r){if(r<t)throw tA("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw tA("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function hA(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function dA(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function fA(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Yx||(Yx={}));class pA{constructor(e,t,n,r,i,s,o,a,c,l,u){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new mA(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===Yx.NO_ERROR,i=n.getStatus();if(!t||fA(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===Yx.ABORT;return void e(!1,new mA(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new mA(s,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(CR){r(CR)}else if(null!==i){const e=Jx();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?nA():Zx())}else{r(Xx())}};this.canceled_?t(0,new mA(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function c(){return 2===a}let l=!1;function u(){if(!l){l=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((()=>{i=null,e(f,c())}),t)}function d(){s&&clearTimeout(s)}function f(e){if(l)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return d(),void u.call(null,e,...n);if(c()||o)return d(),void u.call(null,e,...n);let s;r<64&&(r*=2),1===a?(a=2,s=0):s=1e3*(r+Math.random()),h(s)}let p=!1;function m(e){p||(p=!0,d(),l||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),s=setTimeout((()=>{o=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class mA{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function gA(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function vA(){const e=gA();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(lA())return new Blob(n);throw new Wx(Qx.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function yA(e){if("undefined"===typeof atob)throw t="base-64",new Wx(Qx.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const wA={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class bA{constructor(e,t){this.data=e,this.contentType=t||null}}function _A(e,t){switch(e){case wA.RAW:return new bA(EA(t));case wA.BASE64:case wA.BASE64URL:return new bA(IA(e,t));case wA.DATA_URL:return new bA(function(e){const t=new SA(e);return t.base64?IA(wA.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(CR){throw rA(wA.DATA_URL,"Malformed data URL.")}return EA(t)}(t.rest)}(t),new SA(t).contentType)}throw Jx()}function EA(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function IA(e,t){switch(e){case wA.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw rA(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case wA.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw rA(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=yA(t)}catch(CR){if(CR.message.includes("polyfill"))throw CR;throw rA(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class SA{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw rA(wA.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class TA{constructor(e,t){let n=0,r="";cA(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(cA(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new TA(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new TA(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(lA()){const e=t.map((e=>e instanceof TA?e.data_:e));return new TA(vA.apply(null,e))}{const e=t.map((e=>aA(e)?_A(wA.RAW,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new TA(r,!0)}}uploadData(){return this.data_}}function kA(e){let t;try{t=JSON.parse(e)}catch(CR){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function CA(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function xA(e,t){return t}class AA{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||xA}}let PA=null;function NA(){if(PA)return PA;const e=[];e.push(new AA("bucket")),e.push(new AA("generation")),e.push(new AA("metageneration")),e.push(new AA("name","fullPath",!0));const t=new AA("name");t.xform=function(e,t){return function(e){return!aA(e)||e.length<2?e:CA(e)}(t)},e.push(t);const n=new AA("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new AA("timeCreated")),e.push(new AA("updated")),e.push(new AA("md5Hash",null,!0)),e.push(new AA("cacheControl",null,!0)),e.push(new AA("contentDisposition",null,!0)),e.push(new AA("contentEncoding",null,!0)),e.push(new AA("contentLanguage",null,!0)),e.push(new AA("contentType",null,!0)),e.push(new AA("metadata","customMetadata",!0)),PA=e,PA}function RA(e,t,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const e=n[s];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new sA(n,r);return t._makeStorageReference(i)}})}(r,e),r}function DA(e,t,n){const r=kA(t);if(null===r)return null;return RA(e,r,n)}function OA(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class LA{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function FA(e){if(!e)throw Jx()}function MA(e,t){return function(n,r){const i=DA(e,r,t);return FA(null!==i),i}}function UA(e,t){return function(n,r){const i=DA(e,r,t);return FA(null!==i),function(e,t,n,r){const i=kA(t);if(null===i)return null;if(!aA(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent,a=s.split(",").map((t=>{const i=e.bucket,s=e.fullPath;return hA("/b/"+o(i)+"/o/"+o(s),n,r)+dA({alt:"media",token:t})}));return a[0]}(i,r,e.host,e._protocol)}}function VA(e){return function(t,n){let r;var i,s;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Wx(Qx.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Wx(Qx.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,r=new Wx(Qx.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Wx(Qx.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function BA(e){const t=VA(e);return function(n,r){let i=t(n,r);var s;return 404===n.getStatus()&&(s=e.path,i=new Wx(Qx.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function jA(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function zA(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;const c=jA(t,r,i),l="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+OA(c,n)+"\r\n--"+a+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",u="\r\n--"+a+"--",h=TA.getBlob(l,r,u);if(null===h)throw eA();const d={name:c.fullPath},f=hA(s,e.host,e._protocol),p=e.maxUploadRetryTime,m=new LA(f,"POST",MA(e,n),p);return m.urlParams=d,m.headers=o,m.body=h.uploadData(),m.errorHandler=VA(t),m}let qA=null;class KA{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Yx.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=Yx.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=Yx.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw iA("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw iA("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw iA("cannot .getStatus() before sending");try{return this.xhr_.status}catch(CR){return-1}}getResponse(){if(!this.sent_)throw iA("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw iA("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class HA extends KA{initXhr(){this.xhr_.responseType="text"}}function GA(){return qA?qA():new HA}class WA{constructor(e,t){this._service=e,this._location=t instanceof sA?t:sA.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new WA(e,t)}get root(){const e=new sA(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return CA(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new sA(this._location.bucket,e);return new WA(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Wx(Qx.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function QA(e,t,n){e._throwIfRoot("uploadBytes");const r=zA(e.storage,e._location,NA(),new TA(t,!0),n);return e.storage.makeRequestWithTokens(r,GA).then((t=>({metadata:t,ref:e})))}function YA(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=hA(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new LA(r,"GET",UA(e,n),i);return s.errorHandler=BA(t),s}(e.storage,e._location,NA());return e.storage.makeRequestWithTokens(t,GA).then((e=>{if(null===e)throw new Wx(Qx.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function $A(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new sA(e._location.bucket,n);return new WA(e.storage,r)}function JA(e,t){if(e instanceof eP){const n=e;if(null==n._bucket)throw new Wx(Qx.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Gx+"' property when initializing the app?");const r=new WA(n,n._bucket);return null!=t?JA(r,t):r}return void 0!==t?$A(e,t):e}function XA(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof eP)return new WA(e,t);throw tA("To use ref(service, url), the first argument must be a Storage instance.")}return JA(e,t)}function ZA(e,t){const n=null===t||void 0===t?void 0:t[Gx];return null==n?null:sA.makeFromBucketSpec(n,e)}class eP{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=Hx,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?sA.makeFromBucketSpec(r,this._host):ZA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=sA.makeFromBucketSpec(this._url,e):this._bucket=ZA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){uA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){uA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new WA(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new oA(nA());{const s=function(e,t,n,r,i,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=dA(e.urlParams),c=e.url+a,l=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(l,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(l,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(l,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(l,r),new pA(c,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const tP="@firebase/storage",nP="0.12.4",rP="storage";function iP(e,t,n){return QA(e=as(e),t,n)}function sP(e){return YA(e=as(e))}function oP(e,t){return XA(e=as(e),t)}function aP(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new eP(r,i,s,n,xo)}wo(new cs(rP,aP,"PUBLIC").setMultipleInstances(!0)),Oo(tP,nP,""),Oo(tP,nP,"esm2017");const cP={apiKey:"AIzaSyDmUq8ddVDUUr9OH1hbeHPrwi97xAZ0hcs",authDomain:"miniblog-43686.firebaseapp.com",projectId:"miniblog-43686",storageBucket:"miniblog-43686.appspot.com",messagingSenderId:"125888470069",appId:"1:125888470069:web:3addba989eafadf899657c"},lP=Zo.initializeApp(cP).firestore(),uP=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:No(),t=arguments.length>1?arguments[1]:void 0;e=as(e);const n=bo(e,rP).getImmediate({identifier:t}),r=Mi("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:Bi(i,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}(Ao(cP));var hP,dP,fP,pP,mP,gP,vP,yP;const wP=pr.div(hP||(hP=Ee(["\n   padding: 16px;\n    width: calc(100%-32px);\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    background-color: black;\n    box-sizing: content-box;\n"]))),bP=pr.div(dP||(dP=Ee(["\n    width: 1000px;\n    max-width: 1306px;\n    margin-left: 80px;\n    margin-top: 12px;\n    margin-right: 32px;\n"]))),_P=pr.div(fP||(fP=Ee(["\n    display:flex;\n    display-direction: row;\n"]))),EP=pr.div(pP||(pP=Ee(["\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 28px;\n    height: 40px;\n    padding: 12px 0px;\n    width: calc(100% - 14px);\n"]))),IP=pr.p(mP||(mP=Ee(["\n    font-size: 18px;\n    font-weight: 800;\n    color: white;\n    line-height: 12px;\n"]))),SP=pr.div(gP||(gP=Ee(["\n    display: flex;\n    height: 20px;\n    padding: 12px 0px;\n    cursor: pointer;\n"]))),TP=pr.img(vP||(vP=Ee(["\n    width: 19px;\n    height: 18px;\n    margin-right: 4px;\n"]))),kP=pr(yr)(yP||(yP=Ee(["\n"])));const CP=function(e){const t=X(),[n,i]=(0,r.useState)([]),[s,o]=(0,r.useState)([]);return(0,r.useEffect)((function(){let e=[];lP.collection("post").get().then((function(t){t.forEach((function(t){e.push(t.data())})),i(e),console.log(e)}))}),[]),(0,r.useEffect)((function(){lP.collection("owner").get().then((e=>{const t=e.docs.map((e=>e.data()));o(t)}))}),[]),console.log(s),console.log(n),(0,gr.jsxs)(wP,{children:[(0,gr.jsx)(xi,{}),(0,gr.jsxs)(_P,{children:[(0,gr.jsxs)(bP,{children:[(0,gr.jsxs)(EP,{children:[(0,gr.jsx)(IP,{children:"\uc804\uccb4\ud3ec\uc2a4\ud2b8"}),(0,gr.jsxs)(SP,{children:[(0,gr.jsx)(TP,{src:"https://firebasestorage.googleapis.com/v0/b/miniblog-43686.appspot.com/o/public%2Fpencil.svg?alt=media&token=1fb0b414-fb3f-4ee3-8bc7-04cf7bfd6af1"}),(0,gr.jsx)(kP,{title:"\uae00\uc4f0\uae30",onClick:()=>{t("/write")}})]})]}),(0,gr.jsx)(Xr,{posts:n,aboutOwner:s,onClickItem:e=>{t("/post/"+e.id)}})]}),s&&s.length>0&&(0,gr.jsx)(mi,{aboutOwner:s})]})]})};var xP,AP,PP,NP,RP,DP,OP,LP;const FP=pr.div(xP||(xP=Ee(["\n    width: 800px;\n    padding: 28px 8px;\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n    cursor: pointer;\n    border-bottom: solid 1px #6C6C6C;\n    &:last-child {\n        border-bottom: none;\n    }\n"]))),MP=pr.p(AP||(AP=Ee(["\n    font-size: 14px;\n    white-space: pre-wrap;\n    color: #B6B6B6;\n    line-height: 4px;\n    text-align : left;\n"]))),UP=pr.p(PP||(PP=Ee(["\n    font-size: 18px;\n    white-space: pre-wrap;\n    color: #FFFFFF;\n    font-weight: 900;\n    line-height: 4px;\n"]))),VP=pr.p(NP||(NP=Ee(["\n    font-size: 14px;\n    white-space: pre-wrap;\n    color: #ffffff;\n    font-weight: 100;\n    margin-left: 10px;\n    line-height: 4px;\n"]))),BP=pr.img(RP||(RP=Ee(["\n    width: 40px;\n    height: 40px;\n    border-radius: 50%;\n    margin-right: 16px;\n"]))),jP=pr.div(DP||(DP=Ee(["\n    display: flex;\n    align-items: center;\n"]))),zP=pr.div(OP||(OP=Ee(["\n"]))),qP=pr.div(LP||(LP=Ee(["\n    display:flex;\n"])));const KP=function(e){const{comment:t}=e,{nanoseconds:n,seconds:r}=t.time,i=function(e){if(isNaN(e.getTime()))return null;const t=e.getFullYear(),n=(e.getMonth()+1).toString().padStart(2,"0"),r=e.getDate().toString().padStart(2,"0");return"".concat(t,"\ub144 ").concat(n,"\uc6d4 ").concat(r,"\uc77c")}(new Date(1e3*r+n/1e6));return(0,gr.jsx)(FP,{children:(0,gr.jsxs)(qP,{children:[(0,gr.jsx)(BP,{src:t.img,alt:"User avatar"}),(0,gr.jsxs)(zP,{children:[(0,gr.jsxs)(jP,{children:[(0,gr.jsx)(UP,{children:t.name}),i&&(0,gr.jsx)(VP,{children:i})]}),(0,gr.jsx)(MP,{children:t.content})]})]})})};var HP;const GP=pr.div(HP||(HP=Ee(["\n    display: flex;\n    flex-direction:column;\n    align-item: flex-start;\n    justify-content: center;\n    margin-left: 34px;\n    \n"])));const WP=function(e){const{comments:t}=e;return(0,gr.jsx)(GP,{children:t.map(((e,t)=>(0,gr.jsx)(KP,{comment:e},e.id)))})};var QP;const YP=pr.textarea(QP||(QP=Ee(["\n    width: ","%;\n    height: ","px;\n    padding: 16px;\n    font-size: ","px;\n    line-height: 20px;\n    background-color: transparent;\n    border: 1px solid transparent;\n    border-radius: 8px;\n    color: white;\n    resize: none;\n    font-weight: ",";\n\n    ::placeholder {\n        color: #ccc; \n    }\n"])),(e=>e.width),(e=>e.height),(e=>e.fontsize),(e=>e.fontweight));const $P=function(e){const{fontweight:t,width:n,fontsize:r,height:i,value:s,onChange:o,placeholder:a="\uc5ec\uae30\uc5d0 \ub313\uae00\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694"}=e;return(0,gr.jsx)(YP,{fontweight:t,width:n,height:i,value:s,onChange:o,fontsize:r,placeholder:a})};var JP,XP,ZP,eN,tN,nN,rN,iN,sN,oN,aN,cN,lN,uN,hN,dN,fN,pN,mN,gN,vN,yN,wN,bN;const _N=pr.div(JP||(JP=Ee(["\n    box-sizing: content-box;\n    padding: 16px;\n    width: calc(100%-32px);\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    background-color: black;\n"]))),EN=pr.div(XP||(XP=Ee(["\n   \n    // & > *{\n    //     :not(:last-child){\n    //         margin-bottom: 8px;\n    //     }\n    // }\n    \n    width: 980px;\n    max-width: 1306px;\n"]))),IN=pr.div(ZP||(ZP=Ee(["\n    display: flex;\n\n"]))),SN=pr.div(eN||(eN=Ee(["\n    background-color: #1F1F1F;\n    height: 84px;\n    display: flex;\n    align-items:center; \n    padding: 0px 80px;\n"]))),TN=pr.div(tN||(tN=Ee(["\n    margin-left: 24px;\n"]))),kN=pr.div(nN||(nN=Ee(["\n    padding: 20px 86px;\n"]))),CN=pr.div(rN||(rN=Ee(["\n    padding: 20px 80px;\n    border: 1px soild grey;\n    border-radius: 8px;\n    text-align:center;\n"]))),xN=pr.img(iN||(iN=Ee(["\n    width: 480px;\n    margin-bottom: 12px;\n"]))),AN=pr.p(sN||(sN=Ee(["\n    font-size: 20px;\n    font-weight:500;\n    color: #ffffff;\n    margin: 0px;\n    margin-bottom: 8px;\n"]))),PN=pr(AN)(oN||(oN=Ee(["\n    font-size: 14px;\n    font-weight:300;\n    color: #A6A6A6;\n"]))),NN=pr(AN)(aN||(aN=Ee(["\n    font-size: 18px;\n    font-weight:500;\n    color: #ffffff;\n    margin-bottom: 4px;\n"]))),RN=pr(AN)(cN||(cN=Ee(["\n    font-size: 14px;\n    font-weight:100;\n    color: #A6A6A6;\n    margin: 0px;\n"]))),DN=pr.p(lN||(lN=Ee(["\n    font-size: 14px;\n    line-height: 32px;\n    white-space:pre-wrap;\n    color: #ffffff;\n"]))),ON=pr.p(uN||(uN=Ee(["\n    font-size: 16px;\n    font-weight: 500;\n"]))),LN=pr.div(hN||(hN=Ee(["\n    display: flex;\n    gap: 8px; \n    margin-top: 28px;\n"]))),FN=pr.p(dN||(dN=Ee(["\n    padding: 8px 16px;\n    font-size: 16px;\n    background-color: #333;\n    color: #fff;\n    border-radius: 20px;\n    margin-right: 4px;\n    margin-bottom: 44px\n"]))),MN=pr.img(fN||(fN=Ee(["\n    width: 52px;\n    height: 52px;\n    border-radius: 40px;\n"]))),UN=pr.div(pN||(pN=Ee(["\n    width:94%;\n    display:flex;\n    padding: 32px 36px;\n    font-size: 16px;\n    background-color:#101010;\n    border: #999999 solid 1px;\n    border-radius: 8px;\n    color: white;\n    \n"]))),VN=pr.div(mN||(mN=Ee(["\n    width:100%;\n    display: flex;\n"]))),BN=pr(yr)(gN||(gN=Ee(["\n    background-color: #7D7D7D;  // \uc0c8\ub85c\uc6b4 \ubc30\uacbd \uc0c9\uc0c1\n    border: 1px solid #999999;  // \uc0c8\ub85c\uc6b4 \ud14c\ub450\ub9ac\n    font-size: 15px;\n    font-weight: 500;\n    border-radius:8px;\n    padding: 10px 14px;\n    width: 120px;\n    height: 40px;\n    margin-top:160px;\n"]))),jN=pr.input(vN||(vN=Ee(["\n    color: #ffffff;\n    width: 72px;\n    height: 40px;\n    overflow: hidden;\n    border-radius: 5px;\n    color: #333;\n    padding-top: 16px;\n    overflow: hidden;\n"]))),zN=pr.div(yN||(yN=Ee(["\n    width: 68px;\n"]))),qN=pr.div(wN||(wN=Ee(["\n    width: 120%;\n    margin-left:-16px;\n"]))),KN=pr.hr(bN||(bN=Ee(["\n    width: 85%;\n    border: 0.5px solid #6C6C6C;\n"])));const HN=function(e){const[t,n]=(0,r.useState)([]);(0,r.useEffect)((function(){lP.collection("owner").get().then((e=>{const t=e.docs.map((e=>e.data()));n(t)}))}),[]);const i=X(),s=function(){let{matches:e}=r.useContext(W),t=e[e.length-1];return t?t.params:{}}().id,[o,a]=(0,r.useState)({id:0,title:"",content:"",comments:[],tag:[],img:""}),[c,l]=(0,r.useState)(""),[u,h]=(0,r.useState)(""),[d,f]=(0,r.useState)(null),[p,m]=(0,r.useState)(null);(0,r.useEffect)((()=>{lP.collection("post").doc(s).get().then((e=>{e.exists&&a(e.data())}))}),[s]);const g=e=>{const t={id:s+"_"+(new Date).getTime(),name:u,content:c,time:new Date,img:e||"https://firebasestorage.googleapis.com/v0/b/miniblog-43686.appspot.com/o/public%2Fanonymous.jpg?alt=media&token=f049dd07-aae6-4dec-9945-95bbd983897d"},n=[...o.comments,t];lP.collection("post").doc(s).update({comments:n}).then((()=>{l(""),h(""),m(null),f(null),a((e=>({...e,comments:n})))}))};return(0,gr.jsxs)(_N,{children:[(0,gr.jsx)(xi,{}),(0,gr.jsxs)(IN,{children:[(0,gr.jsxs)(EN,{children:[(0,gr.jsxs)(SN,{children:[(0,gr.jsx)(yr,{title:"<",onClick:()=>{i("/")}}),(0,gr.jsxs)(TN,{children:[(0,gr.jsx)(NN,{children:o.title}),(0,gr.jsx)(RN,{children:o.tag[0]})]})]}),(0,gr.jsxs)(kN,{children:[(0,gr.jsx)(AN,{children:o.title}),(0,gr.jsx)(PN,{children:o.subtitle})]}),(0,gr.jsxs)(CN,{children:[(0,gr.jsx)(xN,{src:o.img}),(0,gr.jsx)(DN,{children:o.content}),(0,gr.jsx)(LN,{children:o.tag.map(((e,t)=>(0,gr.jsx)(FN,{children:e},t)))}),(0,gr.jsxs)(UN,{children:[(0,gr.jsxs)(VN,{children:[(0,gr.jsxs)(zN,{children:[p&&(0,gr.jsx)(MN,{src:p}),(0,gr.jsx)(jN,{type:"file",onChange:e=>{const t=e.target.files[0];if(f(t),t){const e=new FileReader;e.onloadend=()=>{m(e.result)},e.readAsDataURL(t)}else m(null)}})]}),(0,gr.jsxs)(qN,{children:[(0,gr.jsx)($P,{width:85,fontsize:16,fontweight:800,placeholder:"\ub2c9\ub124\uc784\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.",height:20,value:u,onChange:e=>h(e.target.value),placeholderFontSize:"16px"}),(0,gr.jsx)(KN,{}),(0,gr.jsx)($P,{width:85,fontsize:15,height:80,value:c,onChange:e=>l(e.target.value),placeholderFontSize:"15px"})]})]}),(0,gr.jsx)(BN,{title:"\ub313\uae00\ub0a8\uae30\uae30",onClick:()=>{if(!d)return void g();const e=(new Date).getTime().toString();iP(oP(uP,"images/comments/".concat(d.name,"_").concat(e)),d).then((e=>{sP(e.ref).then((e=>{g(e)}))}))},children:"\ub313\uae00 \ub0a8\uae30\uae30"})]}),(0,gr.jsx)(ON,{children:"\ub313\uae00"}),(0,gr.jsx)(WP,{comments:o.comments})]})]}),t&&t.length>0&&(0,gr.jsx)(mi,{aboutOwner:t})]})]})};var GN,WN,QN,YN,$N,JN;const XN=pr.input(GN||(GN=Ee(["\n    padding: 12px 20px;\n    border-radius: 20px;\n    background-color: black;\n    border: solid 1px #AEAEAE;\n    margin-right:8px;\n    color: white;\n"]))),ZN=pr.li(WN||(WN=Ee(["\n    font-size: 14px;\n    line-height: 16px;\n    width: max-content;\n    padding: 10px 14px 10px 18px;\n    color: white;\n    border-radius: 20px;\n    background-color: #303030;\n    list-style: none;\n    font-weight:100;\n    margin-right: 12px;\n"]))),eR=pr.form(QN||(QN=Ee(["\n    padding-top: 0px;\n    display: flex;\n    justify-content: start;\n"]))),tR=pr.button(YN||(YN=Ee(["\n    font-size: 18px;\n    cursor: pointer;\n    color: #ffffff;\n    border: 0;\n    font-weight: 800;\n    background-color: transparent;\n"]))),nR=pr.ul($N||($N=Ee(["\n    display:flex;\n    padding-left: 8px;\n"]))),rR=pr.div(JN||(JN=Ee(["\n    margin-top: 18px;\n"])));const iR=function(e){let{items:t,setItems:n}=e;const[i,s]=(0,r.useState)("");return(0,gr.jsxs)(eR,{onSubmit:e=>{},children:[(0,gr.jsx)(nR,{children:t.map(((e,t)=>(0,gr.jsxs)(ZN,{children:[e,(0,gr.jsx)(tR,{type:"button",onClick:()=>(e=>{n((t=>t.filter(((t,n)=>n!==e))))})(t),children:"x"})]},t)))}),(0,gr.jsxs)(rR,{children:[(0,gr.jsx)(XN,{type:"text",value:i,onChange:e=>{s(e.target.value)},placeholder:"\ud0dc\uadf8 \uc774\ub984 \uc785\ub825"}),(0,gr.jsx)(tR,{type:"button",onClick:()=>{const e=i.trim();e&&(n((t=>[...t,e])),s(""))},children:"\ucd94\uac00"})]})]})};var sR,oR,aR,cR,lR,uR,hR,dR,fR,pR;const mR=pr.div(sR||(sR=Ee(["\n    box-sizing: content-box;\n    padding: 16px;\n    width: calc(100%-32px);\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    background-color: black;\n"]))),gR=pr.div(oR||(oR=Ee(["\n    width: 100%;\n    max-width: 1306px;\n"]))),vR=pr.p(aR||(aR=Ee(["\n    font-size: 24px;\n    color: white;\n    font-weight: 800;\n"]))),yR=pr.div(cR||(cR=Ee(["\n    display: flex;\n    background-color: #2F2F2F;\n    width: 1306px;\n    height: 96px;\n    justify-content: space-between;\n"]))),wR=pr(yr)(lR||(lR=Ee(["\n    margin-right:32px;\n"]))),bR=pr.div(uR||(uR=Ee(["\n    width: 100%;\n    padding: 12px 0px;\n    border-bottom: 1px solid #585858;\n    margin-bottom: 32px;\n    margin-top:12px;\n"]))),_R=pr.div(hR||(hR=Ee(["\n    display: flex;\n    align-items:center; \n    padding: 0px 60px;\n"]))),ER=pr(yr)(dR||(dR=Ee(["\n    background-color: #838383;\n    height: 50px;\n    border-radius: 40px;\n    padding: 4px 36px;\n    margin-right: 52px;\n    margin-top: 20px;\n    line-height: 18px;\n\n"]))),IR=pr.input(fR||(fR=Ee(["\n    color: #ffffff;\n"]))),SR=pr.img(pR||(pR=Ee(["\n    height: 400px;\n    margin-left: auto;\n    margin-right: auto;\n    display: block;\n    margin-bottom: 32px;\n    margin-top:24px;\n"])));const TR=function(e){const[t,n]=(0,r.useState)(""),[i,s]=(0,r.useState)(""),[o,a]=(0,r.useState)(""),[c,l]=(0,r.useState)([]),[u,h]=(0,r.useState)(null),[d,f]=(0,r.useState)(null),p=X();return(0,gr.jsxs)(mR,{children:[(0,gr.jsx)(xi,{}),(0,gr.jsxs)(yR,{children:[(0,gr.jsxs)(_R,{children:[(0,gr.jsx)(wR,{title:"<",onClick:()=>{p("/")}}),(0,gr.jsx)(vR,{children:"\uae00\uc4f0\uae30"})]}),(0,gr.jsx)(ER,{title:"\ubc1c\ud589",onClick:()=>{let e=(new Date).getTime().toString();const n={id:e,title:t,subtitle:i,content:o,time:new Date,comments:[],tag:c,img:d};if(null!=u){iP(oP(uP,"images/".concat(u.name,"_").concat(e)),u).then((t=>{sP(t.ref).then((t=>{n.img=t,lP.collection("post").doc(e).set(n).then((()=>{p("/")}))}))}))}else lP.collection("post").doc(e).set(n).then((()=>{p("/")}))}})]}),(0,gr.jsxs)(gR,{children:[(0,gr.jsxs)(bR,{children:[(0,gr.jsx)($P,{height:28,value:t,width:97,onChange:e=>n(e.target.value),placeholder:"\uc81c\ubaa9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694",fontsize:28}),(0,gr.jsx)($P,{height:20,value:i,width:97,onChange:e=>s(e.target.value),placeholder:"\ubd80\uc81c\ubaa9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694",fontsize:18})]}),(0,gr.jsx)(IR,{type:"file",onChange:e=>{const t=e.target.files[0];if(h(t),t){const e=new FileReader;e.onloadend=()=>{f(e.result)},e.readAsDataURL(t)}else f(null)}}),d&&(0,gr.jsx)(SR,{src:d,alt:"Image Preview"}),(0,gr.jsx)($P,{height:220,fontsize:15,width:97,value:o,onChange:e=>a(e.target.value),placeholder:"\ub0b4\uc6a9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694"}),(0,gr.jsx)(iR,{items:c,setItems:l})]})]})};function kR(){const e=$();return(0,r.useEffect)((()=>{window.scrollTo(0,0)}),[e]),null}s.createRoot(document.getElementById("root")).render((0,gr.jsx)("div",{children:(0,gr.jsxs)(ye,{basename:{NODE_ENV:"production",PUBLIC_URL:"/lunch-menu/lunch-menu.git",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_KEY:"AIzaSyDmUq8ddVDUUr9OH1hbeHPrwi97xAZ0hcs",REACT_APP_FB_AUTH_DOMAIN:"miniblog-43686.firebaseapp.com",REACT_APP_FB_PROJECT_ID:"miniblog-43686",REACT_APP_FB_STORAGE_BUCKET:"miniblog-43686.appspot.com",REACT_APP_FB_MESSAGING_SENDER_ID:"125888470069",REACT_APP_FB_API_ID:"1:125888470069:web:3addba989eafadf899657c"}.PUBPLIC_URL,children:[(0,gr.jsx)(kR,{}),(0,gr.jsxs)(fe,{children:[(0,gr.jsx)(he,{index:!0,element:(0,gr.jsx)(CP,{})}),(0,gr.jsx)(he,{path:"write",element:(0,gr.jsx)(TR,{})}),(0,gr.jsx)(he,{path:"post/:id",element:(0,gr.jsx)(HN,{})})]})]})})),_e()})()})();
//# sourceMappingURL=main.0dfc7eae.js.map